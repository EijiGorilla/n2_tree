"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[53584],{53584:(e,i,s)=>{s.r(i),s.d(i,{default:()=>h});var t=s(35143),r=(s(76460),s(81806),s(47249),s(50076),s(85842)),a=s(2101),l=s(92339);let y=class extends((0,a.e)(l.default)){attach(){this._updateStageChildren(),this.addAttachHandles(this.layerViews.on("after-changes",(()=>this._updateStageChildren())))}detach(){this.container.removeAllChildren()}update(e){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,i)=>this.container.addChildAt(e.container,i)))}};y=(0,t._)([(0,r.$)("esri.views.2d.layers.GroupLayerView2D")],y);const h=y},92339:(e,i,s)=>{s.r(i),s.d(i,{default:()=>V});var t=s(35143),r=s(19276),a=s(3975),l=s(68134),y=s(46053),h=(s(81806),s(76460),s(47249),s(85842)),n=s(91196);let d=class extends n.default{constructor(e){super(e),this.type="group",this.layerViews=new r.default}destroy(){this.layerViews.length=0}_allLayerViewVisibility(e){this.layerViews.forEach((i=>{i.visible=e}))}initialize(){this.addHandles([this.layerViews.on("change",(e=>this._layerViewsChangeHandler(e))),(0,l.watch)((()=>this.layer?.visibilityMode),(()=>{this.layer&&this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(null)))}),l.sync),(0,l.watch)((()=>this.visible),(e=>{this._applyVisibility((()=>this._allLayerViewVisibility(e)),(()=>{}))}),l.sync)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}get creatingLayerViews(){return this.view?.layerViewManager?.isCreatingLayerViewsForLayer(this.layer)??!1}set layerViews(e){this._set("layerViews",(0,a.V)(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.creatingLayerViews||this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden("visible")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return!!i?.visible}));return e&&this._findLayerViewForLayer(e)}_applyExclusiveVisibility(e){null==e&&null==(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.at(0))),this.layerViews.forEach((i=>{i.visible=i===e}))}_layerViewsChangeHandler(e){this.removeHandles("grouplayerview:visible"),this.addHandles(this.layerViews.map((e=>(0,l.watch)((()=>e.visible),(i=>this._applyVisibility((()=>{i!==this.visible&&(e.visible=this.visible)}),(()=>this._applyExclusiveVisibility(i?e:null)))),l.sync))).toArray(),"grouplayerview:visible");const i=e.added[e.added.length-1];this._applyVisibility((()=>this._allLayerViewVisibility(this.visible)),(()=>this._applyExclusiveVisibility(i?.visible?i:null)))}_applyVisibility(e,i){this._hasLayerViewVisibleOverrides()&&("inherited"===this.layer?.visibilityMode?e():"exclusive"===this.layer?.visibilityMode&&i())}};(0,t._)([(0,y.MZ)({readOnly:!0})],d.prototype,"creatingLayerViews",null),(0,t._)([(0,y.MZ)({cast:a.H})],d.prototype,"layerViews",null),(0,t._)([(0,y.MZ)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,t._)([(0,y.MZ)()],d.prototype,"view",void 0),d=(0,t._)([(0,h.$)("esri.views.layers.GroupLayerView")],d);const V=d}}]);
//# sourceMappingURL=53584.8a975c98.chunk.js.map