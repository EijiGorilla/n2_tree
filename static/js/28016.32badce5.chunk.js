"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[28016],{10294:(e,t,n)=>{n.d(t,{S:()=>c});var r=n(15941),i=n(31633),o=n(20664),s=n(5568),a=n(13927);function c(e,t,n){const c=function(e,t,n,r){const s=(e=>!Array.isArray(e[0]))(t)?(e,n)=>t[3*e+n]:(e,n)=>t[e][n],c=r?(0,i.GA)(r)/(0,i.G9)(r):1;return(0,a.lU)(e,((e,t)=>(0,o.i)(e,s(t,0)*c,s(t,1)*c,s(t,2))),n)}(l,e,t,n)?(0,a.Qj)(l):[0,0,1];return Math.abs(c[2])>Math.cos((0,r.kU)(80))?s._.Z:Math.abs(c[1])>Math.abs(c[0])?s._.Y:s._.X}const l=(0,a.vt)()},14239:(e,t,n)=>{n.d(t,{N:()=>l});var r=n(4212),i=n(16506),o=n(59246),s=n(80517),a=n(84093),c=n(34781);class l extends o.w{constructor(e,t){super(e,t,new i.$(s.a,(()=>n.e(71043).then(n.bind(n,71043)))))}initializePipeline(e){switch(e.blitMode){case a.d.None:case a.d.Depth:return(0,c.Ey)({colorWrite:c.kn});case a.d.Alpha:return(0,c.Ey)({blending:c.Ky,colorWrite:c.kn});default:(0,r.Xb)(e.blitMode);case a.d.PremultipliedAlpha:case a.d.COUNT:return(0,c.Ey)({blending:c.Os,colorWrite:c.kn})}}}},21812:(e,t,n)=>{n.d(t,{_:()=>r});class r{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=e,this.count=t,this.type=n,this.offset=r,this.stride=i,this.normalized=o,this.divisor=s}}},25530:(e,t,n)=>{n.d(t,{G:()=>l,V:()=>f});var r=n(43047),i=n(55855),o=n(69817),s=n(3799),a=n(58350),c=n(86955);function l(e,t){const n=e.vertex;t.hasVerticalOffset?(f(n),t.hasScreenSizePerspective&&(e.include(o.Y6),(0,o.OH)(n),(0,s.yu)(e.vertex,t)),n.code.add(c.H`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${t.spherical?c.H`vec3 worldNormal = normalize(worldPos + localOrigin);`:c.H`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${t.hasScreenSizePerspective?c.H`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:c.H`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):n.code.add(c.H`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const u=(0,i.vt)();function f(e){e.uniforms.add(new a.E("verticalOffset",((e,t)=>{const{minWorldLength:n,maxWorldLength:i,screenLength:o}=e.verticalOffset,s=Math.tan(.5*t.camera.fovY)/(.5*t.camera.fullViewport[3]),a=t.camera.pixelRatio||1;return(0,r.s)(u,o*a,s,n,i)})))}},27963:(e,t,n)=>{n.d(t,{Ir:()=>u});var r=n(19555),i=n(72745),o=n(43047),s=n(55855),a=n(28450),c=n(51596),l=n(86955);function u(e){e.fragment.uniforms.add(new c.I("projInfo",(e=>function(e){const t=e.projectionMatrix;return 0===t[11]?(0,o.s)(f,2/(e.fullWidth*t[0]),2/(e.fullHeight*t[5]),(1+t[12])/t[0],(1+t[13])/t[5]):(0,o.s)(f,-2/(e.fullWidth*t[0]),-2/(e.fullHeight*t[5]),(1-t[8])/t[0],(1-t[9])/t[5])}(e.camera)))),e.fragment.uniforms.add(new a.E("zScale",(e=>0===e.camera.projectionMatrix[11]?(0,r.hZ)(d,0,1):(0,r.hZ)(d,1,0)))),e.fragment.code.add(l.H`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}const f=(0,s.vt)();const d=(0,i.vt)()},29201:(e,t,n)=>{n.d(t,{I:()=>y,a:()=>x,b:()=>m});var r=n(34981),i=n(26917),o=n(59395),s=n(90080),a=n(94192),c=n(80883),l=n(3799),u=n(21390),f=n(86955),d=n(70367),h=n(66470),p=n(91911),v=n(31432),g=n(2687);class x extends v.Y{}function m(e){const t=new g.N5,{vertex:n,fragment:v}=t,{output:x,perspectiveInterpolation:m}=e;return(0,l.NB)(n,e),t.include(o.d,e),t.include(a.Z,e),t.fragment.include(i.HQ,e),t.include(s.g,e),t.include(p.z,e),t.attributes.add(h.r.POSITION,"vec3"),t.attributes.add(h.r.UV0,"vec2"),m&&t.attributes.add(h.r.PERSPECTIVEDIVIDE,"float"),n.main.add(f.H`
    vpos = position;
    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${(0,f.If)(m,"gl_Position *= perspectiveDivide;")}`),t.varyings.add("vpos","vec3"),t.varyings.add("vTexCoord","vec2"),v.include(c.a),v.uniforms.add(new u.m("opacity",(e=>e.opacity)),new d.N("tex",(e=>e.texture))).main.add(f.H`
    discardBySlice(vpos);
    discardByTerrainDepth();
    ${(0,f.If)(x===r.V.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;")}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos);`),t}const y=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:x,build:m},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,n)=>{n.d(t,{r:()=>T});var r=n(88105),i=n(34981),o=n(83490),s=n(75803),a=n(45463),c=n(60322),l=n(77730),u=n(86994),f=n(66470),d=n(82809),h=n(86401),p=n(63928),v=n(52757),g=n(16506),x=n(59246),m=n(72001),y=n(96643),_=n(29201),b=n(34781);class O extends x.w{constructor(e,t){super(e,t,new g.$(_.I,(()=>n.e(48391).then(n.bind(n,48391)))),w)}_getPipelineState(e,t){const{oitPass:n,output:r,hasOccludees:o,enableOffset:s,cullFace:a}=e,l=n===m.Y.NONE,u=n===m.Y.FrontFace;return(0,b.Ey)({blending:(0,i.RN)(r)?l?b.Os:(0,c.ez)(n):null,culling:(0,b.Xt)(a),depthTest:{func:(0,c.K_)(n)},depthWrite:(0,c.z5)(e),drawBuffers:(0,c.m6)(n,r),colorWrite:b.kn,stencilWrite:o?y.v0:null,stencilTest:o?t?y.a9:y.qh:null,polygonOffset:l||u?null:(0,c.aB)(s)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const w=new Map([[f.r.POSITION,0],[f.r.UV0,2],[f.r.PERSPECTIVEDIVIDE,3]]);var A=n(35143),E=n(97808),S=n(42717),R=n(6485),P=n(94570);class C extends P.E{constructor(){super(...arguments),this.cullFace=o.s2.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=E.I.None,this.emissionSource=S.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,A._)([(0,R.W)({count:o.s2.COUNT})],C.prototype,"cullFace",void 0),(0,A._)([(0,R.W)()],C.prototype,"enableOffset",void 0),(0,A._)([(0,R.W)()],C.prototype,"writeDepth",void 0),(0,A._)([(0,R.W)()],C.prototype,"hasOccludees",void 0),(0,A._)([(0,R.W)()],C.prototype,"terrainDepthTest",void 0),(0,A._)([(0,R.W)()],C.prototype,"cullAboveTerrain",void 0),(0,A._)([(0,R.W)()],C.prototype,"perspectiveInterpolation",void 0);class T extends p.W{constructor(e){super(e,z),this._configuration=new C,this.vertexAttributeLocations=w,this.supportsEdges=!0,this.produces=new Map([[l.N.OPAQUE_MATERIAL,e=>(0,i.CL)(e)],[l.N.TRANSPARENT_MATERIAL,e=>(0,i._o)(e)&&this.parameters.writeDepth],[l.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,i._o)(e)&&!this.parameters.writeDepth],[l.N.DRAPED_MATERIAL,e=>(0,i._o)(e)||(0,i.CL)(e)]])}getConfiguration(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<c.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new I(e)}createBufferWriter(){const e=h.zK.clone();return this.parameters.perspectiveInterpolation&&e.f32(f.r.PERSPECTIVEDIVIDE),new N(e)}}class I extends s.m8{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(O,e)}}class N extends d.Z{write(e,t,n,i,o,s){for(const a of this.vertexBufferLayout.fields.keys()){const i=n.get(a);if(i)if(a===f.r.PERSPECTIVEDIVIDE){(0,u.vA)(1===i.size);const e=o.getField(a,r.Y$);e&&(0,v.uO)(i,e,s)}else(0,v.zC)(a,i,e,t,o,s)}}}class z extends a.qA{constructor(e){super(),this.textureId=e,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=o.s2.None,this.opacity=1,this.perspectiveInterpolation=!1}}},35202:(e,t,n)=>{n.d(t,{G:()=>a});var r=n(80517),i=n(14239),o=n(84093),s=n(93345);class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.d.None;this._techniques=e,this._parameters=new r.C,this._configuration=new o.N,this._configuration.blitMode=t,e.precompile(i.N,this._configuration)}blit(e,t,n,r){e.bindFramebuffer(n.fbo),e.setClearColor(0,0,0,1),e.clear(s.NV.COLOR),this._parameters.texture=t.getTexture();const o=this._techniques.get(i.N,this._configuration);e.bindTechnique(o,r,this._parameters),e.screen.draw()}blend(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._configuration.hasOpacityFactor=o<1;const s=this._techniques.get(i.N,this._configuration);return!!s.compiled&&(e.bindFramebuffer(n.fbo),this._parameters.texture=t.getTexture(),this._parameters.opacity=o,e.bindTechnique(s,r,this._parameters),e.screen.draw(),!0)}}},36911:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(76460),i=n(30726),o=n(97255),s=n(93345),a=n(27207);const c=()=>r.A.getLogger("esri.views.webgl.VertexArrayObject");let l=class{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._context=e,this._locations=t,this._layout=n,this._buffers=r,this._indexBuffer=i,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(this._buffers.size+(this._indexBuffer?1:0))*o.i5}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,i.WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&c().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(s.vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(s.vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:n}=this;e||c().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,n)=>{const r=t.get(n);r?(0,a.yu)(this._context,this._locations,e,r):c().error("Vertex element descriptor is empty!")})),null!=n&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}}},37431:(e,t,n)=>{n.d(t,{Gc:()=>c,RI:()=>u,Z4:()=>l,dk:()=>d,vr:()=>f});var r=n(76931),i=n(19555),o=n(20664),s=n(95925),a=n(75762);function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,s.vt)();return l(e,(0,r.WA)(t),n),(0,o.n)(n.direction,n.direction),n}function l(e,t,n){return u(e,e.screenToRender(t,(0,r.sc)(a.rq.get())),n)}function u(e,t,n){const s=(0,r.sc)((0,i.C)(a.rq.get(),t));if(s[2]=0,!e.unprojectFromRenderScreen(s,n.origin))return null;const c=(0,r.sc)((0,i.C)(a.rq.get(),t));c[2]=1;const l=e.unprojectFromRenderScreen(c,a.rq.get());return null==l?null:((0,o.d)(n.direction,l,n.origin),n)}function f(e,t,n){return d(e,e.screenToRender(t,(0,r.sc)(a.rq.get())),n)}function d(e,t,n){(0,o.c)(n.origin,e.eye);const r=(0,o.i)(a.rq.get(),t[0],t[1],1),i=e.unprojectFromRenderScreen(r,a.rq.get());return null==i?null:((0,o.d)(n.direction,i,n.origin),n)}},38983:(e,t,n)=>{function r(e,t,n){n=n||2;var r,o,a,c,l,u,d,h=t&&t.length,p=h?t[0]*n:e.length,v=i(e,0,p,n,!0),g=[];if(!v||v.next===v.prev)return g;if(h&&(v=f(e,t,v,n)),e.length>80*n){r=a=e[0],o=c=e[1];for(var x=n;x<p;x+=n)(l=e[x])<r&&(r=l),(u=e[x+1])<o&&(o=u),l>a&&(a=l),u>c&&(c=u);d=0!==(d=Math.max(a-r,c-o))?1/d:0}return s(v,g,n,r,o,d),g}function i(e,t,n,r,i){var o,s;if(i===I(e,t,n,r)>0)for(o=t;o<n;o+=r)s=P(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=P(o,e[o],e[o+1],s);if(s&&O(s,s.next)){var a=s.next;C(s),s=a}return s}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!O(r,r.next)&&0!==b(r.prev,r,r.next))r=r.next;else{var i=r.prev;if(C(r),(r=t=i)===r.next)break;n=!0}}while(n||r!==t);return t}function s(e,t,n,r,i,f,d){if(e){!d&&f&&g(e,r,i,f);for(var h,p,v=e;e.prev!==e.next;)if(h=e.prev,p=e.next,f?c(e,r,i,f):a(e))t.push(h.i/n),t.push(e.i/n),t.push(p.i/n),C(e),e=p.next,v=p.next;else if((e=p)===v){d?1===d?s(e=l(o(e),t,n),t,n,r,i,f,2):2===d&&u(e,t,n,r,i,f):s(o(e),t,n,r,i,f,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(b(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(y(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&b(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function c(e,t,n,r){var i=e.prev,o=e,s=e.next;if(b(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,c=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,l=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,f=x(a,c,t,n,r),d=x(l,u,t,n,r),h=e.prevZ,p=e.nextZ;h&&h.z>=f&&p&&p.z<=d;){if(h!==e.prev&&h!==e.next&&y(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&y(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&y(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&b(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&y(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function l(e,t,n){var r=e;do{var i=r.prev,s=r.next.next;!O(i,s)&&w(i,r,r.next,s)&&S(i,s)&&S(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),C(r),C(r.next),r=e=s),r=r.next}while(r!==e);return o(r)}function u(e,t,n,r,i,a){var c=e;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&_(c,l)){var u=R(c,l);return c=o(c,c.next),u=o(u,u.next),s(c,t,n,r,i,a),void s(u,t,n,r,i,a)}l=l.next}c=c.next}while(c!==e)}function f(e,t,n,r){var s,a,c,l=[];for(s=0,a=t.length;s<a;s++)(c=i(e,t[s]*r,s<a-1?t[s+1]*r:e.length,r,!1))===c.next&&(c.steiner=!0),l.push(m(c));for(l.sort(d),s=0;s<l.length;s++)n=o(n=p(l[s],n),n.next);return n}function d(e,t){return e.x-t.x}function h(e){if(e.next.prev===e)return e;let t=e;for(;;){const n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function p(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n;var c,l=n,u=n.x,f=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&y(o<f?i:s,o,u,f,o<f?s:i,o,r.x,r.y)&&(c=Math.abs(o-r.y)/(i-r.x),S(r,e)&&(c<d||c===d&&(r.x>n.x||r.x===n.x&&v(n,r)))&&(n=r,d=c)),r=r.next}while(r!==l);return n}(e,t);if(!n)return t;var r=R(n,e),i=o(n,n.next);let s=h(r);return o(s,s.next),i=h(i),h(t===n?i:t)}function v(e,t){return b(e.prev,e,t.prev)<0&&b(t.next,e,e.next)<0}function g(e,t,n,r){var i=e;do{null===i.z&&(i.z=x(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,c,l=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<l&&(a++,r=r.nextZ);t++);for(c=l;a>0||c>0&&r;)0!==a&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(s>1)}(i)}function x(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function m(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function y(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function _(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&w(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(S(e,t)&&S(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(b(e.prev,e,t.prev)||b(e,t.prev,t))||O(e,t)&&b(e.prev,e,e.next)>0&&b(t.prev,t,t.next)>0)}function b(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function O(e,t){return e.x===t.x&&e.y===t.y}function w(e,t,n,r){var i=E(b(e,t,n)),o=E(b(e,t,r)),s=E(b(n,r,e)),a=E(b(n,r,t));return i!==o&&s!==a||!(0!==i||!A(e,n,t))||!(0!==o||!A(e,r,t))||!(0!==s||!A(n,e,r))||!(0!==a||!A(n,t,r))}function A(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function E(e){return e>0?1:e<0?-1:0}function S(e,t){return b(e.prev,e,e.next)<0?b(e,t,e.next)>=0&&b(e,e.prev,t)>=0:b(e,t,e.prev)<0||b(e,e.next,t)<0}function R(e,t){var n=new T(e.i,e.x,e.y),r=new T(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(e,t,n,r){var i=new T(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function T(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}n.d(t,{e:()=>r}),r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(I(e,0,o,n));if(i)for(var a=0,c=t.length;a<c;a++){var l=t[a]*n,u=a<c-1?t[a+1]*n:e.length;s-=Math.abs(I(e,l,u,n))}var f=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,h=r[a+1]*n,p=r[a+2]*n;f+=Math.abs((e[d]-e[p])*(e[h+1]-e[d+1])-(e[d]-e[h])*(e[p+1]-e[d+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},40318:(e,t,n)=>{n.d(t,{Q:()=>d,R:()=>f});var r=n(25530),i=n(69817),o=n(3799),s=n(51596),a=n(23148),c=n(21390),l=n(86955),u=n(66470);const f=.5;function d(e,t){e.include(i.Y6),e.attributes.add(u.r.POSITION,"vec3"),e.attributes.add(u.r.NORMAL,"vec3"),e.attributes.add(u.r.CENTEROFFSETANDDISTANCE,"vec4");const n=e.vertex;(0,o.NB)(n,t),(0,o.yu)(n,t),n.uniforms.add(new s.I("viewport",(e=>e.camera.fullViewport)),new c.m("polygonOffset",(e=>e.shaderPolygonOffset)),new a.U("cameraGroundRelative",(e=>e.camera.aboveGround?1:-1))),t.hasVerticalOffset&&(0,r.V)(n),n.constants.add("smallOffsetAngle","float",.984807753012208),n.code.add(l.H`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),n.code.add(l.H`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${t.terrainDepthTest?l.H.float(0):l.H`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),t.draped&&!t.hasVerticalOffset||(0,o.S7)(n),t.draped||(n.uniforms.add(new a.U("perDistancePixelRatio",(e=>Math.tan(e.camera.fovY/2)/(e.camera.fullViewport[2]/2)))),n.code.add(l.H`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${l.H.float(f)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `)),t.screenCenterOffsetUnitsEnabled&&(0,o.Nz)(n),t.hasScreenSizePerspective&&(0,i.OH)(n),n.code.add(l.H`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      vec3 centerOffset = centerOffsetAndDistance.xyz;
      float pointGroundDistance = centerOffsetAndDistance.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${t.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${t.hasScreenSizePerspective&&(t.hasVerticalOffset||t.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${t.hasVerticalOffset?t.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${t.hasVerticalOffset?l.H`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${t.screenCenterOffsetUnitsEnabled?"":l.H`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${t.screenCenterOffsetUnitsEnabled?t.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)}},41595:(e,t,n)=>{n.d(t,{KF:()=>v,MF:()=>p,VG:()=>f,g7:()=>h,gf:()=>d,hI:()=>l,o8:()=>c,q6:()=>u});var r=n(76460),i=n(50346),o=n(32535),s=n(98976);const a=()=>r.A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function c(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function l(e){const t=e?.expression;if("string"==typeof t){const e=x(t);if(null!=e)return{cachedResult:e}}return null}async function u(e,t,n,r){const o=e?.expression;if("string"!=typeof o)return null;const a=x(o);if(null!=a)return{cachedResult:a};const c=await(0,s.lw)();(0,i.throwIfAborted)(n);const l=c.arcadeUtils,u=l.createSyntaxTree(o);return l.dependsOnView(u)?(null!=r&&r.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:l.createFunction(u),context:l.createExecContext(null,{sr:t}),modules:c}}}function f(e,t,n){return e.arcadeUtils.createFeature(t.attributes,t.geometry,n)}function d(e,t){if(null!=e&&!g(e)){if(!t||!e.arcade)return void a().errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,o.wZ)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function h(e){if(null!=e){if(g(e))return e.cachedResult;const t=e.arcade;let n=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof n&&(e.cachedResult=0,n=0),n}return 0}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?.featureExpressionInfo;const r=n?.expression;return t||"0"===r||(n=null),n??null}const v={cachedResult:0};function g(e){return null!=e.cachedResult}function x(e){return"0"===e?0:null}},49296:(e,t,n)=>{n.d(t,{F:()=>o});var r=n(59097),i=n(41595);class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,r.Ao)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(e){this._meterUnitOffset=e,this._renderUnitOffset=0}set offsetElevationInfoUnits(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(e){this._renderUnitOffset+=e}geometryZWithOffset(e,t){const n=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?n:e+n}calculateOffsetRenderUnits(e){let t=this._meterUnitOffset;const n=this.featureExpressionInfoContext;return null!=n&&(t+=(0,i.g7)(n)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}setFromElevationInfo(e){this.mode=e.mode,this.unit=(0,r.Tg)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=e.offset??0}updateFeatureExpressionInfoContext(e,t,n){if(null==e)return void(this._featureExpressionInfoContext=null);const r=e?.arcade;r&&null!=t&&null!=n?(this._featureExpressionInfoContext=(0,i.o8)(e),(0,i.gf)(this._featureExpressionInfoContext,(0,i.VG)(r.modules,t,n))):this._featureExpressionInfoContext=e}static fromElevationInfo(e){const t=new o;return null!=e&&t.setFromElevationInfo(e),t}}},55877:(e,t,n)=>{var r;n.d(t,{u:()=>r}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(r||(r={}))},57662:(e,t,n)=>{var r,i,o;n.d(t,{O7:()=>i,Om:()=>r,sv:()=>o}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(r||(r={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(i||(i={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(o||(o={}))},58229:(e,t,n)=>{n.d(t,{I:()=>s,_:()=>a});var r=n(50076),i=(n(81806),n(75941)),o=n(6485);class s{constructor(e){this.context=e,this._debug=!1,this._precompiling=this._debug?0:1,this._cache=new i.O}get precompiling(){return this._precompiling}set precompiling(e){this._precompiling=e,0===e&&this.context.rctx.gl.flush()}get viewingMode(){return this.context.viewingMode}destroy(){this._cache.forAll((e=>e.destroy())),this._cache.clear()}precompile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;++this.precompiling,this.get(e,t),--this.precompiling}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;const n=t.key.code;let i=this._cache.get(e,n);if(null==i){if(0===this._precompiling){let n=`Uncached shader compile in ${(new Error).stack}\n  for configuration\n${t.decode()}`;const i=this._cache.getInner(e);throw i?.size&&(n+="\n\n  cached configurations:\n",n+=Array.from(i.values()).map((e=>t.decode(e.key))).sort().join("\n\n")),console.log(n),new r.default(n)}i=new e(this.context,t),this._cache.set(e,n,i)}return i}async reloadAll(){const e=new Array;this._cache.forEach((t=>e.push(async function(e){let t=!0;e.forEach((async e=>{await e.reload(t),t=!1}))}(t)))),await Promise.all(e)}}const a=new o.K},60216:(e,t,n)=>{n.d(t,{C:()=>a,E:()=>s});var r=n(9392),i=n(9624),o=n(14487);function s(e,t,n){return!!(0,o.F)(e,t,c,n.spatialReference)&&(n.x=c[0],n.y=c[1],n.z=c[2],!0)}async function a(e,t,n,r){return await(0,i.initializeProjection)(t,n.spatialReference,null,r),s(e,t,n)}const c=(0,r.vt)()},62374:(e,t,n)=>{n.d(t,{y:()=>l});var r=n(98720),i=n(98521),o=n(51596),s=n(23148),a=n(86955),c=n(4653);function l(e){e.vertex.uniforms.add(new s.U("renderTransparentlyOccludedHUD",(e=>e.hudRenderStyle===i.D.Occluded?1:e.hudRenderStyle===i.D.NotOccluded?0:.75)),new o.I("viewport",(e=>e.camera.fullViewport)),new c.x("hudVisibilityTexture",(e=>e.hudVisibility?.getTexture()))),e.vertex.include(r.K),e.vertex.code.add(a.H`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}},63928:(e,t,n)=>{n.d(t,{W:()=>o});var r=n(45463),i=n(48168);class o extends r.im{intersect(e,t,n,r,o,s){return(0,i.Uy)(e,n,r,o,void 0,s)}}},67425:(e,t,n)=>{n.d(t,{I2:()=>g,Kf:()=>m,Uk:()=>b,ai:()=>_,au:()=>h,fe:()=>y,nG:()=>v,nu:()=>x,sE:()=>p,uw:()=>r});var r,i,o=n(34761),s=n(13191),a=n(9392),c=n(5809),l=n(45308),u=n(81284),f=n(80935),d=n(66470);function h(e,t,n,r,i,o,s,a,c,u,f){const d=O[f.mode];let h,p,v=0;if((0,l.projectBuffer)(e,t,n,r,c.spatialReference,i,a))return d?.requiresAlignment(f)?(v=d.applyElevationAlignmentBuffer(r,i,o,s,a,c,u,f),h=o,p=s):(h=r,p=i),(0,l.projectBuffer)(h,c.spatialReference,p,o,u.spatialReference,s,a)?v:void 0}function p(e,t,n,r,i){const o=((0,u.v)(e)?e.z:(0,f.cN)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,f.R1)(t,e,"ground")??0;return i.verticalDistanceToGround=0,i.sampledElevation=n,void(i.z=n)}case"relative-to-ground":{const s=(0,f.R1)(t,e,"ground")??0,a=n.geometryZWithOffset(o,r);return i.verticalDistanceToGround=a,i.sampledElevation=s,void(i.z=a+s)}case"relative-to-scene":{const s=(0,f.R1)(t,e,"scene")??0,a=n.geometryZWithOffset(o,r);return i.verticalDistanceToGround=a,i.sampledElevation=s,void(i.z=a+s)}case"absolute-height":{const s=n.geometryZWithOffset(o,r),a=(0,f.R1)(t,e,"ground")??0;return i.verticalDistanceToGround=s-a,i.sampledElevation=a,void(i.z=s)}default:return void(i.z=0)}}function v(e,t,n,r){return p(e,t,n,r,A),A.z}function g(e,t,n){return"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?null==t||null==n?e.definedChanged:r.UPDATE:e.onTheGroundChanged}function x(e){return"relative-to-ground"===e||"relative-to-scene"===e}function m(e){return"absolute-height"!==e}function y(e,t,n,r,i){p(t,n,i,r,A),_(e,A.verticalDistanceToGround);const s=A.sampledElevation,a=(0,o.C)(w,e.transformation);return E[0]=t.x,E[1]=t.y,E[2]=A.z,(0,c.l)(t.spatialReference,E,a,r.spatialReference)?e.transformation=a:console.warn("Could not locate symbol object properly, it might be misplaced"),s}function _(e,t){for(let n=0;n<e.geometries.length;++n){const r=e.geometries[n].getMutableAttribute(d.r.CENTEROFFSETANDDISTANCE);r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],d.r.CENTEROFFSETANDDISTANCE))}}class b{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}(i=r||(r={}))[i.NONE=0]="NONE",i[i.UPDATE=1]="UPDATE",i[i.RECREATE=2]="RECREATE";const O={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o,s,a){const c=a.calculateOffsetRenderUnits(s),l=a.featureExpressionInfoContext;t*=3,r*=3;for(let u=0;u<i;++u){const i=e[t],o=e[t+1],s=e[t+2];n[r]=i,n[r+1]=o,n[r+2]=null==l?s+c:c,t+=3,r+=3}return 0},requiresAlignment:function(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o){let s=0;const a=o.spatialReference;t*=3,r*=3;for(let c=0;c<i;++c){const i=e[t],c=e[t+1],l=e[t+2],u=o.getElevation(i,c,l,a,"ground")??0;s+=u,n[r]=i,n[r+1]=c,n[r+2]=u,t+=3,r+=3}return s/i},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o,s,a){let c=0;const l=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext,f=o.spatialReference;t*=3,r*=3;for(let d=0;d<i;++d){const i=e[t],s=e[t+1],a=e[t+2],d=o.getElevation(i,s,a,f,"ground")??0;c+=d,n[r]=i,n[r+1]=s,n[r+2]=null==u?a+d+l:d+l,t+=3,r+=3}return c/i},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,r,i,o,s,a){let c=0;const l=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext,f=o.spatialReference;t*=3,r*=3;for(let d=0;d<i;++d){const i=e[t],s=e[t+1],a=e[t+2],d=o.getElevation(i,s,a,f,"scene")??0;c+=d,n[r]=i,n[r+1]=s,n[r+2]=null==u?a+d+l:d+l,t+=3,r+=3}return c/i},requiresAlignment:()=>!0}},w=(0,s.vt)(),A=new b,E=(0,a.vt)()},67737:(e,t,n)=>{n.d(t,{G:()=>r,Q:()=>i});const r={stableRendering:!1},i={rootOrigin:null}},69817:(e,t,n)=>{n.d(t,{OH:()=>l,Y6:()=>a,pM:()=>c});var r=n(20664),i=n(9392),o=n(5517),s=n(86955);function a(e){e.vertex.code.add(s.H`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`),e.vertex.code.add(s.H`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`),e.vertex.code.add(s.H`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add(s.H`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`),e.vertex.code.add(s.H`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add(s.H`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)}function c(e){e.uniforms.add(new o.t("screenSizePerspective",(e=>u(e.screenSizePerspective))))}function l(e){e.uniforms.add(new o.t("screenSizePerspectiveAlignment",(e=>u(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function u(e){return(0,r.i)(f,e.parameters.divisor,e.parameters.offset,e.minScaleFactor)}const f=(0,i.vt)()},74e3:(e,t,n)=>{n.d(t,{CI:()=>a,aI:()=>u,fk:()=>c});n(81806);var r=n(15941),i=n(80963);function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1}return!0}function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}function a(e,t){return e===t||null!=e&&null!=t&&(0,i.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function c(e,t,n){return e===t||null!=e&&null!=t&&(0,i.aI)(e.spatialReference,t.spatialReference)&&(0,r.Sp)(e.x,t.x,n)&&(0,r.Sp)(e.y,t.y,n)&&(0,r.Sp)(e.z??0,t.z??0,n)&&(0,r.Sp)(e.m??0,t.m??0,n)}function l(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return a(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&s(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&s(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&o(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function u(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!l(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}(e.attributes,t.attributes)}},74487:(e,t,n)=>{n.d(t,{d:()=>_});var r=n(15941),i=n(31633),o=n(34761),s=n(20664),a=n(34111),c=n(98510),l=n(64232),u=n(60216),f=n(14487),d=n(2413),h=n(5568),p=n(88954),v=n(13927),g=n(96190),x=n(75762),m=n(81284),y=n(64465);class _{constructor(e,t,n,r){this.viewingMode=e,this.spatialReference=t,this.unitInMeters=n,this._coordinateSystem=r,this._tmpCoordinateSystem=(0,p.vt)(r),this.referenceEllipsoid=(0,a.tO)(t),this.sphericalPCPF=(0,c.lO)(t)}set extent(e){e&&(0,p.b)(this._coordinateSystem,e,this._coordinateSystem)}get extent(){return(0,p.Z7)(this._coordinateSystem,(0,d.vt)())}getAltitude(e){return(0,p.US)(this._coordinateSystem,e)}setAltitude(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return(0,p.E$)(this._coordinateSystem,n,t,e)}setAltitudeOfTransformation(e,t){(0,p.Jq)(this._coordinateSystem,t,e,t)}worldUpAtPosition(e,t){return(0,p.jI)(this._coordinateSystem,e,t)}worldBasisAtPosition(e,t,n){return(0,p.vf)(this._coordinateSystem,e,t,n)}basisMatrixAtPosition(e,t){const n=this.worldBasisAtPosition(e,h._.X,x.rq.get()),r=this.worldBasisAtPosition(e,h._.Y,x.rq.get()),i=this.worldBasisAtPosition(e,h._.Z,x.rq.get());return(0,o.hZ)(t,n[0],n[1],n[2],0,r[0],r[1],r[2],0,i[0],i[1],i[2],0,0,0,0,1),t}headingAtPosition(e,t){const n=this.worldUpAtPosition(e,x.rq.get()),i=this.worldBasisAtPosition(e,h._.Y,x.rq.get()),o=(0,g.EJ)(t,i,n);return(0,r.KJ)(o)}intersectManifoldClosestSilhouette(e,t,n){return(0,p.xW)(this._coordinateSystem,t,this._tmpCoordinateSystem),(0,p.lt)(this._tmpCoordinateSystem,e,n),n}intersectManifold(e,t,n){(0,p.xW)(this._coordinateSystem,t,this._tmpCoordinateSystem);const r=x.rq.get();return(0,p.Ui)(this._tmpCoordinateSystem,e,r)?(0,s.c)(n,r):null}intersectInfiniteManifold(e,t,n){if(this.viewingMode===y.RT.Global)return this.intersectManifold(e,t,n);(0,p.xW)(this._coordinateSystem,t,this._tmpCoordinateSystem);const r=this._tmpCoordinateSystem.value,i=x.rq.get();return(0,v.Ui)(r.plane,e,i)?(0,s.c)(n,i):null}toRenderCoords(e,t,n){return(0,m.v)(e)?(0,l.g)(e,t,this.spatialReference):(0,f.F)(e,t,n,this.spatialReference)}fromRenderCoords(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,m.v)(t)?(null!=n&&(t.spatialReference=n),(0,u.E)(e,this.spatialReference,t)?t:null):(0,f.F)(e,this.spatialReference,t,n)?t:null}static create(e,t){switch(e){case y.RT.Local:return new _(y.RT.Local,t,(0,i.GA)(t),(0,p.oJ)());case y.RT.Global:return new _(y.RT.Global,t,1,(0,p.Sj)(t))}}static renderUnitScaleFactor(e,t){return(0,i.KX)(e)/(0,i.KX)(t)}}},75507:(e,t,n)=>{n.d(t,{f:()=>o});var r=n(9392);class i{constructor(e,t){this.vec3=e,this.id=t}}function o(e,t,n,o){return new i((0,r.fA)(e,t,n),o)}},76718:(e,t,n)=>{n.d(t,{g:()=>l});var r=n(18690),i=(n(81806),n(76460)),o=n(78393),s=n(61678),a=n(93345);const c=()=>i.A.getLogger("esri.views.webgl.BufferObject");class l{static createIndex(e,t,n){return new l(e,a.NZ.ELEMENT_ARRAY_BUFFER,t,n)}static createVertex(e,t,n){return new l(e,a.NZ.ARRAY_BUFFER,t,n)}static createUniform(e,t,n){return new l(e,a.NZ.UNIFORM_BUFFER,t,n)}static createPixelPack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_READ,n=arguments.length>2?arguments[2]:void 0;const r=new l(e,a.NZ.PIXEL_PACK_BUFFER,t);return n&&r.setSize(n),r}static createPixelUnpack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_DRAW,n=arguments.length>2?arguments[2]:void 0;return new l(e,a.NZ.PIXEL_UNPACK_BUFFER,t,n)}static createTransformFeedback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STATIC_DRAW,n=arguments.length>2?arguments[2]:void 0;const r=new l(e,a.NZ.TRANSFORM_FEEDBACK_BUFFER,t);return r.setSize(n),r}constructor(e,t,n,r){this._context=e,this.bufferType=t,this.usage=n,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(a.vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,s.Y2)(this._context.gl),r&&this.setData(r)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===a.pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===a.pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===a.NZ.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(a.vt.BufferObject,this),this._context=null):this._glName&&c().warn("Leaked WebGL buffer object")}setSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case a.pe.UNSIGNED_SHORT:e*=2;break;case a.pe.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&((0,o.mg)(e)?this._indexType=a.pe.UNSIGNED_BYTE:(0,o.jq)(e)?(t/=2,this._indexType=a.pe.UNSIGNED_SHORT):(0,o.XJ)(e)&&(t/=4,this._indexType=a.pe.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=e;const n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const r=this._context.gl;null!=t?r.bufferData(this.bufferType,t,this.usage):r.bufferData(this.bufferType,e,this.usage),(0,s.Y2)(r),this._isVAOAware&&this._context.bindVAO(n)}setSubData(e,t,n,r){if(!e)return;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:o}=this._context;o.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,n,r-n),(0,s.Y2)(o),this._isVAOAware&&this._context.bindVAO(i)}getSubData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n<0||i<0)return;const o=function(e){return(0,r.Xj)(e)}(e)?e.BYTES_PER_ELEMENT:1;if(o*((n??0)+(i??0))>e.byteLength)return;t+o*(i??0)>this.usedMemory&&c().warn("Potential problem getting subdata: requested data exceeds buffer size!");const s=this._context.gl;this.bufferType===a.NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,a.NZ.TRANSFORM_FEEDBACK_BUFFER),s.getBufferSubData(a.NZ.TRANSFORM_FEEDBACK_BUFFER,t,e,n,i),this._context.unbindBuffer(a.NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,a.NZ.COPY_READ_BUFFER),s.getBufferSubData(a.NZ.COPY_READ_BUFFER,t,e,n,i),this._context.unbindBuffer(a.NZ.COPY_READ_BUFFER))}async getSubDataAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;await this._context.clientWaitAsync(),this.getSubData(e,t,n,r)}}},77176:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(15941),i=n(38496);function o(e,t,n){const o=Array.isArray(e),u=o?e.length/t:e.byteLength/(4*t),f=o?e:new Uint32Array(e,0,u*t),d=n?.minReduction??0,h=n?.originalIndices||null,p=h?h.length:0,v=n?.componentOffsets||null;let g=0;if(v)for(let r=0;r<v.length-1;r++){const e=v[r+1]-v[r];e>g&&(g=e)}else g=u;const x=Math.floor(1.1*g)+1;(null==l||l.length<2*x)&&(l=new Uint32Array((0,r.cU)(2*x)));for(let r=0;r<2*x;r++)l[r]=0;let m=0;const y=!!v&&!!h,_=y?p:u;let b=(0,i.my)(u);const O=new Uint32Array(p),w=1.96;let A=0!==d?Math.ceil(4*w*w/(d*d)*d*(1-d)):_,E=1,S=v?v[1]:_;for(let r=0;r<_;r++){if(r===A){const e=1-m/r;if(e+w*Math.sqrt(e*(1-e)/r)<d)return null;A*=2}if(r===S){for(let e=0;e<2*x;e++)l[e]=0;if(h)for(let e=v[E-1];e<v[E];e++)O[e]=b[h[e]];S=v[++E]}const e=y?h[r]:r,n=e*t,i=c(f,n,t);let o=i%x,a=m;for(;0!==l[2*o+1];){if(l[2*o]===i){const e=l[2*o+1]-1;if(s(f,n,e*t,t)){a=b[e];break}}o++,o>=x&&(o-=x)}a===m&&(l[2*o]=i,l[2*o+1]=e+1,m++),b[e]=a}if(0!==d&&1-m/u<d)return null;if(y){for(let e=v[E-1];e<O.length;e++)O[e]=b[h[e]];b=(0,i.Dg)(O)}const R=o?new Array(m):new Uint32Array(m*t);m=0;for(let r=0;r<_;r++)b[r]===m&&(a(f,(y?h[r]:r)*t,R,m*t,t),m++);if(h&&!y){const e=new Uint32Array(p);for(let t=0;t<e.length;t++)e[t]=b[h[t]];b=(0,i.Dg)(e)}return{buffer:Array.isArray(R)?R:R.buffer,indices:b,uniqueCount:m}}function s(e,t,n,r){for(let i=0;i<r;i++)if(e[t+i]!==e[n+i])return!1;return!0}function a(e,t,n,r,i){for(let o=0;o<i;o++)n[r+o]=e[t+o]}function c(e,t,n){let r=0;for(let i=0;i<n;i++)r=e[t+i]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let l=null},80517:(e,t,n)=>{n.d(t,{C:()=>h,a:()=>v,b:()=>p});var r=n(73398),i=n(65058),o=n(81449),s=n(28450),a=n(21390),c=n(86955),l=n(70367),u=n(84093),f=n(31432),d=n(2687);class h extends f.Y{constructor(){super(...arguments),this.opacity=1}}function p(e){const t=new d.N5;t.include(r.c),t.fragment.uniforms.add(new l.N("tex",(e=>e.texture))),e.hasOpacityFactor&&t.fragment.uniforms.add(new a.m("opacity",(e=>e.opacity)));const n=e.blitMode===u.d.Depth;return n&&(t.fragment.uniforms.add(new s.E("nearFar",(e=>e.camera.nearFar))),t.fragment.include(i.E),t.fragment.include(o.W)),t.fragment.main.add(c.H`
    ${n?c.H`
          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);
          fragColor = float2rgba(normalizedLinearDepth);`:c.H`
          fragColor = texture(tex, uv) ${e.hasOpacityFactor?"* opacity":""};`}`),t}const v=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:h,build:p},Symbol.toStringTag,{value:"Module"}))},80935:(e,t,n)=>{n.d(t,{R1:()=>s,aY:()=>i,cN:()=>o});var r=n(81284);class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.array=e,this.spatialReference=t,this.offset=n}}function o(e){return"array"in e}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if((0,r.v)(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,n);if(o(t)){let r=t.offset;return e.getElevation(t.array[r++],t.array[r++],t.array[r]||0,t.spatialReference??e.spatialReference,n)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,n)}},84093:(e,t,n)=>{n.d(t,{N:()=>a,d:()=>r});var r,i,o=n(35143),s=n(6485);(i=r||(r={}))[i.None=0]="None",i[i.Alpha=1]="Alpha",i[i.PremultipliedAlpha=2]="PremultipliedAlpha",i[i.Depth=3]="Depth",i[i.COUNT=4]="COUNT";class a extends s.K{constructor(){super(...arguments),this.blitMode=r.None,this.hasOpacityFactor=!1}}(0,o._)([(0,s.W)({count:r.COUNT})],a.prototype,"blitMode",void 0),(0,o._)([(0,s.W)()],a.prototype,"hasOpacityFactor",void 0)},86401:(e,t,n)=>{n.d(t,{Ci:()=>o,Dq:()=>c,dB:()=>a,zK:()=>s});var r=n(48549),i=n(66470);const o=(0,r.BP)().vec3f(i.r.POSITION),s=(0,r.BP)().vec3f(i.r.POSITION).vec2f(i.r.UV0),a=(0,r.BP)().vec3f(i.r.POSITION).vec4u8(i.r.COLOR),c=(0,r.BP)().vec3f(i.r.POSITION).vec2f(i.r.UV0).vec4u8(i.r.OBJECTANDLAYERIDCOLOR)},88954:(e,t,n)=>{n.d(t,{E$:()=>A,Gs:()=>T,Jq:()=>E,PX:()=>P,Sj:()=>g,U9:()=>C,US:()=>w,Ui:()=>b,Z7:()=>p,b:()=>h,jI:()=>y,lt:()=>O,oJ:()=>m,vf:()=>_,vt:()=>d,xW:()=>S});var r=n(34761),i=n(20664),o=n(9392),s=n(34111),a=n(13312),c=n(98510),l=n(5568),u=n(79650),f=n(78315);function d(e){const{value:t,operations:n}=e;return{operations:n,value:n.create(t)}}function h(e,t,n){return e.operations.setExtent(e.value,t,n.value),n}function p(e,t){return e.operations.getExtent(e.value,t),t}function v(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return{operations:e,value:e.create()}}(e);return n.operations=e,e.copy(t,n.value),n}function g(e){return v(f.s,(0,f.f)(0,0,0,(0,s.tO)(e).radius))}const x=2**50;function m(){return v(u.b,(0,u.f)([0,0,0],[x,0,0],[0,x,0]))}function y(e,t,n){return e.operations.axisAt(e.value,t,l._.Z,n)}function _(e,t,n,r){return e.operations.axisAt(e.value,t,n,r)}function b(e,t,n){return e.operations.intersectRay(e.value,t,n)}function O(e,t,n){return e.operations.intersectRayClosestSilhouette(e.value,t,n)}function w(e,t){return e.operations.altitudeAt(e.value,t)}function A(e,t,n,r){return e.operations.setAltitudeAt(e.value,t,n,r)}function E(e,t,n,o){return t!==o&&(0,r.C)(o,t),(0,i.i)(R,o[12],o[13],o[14]),A(e,R,n,R),o[12]=R[0],o[13]=R[1],o[14]=R[2],o}function S(e,t,n){return e.operations.elevate(e.value,t,n.value)}const R=(0,o.vt)();function P(e,t,n,r,o){return o[0]=(0,i.f)(e,t),o[1]=(0,i.f)(e,n),o[2]=(0,i.f)(e,r),o}function C(e,t,n,r,o){(0,i.c)(n,e),(0,i.c)(I,t),(0,i.n)(I,I),(0,i.e)(r,I,n),(0,i.e)(o,r,n)}function T(e,t){return e?(0,c.lO)(t):t.isGeographic?a.default.PlateCarree:t}const I=(0,o.vt)()},95756:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(69728),i=n(87003);class o extends i.n{constructor(e,t){super(e,"vec2",r.c.Pass,((n,r,i)=>n.setUniform2fv(e,t(r,i))))}}},96820:(e,t,n)=>{n.d(t,{Cq:()=>u,Ee:()=>h,J1:()=>m,LF:()=>_,Me:()=>A,Mm:()=>p,Sz:()=>O,W4:()=>v,e_:()=>g,nD:()=>d,t_:()=>y,tr:()=>x,v7:()=>P,zJ:()=>f,zq:()=>b});var r=n(55877),i=n(73582),o=n(15941),s=n(24648),a=n(88685),c=n(31633),l=n(50265);function u(e,t,n){return e.units[t][n]}function f(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return`${(0,l.ZV)(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:t>0?"never":"exceptZero"})} ${u(e,n,i)}`}function d(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return`${(0,l.ZV)(t,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${u(e,n,i)}`}function h(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.x0)(t,n);return f(e,(0,c.oU)(t,n,o),o,r,i)}function p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.x0)(t,n);return d(e,(0,c.oU)(t,n,o),o,r,i)}function v(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.x$)(t,n);return f(e,(0,c.oU)(t,n,o),o,r,i)}function g(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.x$)(t,n);return d(e,(0,c.oU)(t,n,o),o,r,i)}function x(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.OU)(t,n);return f(e,(0,c.oU)(t,n,o),o,r,i)}function m(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.OU)(t,n);return d(e,(0,c.oU)(t,n,o),o,r,i)}function y(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.y7)(t,n);return f(e,(0,c.oU)(t,n,o),o,r,i)}function _(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.y7)(t,n);return d(e,(0,c.oU)(t,n,o),o,r,i)}function b(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.wv)(t,n);return f(e,(0,c.oU)(t,n,o),o,r,i)}function O(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const o=(0,c.TL)(t,n);return f(e,(0,c.oU)(t,n,o),o,r,i)}const w=(e,t)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:t,minimumFractionDigits:t,signDisplay:e>0?"never":"exceptZero"});function A(e,t,n,r,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.ie,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],f=a.normalize((0,s.g2)((0,c.oU)(e,t,"degrees"),n,r),0,u);const d=w(f,o??2);return f=S(f,d),(0,l.ZV)(f,d)}const E=new Map;function S(e,t){const n=JSON.stringify(t);let r=E.get(n);return r||(r=new Intl.NumberFormat("en-US",t),E.set(n,r)),/^[-+]?360\.?0*\xb0?$/.test(r.format(e))?0:e}const R=["B","kB","MB","GB","TB"];function P(e,t){let n=0===(t=Math.round(t))?0:Math.floor(Math.log(t)/Math.log(r.u.KILOBYTES));n=(0,o.qE)(n,0,R.length-1);const i=(0,l.ZV)(t/r.u.KILOBYTES**n,{maximumFractionDigits:2});return(0,a.HC)(e.units.bytes[R[n]],{fileSize:i})}},97255:(e,t,n)=>{n.d(t,{$B:()=>i,Qf:()=>l,Qh:()=>a,RS:()=>o,ez:()=>d,i5:()=>h,lM:()=>s,qK:()=>f,rq:()=>u});var r=n(78393);function i(e){return 32+e.length}const o=16;function s(e){if(!e)return 0;let t=f;for(const n in e)e.hasOwnProperty(n)&&(t+=c(e[n],!1));return t}function a(e){if(!e)return 0;if("number"==typeof e[0])return l(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return u(e,8);let n=d;for(let r=0;r<t;r++)n+=c(e[r]);return n}(e);let t=f;for(const n in e)e.hasOwnProperty(n)&&(t+=c(e[n]));return t}function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?a(e):f;case"string":return i(e);case"number":return o;case"boolean":return 4;default:return 8}}function l(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e+(t?(0,r.iu)(t)?t.byteLength+h:Array.isArray(t)?u(t,o):0:0)),0)}function u(e,t){return d+e.length*t}const f=32,d=16,h=145},97583:(e,t,n)=>{n.d(t,{g:()=>x});n(81806);var r=n(90632),i=n(20664),o=n(9392),s=n(55855),a=n(45308),c=n(50468),l=n(87634),u=n(17345),f=n(75507),d=n(37046),h=n(67737),p=n(66470),v=n(8918),g=n(425);class x{constructor(e){this._originSR=e,this._rootOriginId="root/"+(0,r.c)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(e){const t=this._origins.get(this._rootOriginId);if(null==t){const t=h.Q.rootOrigin;if(null!=t)return this._origins.set(this._rootOriginId,(0,f.f)(t[0],t[1],t[2],this._rootOriginId)),this.getOrigin(e);const n=(0,f.f)(e[0]+Math.random()-.5,e[1]+Math.random()-.5,e[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,n),n}const n=this._gridSize,r=Math.round(e[0]/n),o=Math.round(e[1]/n),s=Math.round(e[2]/n),a=`${r}/${o}/${s}`;let c=this._origins.get(a);const l=.5*n;if((0,i.d)(m,e,t.vec3),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),m[0]<l&&m[1]<l&&m[2]<l){if(c){const t=Math.max(...m);if((0,i.d)(m,e,c.vec3),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),Math.max(...m)<t)return c}return t}return c||(c=(0,f.f)(r*n,o*n,s*n,a),this._origins.set(a,c)),c}_drawOriginBox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,s.fA)(1,1,0,1);const n=window.view,r=n._stage,i=t.toString();if(!this._objects.has(i)){this._material=new g.W({width:2,color:t}),r.add(this._material);const e=new v.x(r,{pickable:!1}),n=new d.B({castShadow:!1});r.add(n),e.add(n),this._objects.set(i,n)}const o=this._objects.get(i),f=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],h=f.length,x=new Array(3*h),m=new Array,y=.5*this._gridSize;for(let s=0;s<h;s++)x[3*s]=e[0]+(1&f[s]?y:-y),x[3*s+1]=e[1]+(2&f[s]?y:-y),x[3*s+2]=e[2]+(4&f[s]?y:-y),s>0&&m.push(s-1,s);(0,a.projectBuffer)(x,this._originSR,0,x,n.renderSpatialReference,0,h);const _=new u.V(this._material,[[p.r.POSITION,new c.n(x,m,3,!0)]],null,l.X.Line);r.add(_),o.addGeometry(_)}get test(){}}const m=(0,o.vt)()},98521:(e,t,n)=>{var r;n.d(t,{D:()=>r}),function(e){e[e.Occluded=0]="Occluded",e[e.NotOccluded=1]="NotOccluded",e[e.Both=2]="Both",e[e.COUNT=3]="COUNT"}(r||(r={}))},98720:(e,t,n)=>{n.d(t,{K:()=>o});var r=n(67582),i=n(86955);function o(e){e.uniforms.add(new r.o("alignPixelEnabled",(e=>e.alignPixelEnabled))),e.code.add(i.H`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),e.code.add(i.H`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}},99785:(e,t,n)=>{n.d(t,{Wq:()=>r,lO:()=>d,oR:()=>h});var r,i,o=n(38983),s=n(5568),a=n(5262),c=n(44815),l=n(38496),u=n(10294),f=n(77176);function d(e){const t=h(e.rings,e.hasZ,r.CCW_IS_HOLE,e.spatialReference),n=new Array;let i=0,s=0;for(const r of t.polygons){const e=r.count,a=r.index,u=(0,c.l5)(t.position,3*a,3*e),f=r.holeIndices.map((e=>e-a)),d=(0,l.Dg)((0,o.e)(u,f,3));n.push({position:u,faces:d}),i+=u.length,s+=d.length}const a=function(e,t,n){if(1===e.length)return e[0];const r=(0,c.jh)(t),i=new Array(n);let o=0,s=0,a=0;for(const c of e){for(let e=0;e<c.position.length;e++)r[o++]=c.position[e];for(const e of c.faces)i[s++]=e+a;a=o/3}return{position:r,faces:(0,l.Dg)(i)}}(n,i,s),u=Array.isArray(a.position)?(0,f.b)(a.position,3,{originalIndices:a.faces}):(0,f.b)(a.position.buffer,6,{originalIndices:a.faces});return a.position=(0,c.xm)(new Float64Array(u.buffer)),a.faces=u.indices,a}function h(e,t,n,i){const o=e.length,s=new Array(o),a=new Array(o),l=new Array(o);let u=0;for(let r=0;r<o;++r)u+=e[r].length;let f=0,d=0,h=0;const g=(0,c.jh)(3*u);let x=0;for(let c=o-1;c>=0;c--){const u=e[c],m=n===r.CCW_IS_HOLE&&v(u,t,i);if(m&&1!==o)s[f++]=u;else{let e=u.length;for(let t=0;t<f;++t)e+=s[t].length;const n={index:x,pathLengths:new Array(f+1),count:e,holeIndices:new Array(f)};n.pathLengths[0]=u.length,u.length>0&&(l[h++]={index:x,count:u.length}),x=m?p(u,u.length-1,-1,g,x,u.length,t):p(u,0,1,g,x,u.length,t);for(let r=0;r<f;++r){const e=s[r];n.holeIndices[r]=x,n.pathLengths[r+1]=e.length,e.length>0&&(l[h++]={index:x,count:e.length}),x=p(e,0,1,g,x,e.length,t)}f=0,n.count>0&&(a[d++]=n)}}for(let r=0;r<f;++r){const e=s[r];e.length>0&&(l[h++]={index:x,count:e.length}),x=p(e,0,1,g,x,e.length,t)}return a.length=d,l.length=h,{position:g,polygons:a,outlines:l}}function p(e,t,n,r,i,o,s){i*=3;for(let a=0;a<o;++a){const o=e[t];r[i++]=o[0],r[i++]=o[1],r[i++]=s&&o[2]?o[2]:0,t+=n}return i/3}function v(e,t,n){if(!t)return!(0,a.$3)(e);const r=e.length-1;switch((0,u.S)(e,r,n)){case s._.X:return!(0,a.$3)(e,s._.Y,s._.Z);case s._.Y:return!(0,a.$3)(e,s._.X,s._.Z);case s._.Z:return!(0,a.$3)(e,s._.X,s._.Y)}}(i=r||(r={}))[i.NONE=0]="NONE",i[i.CCW_IS_HOLE=1]="CCW_IS_HOLE"}}]);
//# sourceMappingURL=28016.32badce5.chunk.js.map