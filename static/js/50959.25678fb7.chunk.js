"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[2267,24648,50959,57505,79886],{838:(t,e,r)=>{r.d(e,{I:()=>s});var n=r(86955),i=r(66470);function s(t){t.attributes.add(i.r.POSITION,"vec3"),t.vertex.code.add(n.H`vec3 positionModel() { return position; }`)}},3112:(t,e,r)=>{var n,i;r.d(e,{H6:()=>s,dz:()=>n,oH:()=>i}),function(t){t[t.OBJECT=0]="OBJECT",t[t.HUD=1]="HUD",t[t.TERRAIN=2]="TERRAIN",t[t.OVERLAY=3]="OVERLAY",t[t.I3S=4]="I3S",t[t.PCL=5]="PCL",t[t.LOD=6]="LOD",t[t.VOXEL=7]="VOXEL",t[t.TILES3D=8]="TILES3D"}(n||(n={}));class s{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}!function(t){t[t.MIN=0]="MIN",t[t.MINMAX=1]="MINMAX",t[t.ALL=2]="ALL"}(i||(i={}))},12482:(t,e,r)=>{r.d(e,{$7:()=>E,B:()=>w,Fo:()=>x,M7:()=>A,NN:()=>d,Q5:()=>O,Tq:()=>L,Up:()=>T,XF:()=>R,Ze:()=>_,bK:()=>a,bh:()=>c,id:()=>p,ky:()=>u,qt:()=>F,tW:()=>M,v9:()=>f,w7:()=>l,wF:()=>o,wS:()=>y,wz:()=>m,x:()=>v,xS:()=>b,ze:()=>h});var n=r(31633),i=r(59097);function s(t){return t?F:L}function o(t,e){return e?.mode?e.mode:s(t).mode}function a(t,e){return null!=e?e:s(t)}function l(t,e){return o(null==t||(t.hasZ??!1),e)}function h(t,e){return a(null==t||(t.hasZ??!1),e)}function u(t){const e=g(t);return l(t.geometry,e)}function c(t){const e=g(t),r=l(t.geometry,e),n=null!=e&&"on-the-ground"!==r?A(e):0,i=e?.featureExpressionInfo;return{mode:r,offset:n,featureExpressionInfo:i}}function d(t){return m(c(t))}function f(t){return m(t)||v(t)}function v(t){return"0"===t?.featureExpressionInfo?.expression}function m(t){if(!t)return!1;if("on-the-ground"===t.mode)return!1;const e=t?.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||"0"===e)}function g(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function _(t,e){if(!t?.offset)return 0;const{offset:r,unit:i}=t;if("decimal-degrees"===i)return 0;const s="unknown"!==i&&i?i:"meters",o=(0,n.mq)(e);return o?(0,n.oU)(r,s,o):0}function p(t,e,r){if(!r?.mode)return;const n=t.hasZ?t.z:0,i=_(r,t.spatialReference);switch(r.mode){case"absolute-height":return n-i;case"on-the-ground":return 0;case"relative-to-ground":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"ground")??0)+i);case"relative-to-scene":return n-((e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"scene")??0)+i)}}function y(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return x(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,r,n)}function b(t,e,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return x(t,e[0],e[1],e.length>2?e[2]:0,r,n,i)}function x(t,e,r,n,i,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==s)return;const a=null!=o?o.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:l}=O(e,r,n,i,t,s);return function(t,e,r,n,i,s,o,a){const l=_(o,i);switch(a){case"absolute-height":return t-l;case"relative-to-ground":return t-((s.elevationProvider.getElevation(e,r,n,i,"ground")??0)+l);case"relative-to-scene":return t-((s.elevationProvider.getElevation(e,r,n,i,"scene")??0)+l)}}(l,e,r,n,i,t,o,a)}function O(t,e,r,n,i,s){const o=_(s,n);switch(s.mode){case"absolute-height":return{absoluteZ:r+o,elevation:0};case"on-the-ground":{const r=i.elevationProvider.getElevation(t,e,0,n,"ground")??0;return{absoluteZ:r,elevation:r}}case"relative-to-ground":{const s=i.elevationProvider.getElevation(t,e,r,n,"ground")??0;return{absoluteZ:r+s+o,elevation:s}}case"relative-to-scene":{const s=i.elevationProvider.getElevation(t,e,r,n,"scene")??0;return{absoluteZ:r+s+o,elevation:s}}}}function T(t,e){if(null==e)return!1;const{mode:r}=e;return null!=r&&("scene"===t&&"relative-to-scene"===r||"ground"===t&&"absolute-height"!==r)}function w(t,e,r){return r&&r.mode!==e?`${t} only support ${e} elevation mode`:null}function E(t,e,r){return r?.mode===e?`${t} do not support ${e} elevation mode`:null}function M(t,e){return null!=e?.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression?`${t} do not support featureExpressionInfo`:null}function R(t,e){e&&t.warn(".elevationInfo=",e)}function A(t){return(t?.offset??0)*(0,i.Ao)(t?.unit)}const F={mode:"absolute-height",offset:0},L={mode:"on-the-ground",offset:null}},14487:(t,e,r)=>{r.d(e,{F:()=>s});r(9624);var n=r(13312),i=r(64232);function s(t,e,r,n,s){return!(null==e||null==n||t.length<2)&&(o.x=t[0],o.y=t[1],o.z=t[2],o.spatialReference=e,(0,i.g)(o,r,n,s))}const o=(0,r(18117).T)(0,0,0,n.default.WGS84)},18117:(t,e,r)=>{function n(t,e,r,n){return{x:t,y:e,z:r,hasZ:null!=r,hasM:!1,spatialReference:n,type:"point"}}function i(t,e,r,n,i){t.x=e,t.y=r,t.z=n,t.hasZ=null!=n,t.spatialReference=i}r.d(e,{J:()=>i,T:()=>n})},21812:(t,e,r)=>{r.d(e,{_:()=>n});class n{constructor(t,e,r,n,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=t,this.count=e,this.type=r,this.offset=n,this.stride=i,this.normalized=s,this.divisor=o}}},24648:(t,e,r)=>{r.d(e,{IV:()=>m,LF:()=>i,T9:()=>u,Wq:()=>a,d_:()=>s,g2:()=>d,gT:()=>o,hs:()=>c,iT:()=>v,kM:()=>l,l3:()=>h,n0:()=>g,r7:()=>f});var n=r(31633);function i(t){return{value:t}}function s(t,e){return{type:(0,n.t$)(e),value:t,unit:e}}function o(t,e){return{type:(0,n.t$)(e),value:t,unit:e}}function a(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,n.t$)(e),value:t,unit:e,rotationType:r}}function l(t,e){const r=h(t,e);return"angle"===t.type?a(r,e,t.rotationType):function(t,e){return{type:(0,n.t$)(e),value:t,unit:e}}(r,e)}function h(t,e){return(0,n.oU)(t.value,t.unit,e)}function u(t,e){return null==t?e:null==e||t.value>(0,n.oU)(e.value,e.unit,t.unit)?t:e}function c(t,e){return null==t?null:{...t,value:t.value*e}}function d(t,e,r){if(e===r)return t;switch(r){case"arithmetic":case"geographic":return 90-t}}const f=s(0,"meters"),v=o(0,"square-meters"),m=(a(0,"radians"),a(0,"degrees")),g=a(0,"degrees","geographic")},29808:(t,e,r)=>{r.d(e,{G7:()=>O,TH:()=>m,hz:()=>p});var n=r(34761),i=r(13191),s=r(20664),o=r(9392),a=r(43047),l=r(55855),h=r(95925),u=r(64465),c=r(3112),d=r(35737),f=r(46571),v=r(97974);const m=1e-5;class g{constructor(t){this.options=new c.H6,this._results=new y,this.transform=new v.dg,this.tolerance=m,this.verticalOffset=null,this._ray=(0,h.vt)(),this._rayEnd=(0,o.vt)(),this._rayBeginTransformed=(0,o.vt)(),this._rayEndTransformed=(0,o.vt)(),this.viewingMode=t??u.RT.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,e,r){this.resetWithRay((0,h.Cr)(t,e,this._ray),r)}resetWithRay(t,e){this.camera=e,t!==this._ray&&(0,h.C)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===u.RT.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,s.g)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;this.point=e,this.filterPredicate=n,this.tolerance=r??m;const s=(0,v.ou)(this.verticalOffset);if(t&&t.length>0){const e=i?t=>{i(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const r of t){const t=r.getSpatialQueryAccelerator?.();null!=t?(null!=s?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,e,s):t.forEachAlongRay(this._ray.origin,this._ray.direction,e),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(e)):r.objects.forAll((t=>e(t)))}}this.sortResults()}intersectObject(t){const e=t.geometries;if(!e)return;const r=t.effectiveTransformation,n=(0,v.ou)(this.verticalOffset);for(const o of e){if(!o.visible)continue;const{material:e,id:a}=o;if(!e.visible)continue;this.transform.setAndInvalidateLazyTransforms(r,o.transformation),(0,s.t)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,s.t)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const l=this.transform.transform;null!=n&&(n.objectTransform=this.transform),e.intersect(o,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((e,r,n,s,o,h)=>{if(e>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,e))return;const u=s?this._results.hud:this._results,f=s?s=>{const l=new d.B$(t,a,n,h);s.set(c.dz.HUD,l,e,r,i.zK,o)}:i=>i.set(c.dz.OBJECT,{object:t,geometryId:a,triangleNr:n},e,r,l,o);if((null==u.min.drapedLayerOrder||o>=u.min.drapedLayerOrder)&&(null==u.min.dist||e<u.min.dist)&&f(u.min),this.options.store!==c.oH.MIN&&(null==u.max.drapedLayerOrder||o<u.max.drapedLayerOrder)&&(null==u.max.dist||e>u.max.dist)&&f(u.max),this.options.store===c.oH.ALL)if(s){const t=new x(this._ray);f(t),this._results.hud.all.push(t)}else{const t=new b(this._ray);f(t),this._results.all.push(t)}}}))}}sortResults(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._results.all).sort(((t,e)=>t.dist!==e.dist?(t.dist??0)-(e.dist??0):t.drapedLayerOrder!==e.drapedLayerOrder?_(t.drapedLayerOrder,e.drapedLayerOrder):_(t.drapedLayerGraphicOrder,e.drapedLayerGraphicOrder)))}}function _(t,e){return(e??-Number.MAX_VALUE)-(t??-Number.MAX_VALUE)}function p(t){return new g(t)}class y{constructor(){this.min=new b((0,h.vt)()),this.max=new b((0,h.vt)()),this.hud={min:new x((0,h.vt)()),max:new x((0,h.vt)()),all:new Array},this.ground=new b((0,h.vt)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class b{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,s.h)(T,this.ray.direction,this.dist),(0,s.l)(T)):null}withinDistance(t){return!!(0,f.i3)(this)&&this.distanceInRenderSpace<=t}getIntersectionPoint(t){return!!(0,f.i3)(this)&&((0,s.h)(T,this.ray.direction,this.dist),(0,s.g)(t,this.ray.origin,T),!0)}getTransformedNormal(t){return(0,s.c)(w,this.normal),w[3]=0,(0,a.t)(w,w,this.transformation),(0,s.c)(t,w),(0,s.n)(t,t)}constructor(t){this.intersector=c.dz.OBJECT,this.normal=(0,o.vt)(),this.transformation=(0,i.vt)(),this._ray=(0,h.vt)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=c.dz.OBJECT,(0,h.C)(t,this._ray)}set(t,e,r,a,l,h,u){this.intersector=t,this.dist=r,(0,s.c)(this.normal,a??o.Cb),(0,n.C)(this.transformation,l??i.zK),this.target=e,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=u}copy(t){(0,h.C)(t.ray,this._ray),this.intersector=t.intersector,this.dist=t.dist,this.target=t.target,this.drapedLayerOrder=t.drapedLayerOrder,this.drapedLayerGraphicOrder=t.drapedLayerGraphicOrder,(0,s.c)(this.normal,t.normal),(0,n.C)(this.transformation,t.transformation)}}class x extends b{constructor(){super(...arguments),this.intersector=c.dz.HUD}}function O(t){return new b(t)}const T=(0,o.vt)(),w=(0,l.vt)()},35737:(t,e,r)=>{r.d(e,{B$:()=>s,HE:()=>o,R6:()=>a});var n=r(9392);class i{constructor(t,e,r){this.object=t,this.geometryId=e,this.triangleNr=r}}class s extends i{constructor(t,e,r,i){super(t,e,r),this.center=null!=i?(0,n.o8)(i):null}}class o{constructor(t){this.layerUid=t}}class a extends o{constructor(t,e){super(t),this.graphicUid=e}}},36358:(t,e,r)=>{r.d(e,{EM:()=>_,dO:()=>g,em:()=>m});var n=r(44680),i=r(13191),s=r(9392),o=r(838),a=r(89299),l=r(72468),h=r(5517),u=r(86955),c=r(42759),d=r(72106),f=r(43425),v=r(31432);function m(t,e){t.include(o.I);const r=t.vertex;r.include(a.u,e),t.varyings.add("vPositionWorldCameraRelative","vec3"),t.varyings.add("vPosition_view","vec3"),r.uniforms.add(new h.t("transformWorldFromViewTH",(t=>t.transformWorldFromViewTH)),new h.t("transformWorldFromViewTL",(t=>t.transformWorldFromViewTL)),new d.k("transformViewFromCameraRelativeRS",(t=>t.transformViewFromCameraRelativeRS)),new f.X("transformProjFromView",(t=>t.transformProjFromView)),new c.h("transformWorldFromModelRS",(t=>t.transformWorldFromModelRS)),new l.W("transformWorldFromModelTH",(t=>t.transformWorldFromModelTH)),new l.W("transformWorldFromModelTL",(t=>t.transformWorldFromModelTL))),r.code.add(u.H`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`),r.code.add(u.H`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${e.spherical?u.H`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:u.H`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `),t.fragment.uniforms.add(new h.t("transformWorldFromViewTL",(t=>t.transformWorldFromViewTL))),r.code.add(u.H`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`),t.fragment.code.add(u.H`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)}class g extends v.Y{constructor(){super(...arguments),this.transformWorldFromViewTH=(0,s.vt)(),this.transformWorldFromViewTL=(0,s.vt)(),this.transformViewFromCameraRelativeRS=(0,n.vt)(),this.transformProjFromView=(0,i.vt)()}}class _ extends v.Y{constructor(){super(...arguments),this.transformWorldFromModelRS=(0,n.vt)(),this.transformWorldFromModelTH=(0,s.vt)(),this.transformWorldFromModelTL=(0,s.vt)()}}},36911:(t,e,r)=>{r.d(e,{Z:()=>h});var n=r(76460),i=r(30726),s=r(97255),o=r(93345),a=r(27207);const l=()=>n.A.getLogger("esri.views.webgl.VertexArrayObject");let h=class{constructor(t,e,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._context=t,this._locations=e,this._layout=r,this._buffers=n,this._indexBuffer=i,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce(((t,e)=>t+e.usedMemory),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(this._buffers.size+(this._indexBuffer?1:0))*s.i5}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this._indexBuffer=(0,i.WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&l().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(o.vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:t}=this._context,e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e,this._context.instanceCounter.increment(o.vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:t,_layout:e,_indexBuffer:r}=this;t||l().error("Vertex buffer dictionary is empty!");const n=this._context.gl;this._buffers.forEach(((t,r)=>{const n=e.get(r);n?(0,a.yu)(this._context,this._locations,t,n):l().error("Vertex element descriptor is empty!")})),null!=r&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}}},42759:(t,e,r)=>{r.d(e,{h:()=>s});var n=r(69728),i=r(87003);class s extends i.n{constructor(t,e){super(t,"mat3",n.c.Draw,((r,n,i)=>r.setUniformMatrix3fv(t,e(n,i))))}}},44680:(t,e,r)=>{function n(){return[1,0,0,0,1,0,0,0,1]}function i(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function s(t,e,r,n,i,s,o,a,l){return[t,e,r,n,i,s,o,a,l]}r.d(e,{fA:()=>s,o8:()=>i,vt:()=>n,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:n,createView:function(t,e){return new Float64Array(t,e,9)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},46571:(t,e,r)=>{r.d(e,{$I:()=>h,Q5:()=>l,hH:()=>u,i3:()=>a});var n=r(20664),i=r(9392),s=r(79650),o=r(3112);function a(t){return null!=t?.dist}function l(t){return(e,r,i)=>((0,n.m)(c,e,r,i),!(0,s.e)(t,c))}function h(t){return a(t)&&t.intersector===o.dz.OBJECT&&!!t.target}function u(t){return a(t)&&t.intersector===o.dz.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const c=(0,i.vt)()},54478:(t,e,r)=>{r.d(e,{c:()=>s});var n=r(86955),i=r(66470);function s(t,e){e.hasVertexColors?(t.attributes.add(i.r.COLOR,"vec4"),t.varyings.add("vColor","vec4"),t.vertex.code.add(n.H`void forwardVertexColor() { vColor = color; }`),t.vertex.code.add(n.H`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):t.vertex.code.add(n.H`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)}},55877:(t,e,r)=>{var n;r.d(e,{u:()=>n}),function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"}(n||(n={}))},57662:(t,e,r)=>{var n,i,s;r.d(e,{O7:()=>i,Om:()=>n,sv:()=>s}),function(t){t[t.RasterImage=0]="RasterImage",t[t.Features=1]="Features"}(n||(n={})),function(t){t[t.MapLayer=0]="MapLayer",t[t.ViewLayer=1]="ViewLayer",t[t.Outline=2]="Outline",t[t.SnappingHint=3]="SnappingHint"}(i||(i={})),function(t){t[t.WithRasterImage=0]="WithRasterImage",t[t.WithoutRasterImage=1]="WithoutRasterImage"}(s||(s={}))},59395:(t,e,r)=>{r.d(e,{d:()=>s});var n=r(72412),i=r(86955);function s(t){(0,n.i$)(t),t.vertex.code.add(i.H`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = calculateLinearDepth(nearFar,eye.z);
return proj * eye;
}`),t.vertex.code.add(i.H`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}},64232:(t,e,r)=>{r.d(e,{W:()=>a,g:()=>o});var n=r(9392),i=r(9624),s=r(45308);function o(t,e,r,n){if((0,i.canProjectWithoutEngine)(t.spatialReference,r)){l[0]=t.x,l[1]=t.y;const i=t.z;return l[2]=i??n??0,(0,s.projectBuffer)(l,t.spatialReference,0,e,r,0)}const o=(0,i.tryProjectWithZConversion)(t,r);return!!o&&(e[0]=o?.x,e[1]=o?.y,e[2]=o?.z??n??0,!0)}async function a(t,e,r,n,s){return await(0,i.initializeProjection)(t.spatialReference,r,null,s),o(t,e,r,n)}const l=(0,n.vt)()},67737:(t,e,r)=>{r.d(e,{G:()=>n,Q:()=>i});const n={stableRendering:!1},i={rootOrigin:null}},72412:(t,e,r)=>{r.d(e,{Mu:()=>a,i$:()=>h,oD:()=>u,xJ:()=>l});var n=r(34981),i=r(36358),s=r(28450),o=r(86955);function a(t){t.varyings.add("linearDepth","float")}function l(t){t.vertex.uniforms.add(new s.E("nearFar",(t=>t.camera.nearFar)))}function h(t){t.vertex.code.add(o.H`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}function u(t,e){const{vertex:r}=t;switch(e.output){case n.V.Color:case n.V.ColorEmission:if(e.receiveShadows)return a(t),void r.code.add(o.H`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case n.V.Shadow:case n.V.ShadowHighlight:case n.V.ShadowExcludeHighlight:case n.V.ViewshedShadow:return t.include(i.em,e),a(t),l(t),h(t),void r.code.add(o.H`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`)}r.code.add(o.H`void forwardLinearDepth() {}`)}},75507:(t,e,r)=>{r.d(e,{f:()=>s});var n=r(9392);class i{constructor(t,e){this.vec3=t,this.id=e}}function s(t,e,r,s){return new i((0,n.fA)(t,e,r),s)}},76718:(t,e,r)=>{r.d(e,{g:()=>h});var n=r(18690),i=(r(81806),r(76460)),s=r(78393),o=r(61678),a=r(93345);const l=()=>i.A.getLogger("esri.views.webgl.BufferObject");class h{static createIndex(t,e,r){return new h(t,a.NZ.ELEMENT_ARRAY_BUFFER,e,r)}static createVertex(t,e,r){return new h(t,a.NZ.ARRAY_BUFFER,e,r)}static createUniform(t,e,r){return new h(t,a.NZ.UNIFORM_BUFFER,e,r)}static createPixelPack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_READ,r=arguments.length>2?arguments[2]:void 0;const n=new h(t,a.NZ.PIXEL_PACK_BUFFER,e);return r&&n.setSize(r),n}static createPixelUnpack(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_DRAW,r=arguments.length>2?arguments[2]:void 0;return new h(t,a.NZ.PIXEL_UNPACK_BUFFER,e,r)}static createTransformFeedback(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STATIC_DRAW,r=arguments.length>2?arguments[2]:void 0;const n=new h(t,a.NZ.TRANSFORM_FEEDBACK_BUFFER,e);return n.setSize(r),n}constructor(t,e,r,n){this._context=t,this.bufferType=e,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(a.vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,o.Y2)(this._context.gl),n&&this.setData(n)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===a.pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===a.pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===a.NZ.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(a.vt.BufferObject,this),this._context=null):this._glName&&l().warn("Leaked WebGL buffer object")}setSize(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&null!=e)switch(this._indexType=e,e){case a.pe.UNSIGNED_SHORT:t*=2;break;case a.pe.UNSIGNED_INT:t*=4}this._setBufferData(t)}setData(t){if(!t)return;let e=t.byteLength;this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&((0,s.mg)(t)?this._indexType=a.pe.UNSIGNED_BYTE:(0,s.jq)(t)?(e/=2,this._indexType=a.pe.UNSIGNED_SHORT):(0,s.XJ)(t)&&(e/=4,this._indexType=a.pe.UNSIGNED_INT)),this._setBufferData(e,t)}_setBufferData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=t;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const n=this._context.gl;null!=e?n.bufferData(this.bufferType,e,this.usage):n.bufferData(this.bufferType,t,this.usage),(0,o.Y2)(n),this._isVAOAware&&this._context.bindVAO(r)}setSubData(t,e,r,n){if(!t)return;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:s}=this._context;s.bufferSubData(this.bufferType,e*t.BYTES_PER_ELEMENT,t,r,n-r),(0,o.Y2)(s),this._isVAOAware&&this._context.bindVAO(i)}getSubData(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(r<0||i<0)return;const s=function(t){return(0,n.Xj)(t)}(t)?t.BYTES_PER_ELEMENT:1;if(s*((r??0)+(i??0))>t.byteLength)return;e+s*(i??0)>this.usedMemory&&l().warn("Potential problem getting subdata: requested data exceeds buffer size!");const o=this._context.gl;this.bufferType===a.NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,a.NZ.TRANSFORM_FEEDBACK_BUFFER),o.getBufferSubData(a.NZ.TRANSFORM_FEEDBACK_BUFFER,e,t,r,i),this._context.unbindBuffer(a.NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,a.NZ.COPY_READ_BUFFER),o.getBufferSubData(a.NZ.COPY_READ_BUFFER,e,t,r,i),this._context.unbindBuffer(a.NZ.COPY_READ_BUFFER))}async getSubDataAsync(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;await this._context.clientWaitAsync(),this.getSubData(t,e,r,n)}}},81284:(t,e,r)=>{function n(t){return"point"===t.type}r.d(e,{v:()=>n})},89299:(t,e,r)=>{r.d(e,{u:()=>i});var n=r(86955);function i(t,e){let{code:r}=t;e.doublePrecisionRequiresObfuscation?r.add(n.H`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):r.add(n.H`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}},96820:(t,e,r)=>{r.d(e,{Cq:()=>u,Ee:()=>f,J1:()=>p,LF:()=>b,Me:()=>w,Mm:()=>v,Sz:()=>O,W4:()=>m,e_:()=>g,nD:()=>d,t_:()=>y,tr:()=>_,v7:()=>A,zJ:()=>c,zq:()=>x});var n=r(55877),i=r(73582),s=r(15941),o=r(24648),a=r(88685),l=r(31633),h=r(50265);function u(t,e,r){return t.units[e][r]}function c(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return`${(0,h.ZV)(e,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:e>0?"never":"exceptZero"})} ${u(t,r,i)}`}function d(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return`${(0,h.ZV)(e,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:"exceptZero"})} ${u(t,r,i)}`}function f(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.x0)(e,r);return c(t,(0,l.oU)(e,r,s),s,n,i)}function v(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.x0)(e,r);return d(t,(0,l.oU)(e,r,s),s,n,i)}function m(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.x$)(e,r);return c(t,(0,l.oU)(e,r,s),s,n,i)}function g(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.x$)(e,r);return d(t,(0,l.oU)(e,r,s),s,n,i)}function _(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.OU)(e,r);return c(t,(0,l.oU)(e,r,s),s,n,i)}function p(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.OU)(e,r);return d(t,(0,l.oU)(e,r,s),s,n,i)}function y(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.y7)(e,r);return c(t,(0,l.oU)(e,r,s),s,n,i)}function b(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.y7)(e,r);return d(t,(0,l.oU)(e,r,s),s,n,i)}function x(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.wv)(e,r);return c(t,(0,l.oU)(e,r,s),s,n,i)}function O(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";const s=(0,l.TL)(e,r);return c(t,(0,l.oU)(e,r,s),s,n,i)}const T=(t,e)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:e,minimumFractionDigits:e,signDisplay:t>0?"never":"exceptZero"});function w(t,e,r,n,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.ie,u=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=a.normalize((0,o.g2)((0,l.oU)(t,e,"degrees"),r,n),0,u);const d=T(c,s??2);return c=M(c,d),(0,h.ZV)(c,d)}const E=new Map;function M(t,e){const r=JSON.stringify(e);let n=E.get(r);return n||(n=new Intl.NumberFormat("en-US",e),E.set(r,n)),/^[-+]?360\.?0*\xb0?$/.test(n.format(t))?0:t}const R=["B","kB","MB","GB","TB"];function A(t,e){let r=0===(e=Math.round(e))?0:Math.floor(Math.log(e)/Math.log(n.u.KILOBYTES));r=(0,s.qE)(r,0,R.length-1);const i=(0,h.ZV)(e/n.u.KILOBYTES**r,{maximumFractionDigits:2});return(0,a.HC)(t.units.bytes[R[r]],{fileSize:i})}},97255:(t,e,r)=>{r.d(e,{$B:()=>i,Qf:()=>h,Qh:()=>a,RS:()=>s,ez:()=>d,i5:()=>f,lM:()=>o,qK:()=>c,rq:()=>u});var n=r(78393);function i(t){return 32+t.length}const s=16;function o(t){if(!t)return 0;let e=c;for(const r in t)t.hasOwnProperty(r)&&(e+=l(t[r],!1));return e}function a(t){if(!t)return 0;if("number"==typeof t[0])return h(t);if(Array.isArray(t))return function(t){const e=t.length;if(0===e||"number"==typeof t[0])return u(t,8);let r=d;for(let n=0;n<e;n++)r+=l(t[n]);return r}(t);let e=c;for(const r in t)t.hasOwnProperty(r)&&(e+=l(t[r]));return e}function l(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof t){case"object":return e?a(t):c;case"string":return i(t);case"number":return s;case"boolean":return 4;default:return 8}}function h(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(((t,e)=>t+(e?(0,n.iu)(e)?e.byteLength+f:Array.isArray(e)?u(e,s):0:0)),0)}function u(t,e){return d+t.length*e}const c=32,d=16,f=145},97583:(t,e,r)=>{r.d(e,{g:()=>_});r(81806);var n=r(90632),i=r(20664),s=r(9392),o=r(55855),a=r(45308),l=r(50468),h=r(87634),u=r(17345),c=r(75507),d=r(37046),f=r(67737),v=r(66470),m=r(8918),g=r(425);class _{constructor(t){this._originSR=t,this._rootOriginId="root/"+(0,n.c)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const e=this._origins.get(this._rootOriginId);if(null==e){const e=f.Q.rootOrigin;if(null!=e)return this._origins.set(this._rootOriginId,(0,c.f)(e[0],e[1],e[2],this._rootOriginId)),this.getOrigin(t);const r=(0,c.f)(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const r=this._gridSize,n=Math.round(t[0]/r),s=Math.round(t[1]/r),o=Math.round(t[2]/r),a=`${n}/${s}/${o}`;let l=this._origins.get(a);const h=.5*r;if((0,i.d)(p,t,e.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),p[0]<h&&p[1]<h&&p[2]<h){if(l){const e=Math.max(...p);if((0,i.d)(p,t,l.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),Math.max(...p)<e)return l}return e}return l||(l=(0,c.f)(n*r,s*r,o*r,a),this._origins.set(a,l)),l}_drawOriginBox(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.fA)(1,1,0,1);const r=window.view,n=r._stage,i=e.toString();if(!this._objects.has(i)){this._material=new g.W({width:2,color:e}),n.add(this._material);const t=new m.x(n,{pickable:!1}),r=new d.B({castShadow:!1});n.add(r),t.add(r),this._objects.set(i,r)}const s=this._objects.get(i),c=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],f=c.length,_=new Array(3*f),p=new Array,y=.5*this._gridSize;for(let o=0;o<f;o++)_[3*o]=t[0]+(1&c[o]?y:-y),_[3*o+1]=t[1]+(2&c[o]?y:-y),_[3*o+2]=t[2]+(4&c[o]?y:-y),o>0&&p.push(o-1,o);(0,a.projectBuffer)(_,this._originSR,0,_,r.renderSpatialReference,0,f);const b=new u.V(this._material,[[v.r.POSITION,new l.n(_,p,3,!0)]],null,h.X.Line);n.add(b),s.addGeometry(b)}get test(){}}const p=(0,s.vt)()},97974:(t,e,r)=>{r.d(e,{XG:()=>_,dd:()=>y,dg:()=>d,fo:()=>b,ou:()=>m});var n=r(63919),i=r(44680),s=r(34761),o=r(13191),a=r(20664),l=r(9392),h=r(78315),u=r(64465),c=r(59231);class d{constructor(){this._transform=(0,o.vt)(),this._transformInverse=new f({value:this._transform},s.B8,o.vt),this._transformInverseTranspose=new f(this._transformInverse,s.mg,o.vt),this._transformTranspose=new f({value:this._transform},s.mg,o.vt),this._transformInverseRotation=new f({value:this._transform},n.dR,i.vt)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,s.C)(this._transform,t)}multiplyTransform(t){(0,s.lw)(this._transform,this._transform,t)}set(t){(0,s.C)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,e){this.setTransformMatrix(t),this.multiplyTransform(e),this._invalidateLazyTransforms()}}class f{constructor(t,e,r){this._original=t,this._update=e,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}const v=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.sphere=(0,h.c)(),this.tmpVertex=(0,l.vt)()}applyToVertex(t,e,r){const n=this.objectTransform.transform,i=(0,a.i)(x,t,e,r),s=(0,a.t)(i,i,n),o=this.offset/(0,a.l)(s);(0,a.b)(s,s,s,o);const l=this.objectTransform.inverse;return(0,a.t)(this.tmpVertex,s,l),this.tmpVertex}applyToMinMax(t,e){const r=this.offset/(0,a.l)(t);(0,a.b)(t,t,t,r);const n=this.offset/(0,a.l)(e);(0,a.b)(e,e,e,n)}applyToAabb(t){const e=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*e,t[1]+=t[1]*e,t[2]+=t[2]*e;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t){const e=(0,a.l)((0,h.a)(t)),r=this.offset/e;return(0,a.b)((0,h.a)(this.sphere),(0,h.a)(t),(0,h.a)(t),r),this.sphere[3]=t[3]+t[3]*this.offset/e,this.sphere}};function m(t){return null!=t?(v.offset=t,v):null}const g=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=(0,l.vt)(),this._tmpMbs=(0,h.c)(),this._tmpObb=new c.ab,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=(0,a.l)(t)}applyToVertex(t,e,r){const n=(0,a.i)(x,t,e,r),i=(0,a.i)(O,t,e,r+this.componentLocalOriginLength),s=this._totalOffset/(0,a.l)(i);return(0,a.b)(this._tmpVertex,n,i,s),this._tmpVertex}applyToAabb(t){const e=this.componentLocalOriginLength,r=t[0],n=t[1],i=t[2]+e,s=t[3],o=t[4],a=t[5]+e,l=Math.abs(r),h=Math.abs(n),u=Math.abs(i),c=Math.abs(s),d=Math.abs(o),f=Math.abs(a),v=.5*(1+Math.sign(r*s))*Math.min(l,c),m=.5*(1+Math.sign(n*o))*Math.min(h,d),g=.5*(1+Math.sign(i*a))*Math.min(u,f),_=Math.max(l,c),p=Math.max(h,d),y=Math.max(u,f),b=Math.sqrt(v*v+m*m+g*g),x=Math.sign(l+r),O=Math.sign(h+n),T=Math.sign(u+i),w=Math.sign(c+s),E=Math.sign(d+o),M=Math.sign(f+a),R=this._totalOffset;if(b<R)return t[0]-=(1-x)*R,t[1]-=(1-O)*R,t[2]-=(1-T)*R,t[3]+=w*R,t[4]+=E*R,t[5]+=M*R,t;const A=R/Math.sqrt(_*_+p*p+y*y),F=R/b,L=F-A,B=-L;return t[0]+=r*(x*B+F),t[1]+=n*(O*B+F),t[2]+=i*(T*B+F),t[3]+=s*(w*L+A),t[4]+=o*(E*L+A),t[5]+=a*(M*L+A),t}applyToMbs(t){const e=(0,a.l)((0,h.a)(t)),r=this._totalOffset/e;return(0,a.b)((0,h.a)(this._tmpMbs),(0,h.a)(t),(0,h.a)(t),r),this._tmpMbs[3]=t[3]+t[3]*this._totalOffset/e,this._tmpMbs}applyToObb(t){return(0,c.gm)(t,this._totalOffset,this._totalOffset,u.RT.Global,this._tmpObb),this._tmpObb}};function _(t){return null!=t?(g.offset=t,g):null}const p=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.tmpVertex=(0,l.vt)()}applyToVertex(t,e,r){const n=(0,a.i)(x,t,e,r),i=(0,a.g)(O,n,this.localOrigin),s=this.offset/(0,a.l)(i);return(0,a.b)(this.tmpVertex,n,i,s),this.tmpVertex}applyToAabb(t){const e=T,r=w,n=E;for(let a=0;a<3;++a)e[a]=t[0+a]+this.localOrigin[a],r[a]=t[3+a]+this.localOrigin[a],n[a]=e[a];const i=this.applyToVertex(e[0],e[1],e[2]);for(let a=0;a<3;++a)t[a]=i[a],t[a+3]=i[a];const s=e=>{const r=this.applyToVertex(e[0],e[1],e[2]);for(let n=0;n<3;++n)t[n]=Math.min(t[n],r[n]),t[n+3]=Math.max(t[n+3],r[n])};for(let a=1;a<8;++a){for(let t=0;t<3;++t)n[t]=a&1<<t?r[t]:e[t];s(n)}let o=0;for(let a=0;a<3;++a)e[a]*r[a]<0&&(o|=1<<a);if(0!==o&&7!==o)for(let a=0;a<8;++a)if(!(o&a)){for(let t=0;t<3;++t)n[t]=o&1<<t?0:a&1<<t?e[t]:r[t];s(n)}for(let a=0;a<3;++a)t[a]-=this.localOrigin[a],t[a+3]-=this.localOrigin[a];return t}};function y(t){return null!=t?(p.offset=t,p):null}const b="terrain",x=(0,l.vt)(),O=(0,l.vt)(),T=(0,l.vt)(),w=(0,l.vt)(),E=(0,l.vt)()},98521:(t,e,r)=>{var n;r.d(e,{D:()=>n}),function(t){t[t.Occluded=0]="Occluded",t[t.NotOccluded=1]="NotOccluded",t[t.Both=2]="Both",t[t.COUNT=3]="COUNT"}(n||(n={}))}}]);
//# sourceMappingURL=50959.25678fb7.chunk.js.map