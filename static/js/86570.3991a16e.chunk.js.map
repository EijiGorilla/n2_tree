{"version":3,"file":"static/js/86570.3991a16e.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/quatf64.js","../node_modules/@arcgis/core/versionManagement/utils.js","../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js","../node_modules/@arcgis/core/versionManagement/VersioningState.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction e(){return[0,0,0,1]}function t(e){return[e[0],e[1],e[2],e[3]]}function n(e,t,n,r){return[e,t,n,r]}const r=e(),o=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:r,clone:t,create:e,fromValues:n},Symbol.toStringTag,{value:\"Module\"}));export{r as IDENTITY,t as clone,e as create,n as fromValues,o as q};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../core/Collection.js\";import{makeHandle as r}from\"../core/handleUtils.js\";import t from\"../core/Logger.js\";import{getOrCreateMapValue as o}from\"../core/MapUtils.js\";import n from\"../rest/featureService/FeatureService.js\";import s from\"./VersioningState.js\";import i from\"./VersionManagementService.js\";import{createVersionAdapters as a}from\"./versionAdapters/utils.js\";async function c(r,t){let o;if(\"layers\"in r){const e=a(r.allTables.concat(r.allLayers).filter((e=>\"group\"!==e.type)).toArray());r.utilityNetworks&&r.utilityNetworks.forEach((r=>{const t=a([r]);e.push(...t)})),o=e}else o=new e(r);const c=new Map;for(const n of o){const r=c.get(n.featureServiceUrl);r?r.push(n):c.set(n.featureServiceUrl,new e([n]))}const l=new e;for(const[e,a]of c){const r=new n({url:e});if(await r.load(),!r.versionManagementServiceUrl)continue;const o=new i({url:r.versionManagementServiceUrl});l.push(new s({versionManagementService:o,versionableItems:a,usePersistentReadSessions:t}))}return l}const l=new Map;async function f(e,n=!1){const s=await c(e.map,n);return o(l,e,(()=>(e.addHandles(r((()=>{l.delete(e),s.forEach((e=>e.destroy()))}))),s.forEach((e=>e.load().catch((e=>{t.getLogger(\"esri.versionManagement.VersioningState\").error(\"Failed to load Versioning State\",e)})))),s)))}export{c as createVersioningStates,f as getVersioningStates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nfunction e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function t(e,r,t,n,o,u,c,a,l,f,i,_,b,m,p,s){return[e,r,t,n,o,u,c,a,l,f,i,_,b,m,p,s]}function n(e,r){return new Float64Array(e,r,16)}const o=e(),u=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:r,create:e,createView:n,fromValues:t},Symbol.toStringTag,{value:\"Module\"}));export{o as IDENTITY,r as clone,e as create,n as createView,t as fromValues,u as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Collection.js\";import r from\"../core/Error.js\";import s from\"../core/JSONSupport.js\";import i from\"../core/Loadable.js\";import n from\"../core/Logger.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";let c=class extends(s.JSONSupportMixin(i)){constructor(e){super(e),this.versionManagementService=null,this.featureServiceUrl=null,this.url=null,this.currentVersion=null,this.currentVersionInfo=null,this.versionInfos=[],this.versionableItems=new t,this.usePersistentReadSessions=!1,this.state=\"lock-none\"}initialize(){this.url=this.versionManagementService.url,this.featureServiceUrl=this.url.replace(/\\/VersionManagementServer/i,\"/FeatureServer\"),this.addHandles([this.versionableItems.on(\"before-add\",(e=>{if(e.item.featureServiceUrl.toLowerCase()!==this.featureServiceUrl.toLowerCase())return e.preventDefault(),void n.getLogger(this).error(\"#add()\",\"Cannot add versionAdapter, feature service urls do not match.\")})),this.versionableItems.on(\"before-remove\",(e=>{if(0===this.versionableItems.items.length&&this.currentVersion&&\"name\"in this.currentVersion&&\"none\"!==this.versionManagementService.getLockType(this.currentVersion))return e.preventDefault(),void n.getLogger(this).error(\"#remove()\",\"Cannot remove last versionAdapter.\")}))])}load(e){return this.addResolvingPromise(this._setUpState(e)),Promise.resolve(this)}get defaultVersionIdentifier(){return this.versionManagementService.defaultVersionIdentifier}get isDefault(){return!this.currentVersion||!!this.currentVersion&&\"name\"in this.currentVersion&&this.currentVersion.name===this.defaultVersionIdentifier.name}async getVersionInfos(e=!1){return e&&(this.versionInfos=await this.versionManagementService.getVersionInfos()),this.versionInfos}async alterVersion(e,t){if(this.currentVersion&&\"guid\"in this.currentVersion&&e.guid===this.currentVersion.guid)return!1;const r=await this.versionManagementService.alterVersion(e,t);return r&&await this.getVersionInfos(!0),r}async deleteVersion(e){if(this.currentVersion&&\"guid\"in this.currentVersion&&e.guid===this.currentVersion.guid)return!1;const t=await this.versionManagementService.deleteVersion(e);return t&&await this.getVersionInfos(!0),t}async getVersionInfoExtended(){return this.currentVersion&&\"name\"in this.currentVersion?this.versionManagementService.getVersionInfoExtended(this.currentVersion):this.versionManagementService.getVersionInfoExtended(this.defaultVersionIdentifier)}async startEditing(){if(this._isDefaultOrHistoricVersion())return{success:!1};if(!this.usePersistentReadSessions){const e=await this.versionManagementService.startReadingWithResult(this.currentVersion);if(!e.success)return e;this.state=\"lock-read\"}const e=await this.versionManagementService.startEditingWithResult(this.currentVersion);return e.success&&(this.state=\"lock-write\"),e}async stopEditing(e){if(this._isDefaultOrHistoricVersion())return{success:!1};const t=await this.versionManagementService.stopEditingWithResult(this.currentVersion,e);if(!t.success)return t;if(this.state=\"lock-read\",!this.usePersistentReadSessions){const e=await this.versionManagementService.stopReadingWithResult(this.currentVersion);return e.success&&(this.state=\"lock-none\"),e}return t}async changeVersion(e){let t=null;if(this.usePersistentReadSessions){if(this._isDefaultOrHistoricVersion(e))e&&\"name\"in e?(t=await this.versionManagementService.getVersionInfoExtended(e),this.state=\"public\"===t?.access?\"lock-none\":\"lock-read\"):this.state=\"lock-read\";else if(!await this.versionManagementService.startReading(e))throw new r(\"Failed to acquire read lock for version: \"+e);this._isDefaultOrHistoricVersion(this.currentVersion)||await this.versionManagementService.stopReading(this.currentVersion)}const s=await this.versionManagementService.changeVersionWithResult(this.versionableItems,this.currentVersion,e);let i=!1;return s.forEach(((e,t)=>{i=i||e.success})),i&&(this.currentVersion=e,this.currentVersionInfo=t||await this.getVersionInfoExtended(),this._isDefaultOrHistoricVersion()?this.currentVersion&&\"name\"in this.currentVersion?this.state=\"public\"===this.currentVersionInfo?.access?\"lock-none\":\"lock-read\":this.state=\"lock-read\":this.state=\"read\"!==this.versionManagementService.getLockType(this.currentVersion)?\"lock-none\":\"lock-read\"),s}async undo(){return this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.undo(this.currentVersion),{success:!0})}async redo(){return this._isDefaultOrHistoricVersion()?{success:!1}:(this.versionManagementService.redo(this.currentVersion),{success:!0})}async _setUpState(e){await this.versionManagementService.load(e),this.state=\"lock-none\",this.currentVersionInfo=await this.getVersionInfoExtended(),this.versionableItems.forEach((e=>{this.currentVersion?\"name\"in this.currentVersion?(e.gdbVersion=this.currentVersion.name,e.historicMoment=null):(e.historicMoment=this.currentVersion,e.gdbVersion=null):(e.gdbVersion=null,e.historicMoment=null)})),this.usePersistentReadSessions&&(this._isDefaultOrHistoricVersion()?this.currentVersion&&\"name\"in this.currentVersion?this.state=\"public\"===this.currentVersionInfo?.access?\"lock-none\":\"lock-read\":this.state=\"lock-read\":await this.versionManagementService.startReading(this.currentVersion)&&(this.state=\"lock-read\"))}_isDefaultOrHistoricVersion(e=this.currentVersion){return!(e&&\"name\"in e)||e.name===this.versionManagementService.defaultVersionIdentifier.name}};e([o()],c.prototype,\"versionManagementService\",void 0),e([o()],c.prototype,\"featureServiceUrl\",void 0),e([o()],c.prototype,\"url\",void 0),e([o()],c.prototype,\"currentVersion\",void 0),e([o()],c.prototype,\"currentVersionInfo\",void 0),e([o()],c.prototype,\"versionInfos\",void 0),e([o()],c.prototype,\"versionableItems\",void 0),e([o()],c.prototype,\"usePersistentReadSessions\",void 0),e([o()],c.prototype,\"state\",void 0),e([o({readOnly:!0})],c.prototype,\"defaultVersionIdentifier\",null),e([o({readOnly:!0})],c.prototype,\"isDefault\",null),c=e([a(\"esri.versionManagement.VersioningState\")],c);const u=c;export{u as default};\n"],"names":["e","t","n","r","Object","freeze","defineProperty","__proto__","IDENTITY","clone","create","fromValues","Symbol","toStringTag","value","async","c","o","a","allTables","concat","allLayers","filter","type","toArray","utilityNetworks","forEach","push","Map","get","featureServiceUrl","set","l","url","load","versionManagementServiceUrl","i","s","versionManagementService","versionableItems","usePersistentReadSessions","f","arguments","length","undefined","map","addHandles","delete","destroy","catch","getLogger","error","u","_","b","m","p","createView","Float64Array","JSONSupportMixin","constructor","super","this","currentVersion","currentVersionInfo","versionInfos","state","initialize","replace","on","item","toLowerCase","preventDefault","items","getLockType","addResolvingPromise","_setUpState","Promise","resolve","defaultVersionIdentifier","isDefault","name","getVersionInfos","alterVersion","guid","deleteVersion","getVersionInfoExtended","startEditing","_isDefaultOrHistoricVersion","success","startReadingWithResult","startEditingWithResult","stopEditing","stopEditingWithResult","stopReadingWithResult","changeVersion","access","startReading","stopReading","changeVersionWithResult","undo","redo","gdbVersion","historicMoment","prototype","readOnly"],"sourceRoot":""}