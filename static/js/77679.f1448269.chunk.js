"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[4216,13955,20728,23695,34919,68814,77679,92521,98277,99372],{13955:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n,r=i(35143),o=i(42553),s=i(46053),a=i(85842);let l=n=class extends o.A{constructor(e){super(e),this.visible=!1}clone(){return new n({visible:this.visible})}cloneConstructProperties(){return{visible:this.visible}}};(0,r._)([(0,s.MZ)({type:Boolean,json:{default:!1,write:!0}})],l.prototype,"visible",void 0),l=n=(0,r._)([(0,a.$)("esri.webscene.SlideLegendInfo")],l);const d=l},20728:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);let d=n=class extends o.A{constructor(e){super(e),this.type="rainy",this.cloudCover=.5,this.precipitation=.5}clone(){return new n({cloudCover:this.cloudCover,precipitation:this.precipitation})}};(0,r._)([(0,a.e)({rainy:"rainy"}),(0,s.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"cloudCover",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"precipitation",void 0),d=n=(0,r._)([(0,l.$)("esri.views.3d.environment.RainyWeather")],d);const p=d},23695:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);let d=n=class extends o.A{constructor(e){super(e),this.type="foggy",this.fogStrength=.5}clone(){return new n({fogStrength:this.fogStrength})}};(0,r._)([(0,a.e)({foggy:"foggy"}),(0,s.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"fogStrength",void 0),d=n=(0,r._)([(0,l.$)("esri.views.3d.environment.FoggyWeather")],d);const p=d},30650:(e,t,i)=>{i.d(t,{S:()=>o});var n=i(98277),r=i(99372);const o={key:"type",defaultKeyValue:"sun",base:null,typeMap:{sun:n.default,virtual:r.default}}},34919:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n,r=i(35143),o=i(42553),s=i(53084),a=i(46053),l=(i(81806),i(76460),i(85842)),d=i(13955);let p=n=class extends o.A{constructor(){super(...arguments),this.legendInfo=null}clone(){return new n({legendInfo:(0,s.clone)(this.legendInfo)})}};(0,r._)([(0,a.MZ)({type:d.default,json:{write:!0}})],p.prototype,"legendInfo",void 0),p=n=(0,r._)([(0,l.$)("esri.webscene.support.SlideElements")],p);const u=p},53203:(e,t,i)=>{i.d(t,{TJ:()=>p,eM:()=>l,k9:()=>c,l2:()=>d,zF:()=>u});var n=i(81835),r=i(23695),o=i(20728),s=i(92521),a=i(68814);const l={key:"type",base:a.default,typeMap:{sunny:a.default,cloudy:n.default,rainy:o.default,snowy:s.default,foggy:r.default}},d=Object.keys(l.typeMap);function p(e,t){return!!d.includes(e)||(t.error(`"${e}" is not a valid weather type`),!1)}const u=1e4,c=1e5},68814:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);let d=n=class extends o.A{constructor(e){super(e),this.type="sunny",this.cloudCover=.5}clone(){return new n({cloudCover:this.cloudCover})}};(0,r._)([(0,a.e)({sunny:"sunny"}),(0,s.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"cloudCover",void 0),d=n=(0,r._)([(0,l.$)("esri.views.3d.environment.SunnyWeather")],d);const p=d},77679:(e,t,i)=>{i.r(t),i.d(t,{default:()=>X});var n,r=i(35143),o=i(95349),s=i(48053),a=i(98773),l=i(69098),d=i(19276),p=i(3975),u=i(42553),c=i(76460),h=i(15941),y=i(30726),w=i(50346),m=i(68134),v=i(46053),g=i(21403),b=(i(81806),i(47249),i(85842)),f=i(40565),_=i(20664),C=i(9392),T=i(25515),M=i(97579),S=i(59752),L=i(994),E=i(28897),x=i(98277),j=i(99372);let Z=n=class extends u.A{constructor(){super(...arguments),this.text=""}clone(){return new n({text:this.text})}};(0,r._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],Z.prototype,"text",void 0),Z=n=(0,r._)([(0,b.$)("esri.webscene.support.Description")],Z);const A=Z;var k,I=i(34919),D=i(53084),N=i(68814),O=i(53203),U=i(30650);let V=k=class extends u.A{constructor(){super(...arguments),this.lighting=new x.default,this.weather=new N.default}clone(){return new k({lighting:(0,D.clone)(this.lighting),weather:(0,D.clone)(this.weather)})}};(0,r._)([(0,v.MZ)({types:U.S,json:{write:!0}})],V.prototype,"lighting",void 0),(0,r._)([(0,v.MZ)({types:O.eM,json:{write:!0}})],V.prototype,"weather",void 0),V=k=(0,r._)([(0,b.$)("esri.webscene.Environment")],V);var R,$=i(18364),q=i(2183);let P=R=class extends u.A{constructor(){super(...arguments),this.opacity=null}clone(){return new R({opacity:this.opacity})}cloneAndApplyTo(e){return null==this.opacity||((e=e?.clone()??new $.default).opacity=this.opacity),e}static fromGround(e){return new R({opacity:e.opacity})}};(0,r._)([(0,v.MZ)({type:Number,json:{type:f.jz,read:{reader:q.D,source:"transparency"},write:{writer:(e,t)=>{t.transparency=(0,q.p)(e)},target:"transparency"}}})],P.prototype,"opacity",void 0),P=R=(0,r._)([(0,b.$)("esri.webscene.support.SlideGround")],P);const W=P;var B;let F=B=class extends u.A{constructor(e){super(e),this.id="",this.sublayerIds=null}clone(){return new B({id:this.id,sublayerIds:(0,D.clone)(this.sublayerIds)})}};var G;(0,r._)([(0,v.MZ)({type:String,json:{write:!0}})],F.prototype,"id",void 0),(0,r._)([(0,v.MZ)({type:[f.jz],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],F.prototype,"sublayerIds",void 0),F=B=(0,r._)([(0,b.$)("esri.webscene.support.SlideVisibleLayer")],F);let K=G=class extends u.A{constructor(){super(...arguments),this.text=""}clone(){return new G({text:this.text})}};(0,r._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],K.prototype,"text",void 0),K=G=(0,r._)([(0,b.$)("esri.webscene.support.Title")],K);const z=K;let H=0;const J=d.default.ofType(F);let Q=class extends(l.A.ClonableMixin(u.A)){constructor(e){super(e),this.id=Date.now().toString(16)+"-slide-"+H++,this.title=new z,this.description=new A,this.hidden=!1,this.thumbnail=new L.o,this.viewpoint=null,this.basemap=null,this.ground=null,this.layout="caption",this.environment=new V,this.timeExtent=null,this.elements=null,this.visibleLayers=new J}destroy(){this.visibleLayers.removeAll(),this.basemap=null,this.thumbnail=(0,y.pR)(this.thumbnail),this.description=null,this.title=null,this.thumbnail=null,this.elements=null}castTitle(e){return"string"==typeof e?new z({text:e}):(0,f.dp)(z,e)}castDescription(e){return"string"==typeof e?new A({text:e}):(0,f.dp)(A,e)}castThumbnail(e){return"string"==typeof e?new L.o({url:e}):(0,f.dp)(L.o,e)}castBasemap(e){return(0,M.es)(e)}set visibleLayers(e){this._set("visibleLayers",(0,p.V)(e,this._get("visibleLayers"),J))}castVisibleLayers(e){return e&&"function"==typeof e.map?e.map((e=>{if("string"==typeof e)return{id:e};if(e instanceof T.default){const t=ee(e);return{id:e.id,sublayerIds:t}}return e.id?{id:e.id,sublayerIds:"sublayerIds"in e?e.sublayerIds:void 0}:(c.A.getLogger(this).warn('Invalid visible layer, expected { id }, Layer or "id"'),e)})):null}async _updateVisibleLayersFrom(e){const t=[];await Promise.allSettled(this._getLayers(e.map).map((i=>e.whenLayerView(i).then((e=>{if(e.visible){const n=ee(i);t.push(new F({id:e.layer.id,sublayerIds:n}))}})))).toArray()),this.visibleLayers.removeAll(),this.visibleLayers.addMany(t)}updateFrom(e,t){const i={format:"png",quality:80,width:120,height:75,disableDecorations:!0,...t?.screenshot};return e.when((()=>(this.viewpoint=e.viewpoint.clone(),this.environment.lighting="virtual"===e.environment.lighting.type?j.default.prototype.clone.apply(e.environment.lighting):x.default.prototype.clone.apply(e.environment.lighting),this.environment.weather=e.environment.weather.clone(),this.basemap=e.map.basemap?.clone()||null,this.ground=e.map.ground?W.fromGround(e.map.ground):null,this.timeExtent=e.timeExtent?.clone()??null,this._updateVisibleLayersFrom(e)))).then((()=>e.takeScreenshot(i))).then((e=>(this.thumbnail=new L.o({url:e.dataUrl}),this)))}async applyTo(e,t){null!=this._applyToController&&this._applyToController.abort();let i=new AbortController;this._applyToController=i;const n=(0,w.onAbortOrThrow)(t,(()=>i?.abort())),r=()=>{this._applyToController===i&&(this._applyToController=null),i=null,n?.remove()};try{await(0,m.whenOnce)((()=>e.ready),i.signal)}catch(A){throw r(),A}if(i.signal.aborted)throw r(),(0,w.createAbortError)();const o=e.resourceController.scheduler.registerTask(S.W6.SLIDE);let s=!1;const l={animate:!0,...t,signal:this._applyToController.signal},d=await(0,a.Ke)(e.addUpdatingPromise((async()=>{await Promise.all([o.schedule((async()=>s=await this._setViewpointOfInterest(e,l))),o.schedule((()=>this._applyBasemap(e,l)),l.signal),o.schedule((()=>this._loadLayersWithSublayerVisibility(e)))]),await Promise.all([o.schedule((()=>this._applyLayerVisibility(e)),l.signal),o.schedule((()=>this._applyGround(e)),l.signal),o.schedule((()=>this._applyViewpoint(e,l)),l.signal),o.schedule((()=>e.timeExtent=this.timeExtent?.clone()??null),l.signal),o.schedule((()=>e.environment.weather=this.environment.weather.clone()))])})()));if(s&&(e.contentCamera=null),o.remove(),r(),!1===d.ok)throw d.error;return this}async _applyBasemap(e,t){if(this.basemap){try{await this.basemap.load(t)}catch(R){if((0,w.isAbortError)(R))throw R}e.map.basemap=(0,M.d0)(this.basemap,e.map.basemap)}}_applyGround(e){this.ground&&(e.map.ground=this.ground.cloneAndApplyTo(e.map.ground))}_getLayers(e){const t=new d.default;return this._collectLayers(e,t),this._collectLayers(e.ground,t),t}_collectLayers(e,t){e.layers.forEach((e=>{e.persistenceEnabled&&(t.add(e),"layers"in e&&this._collectLayers(e,t))}))}async _loadLayersWithSublayerVisibility(e){this.visibleLayers&&await Promise.allSettled(this._getLayers(e.map).items.map((e=>{const t=this.visibleLayers.find((t=>t.id===e.id))?.sublayerIds;return t?e.load():null})))}_applyLayerVisibility(e){this.visibleLayers&&this._getLayers(e.map).forEach((e=>{const t=this.visibleLayers.find((t=>t.id===e.id));e.visible=null!=t;const i=t?.sublayerIds,n=Y(e);i&&n&&n.forEach((e=>e.visible=i.includes(e.id)))}))}async _setViewpointOfInterest(e,t){if(e.state.fixedContentCamera||!this.viewpoint||t?.ignoreViewpoint||!t?.useDestinationCamera)return!1;const{toCameraAsync:n}=await Promise.all([i.e(21729),i.e(59231),i.e(81923),i.e(47547)]).then(i.bind(i,38987)),r=await n(e,this.viewpoint);return e.contentCamera=r,null!=r}async _applyViewpoint(e,t){if(this._applyCachedCameraTrackingEnabled(e),this.viewpoint&&!t.ignoreViewpoint){const i=this.environment.lighting;if(t.animate&&"sun"===i.type&&i.date)return this._animateToLighting(e,t);t.animate&&(e.environment.applyLighting(i.clone()),await e.goTo(this.viewpoint,t)),e.viewpoint=this.viewpoint}e.environment.applyLighting(this.environment.lighting.clone())}async _animateToLighting(e,t){let i=null;return"virtual"!==e.environment.lighting.type&&"virtual"!==this.environment.lighting.type&&("global"===e.viewingMode&&(i=this._animateLightingWithCamera(e,e.environment.lighting,this.environment.lighting)),e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1),e.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled,"virtual"===this.environment.lighting.type||"virtual"===e.environment.lighting.type?(e.environment.applyLighting(this.environment.lighting.clone()),"virtual"!==e.environment.lighting.type&&(e.environment.cachedCameraTrackingEnabled=e.environment.lighting.cameraTrackingEnabled,e.environment.lighting.cameraTrackingEnabled=!1)):null!=this.environment.lighting.displayUTCOffset&&(e.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset),e.goTo(this.viewpoint,t).then((()=>{this._applyCachedCameraTrackingEnabled(e),e.environment.applyLighting(this.environment.lighting.clone())})).catch((t=>{throw null==e.animation&&this._applyCachedCameraTrackingEnabled(e),t})).finally((()=>{(0,y.xt)(i)}))}_applyCachedCameraTrackingEnabled(e){null!=e.environment.cachedCameraTrackingEnabled&&(e.environment.lighting.cameraTrackingEnabled=e.environment.cachedCameraTrackingEnabled,e.environment.cachedCameraTrackingEnabled=null)}_getTime(e){return[e.getTime(),3600*e.getUTCHours()+60*e.getUTCMinutes()+e.getUTCSeconds()]}_setTime(e,t,i){return e.setTime(t),e.setUTCHours(i/3600),e.setUTCMinutes(i%3600/60),e.setUTCSeconds(i%3600%60),e}_animateLightingWithCamera(e,t,i){const n=new Date(t.date.toString()),[r,o]=this._getTime(n),[s,a]=this._getTime(i.date),l=function(e,t){let i=t-e;return i>ie&&(i-=te),i<-43200&&(i+=te),i}(o,a),d=e.renderCoordsHelper,p=(0,C.vt)();d.toRenderCoords(e.camera.position,p);const u=(0,C.vt)(),c=(0,C.vt)();null!=this.viewpoint.camera&&d.toRenderCoords(this.viewpoint.camera.position,u);const y=new Date;return(0,m.when)((()=>e.camera),(e=>{d.toRenderCoords(e.position,c);const i=(0,_.s)(p,c),n=(0,_.s)(u,c);let a=0;i+n!==0&&(a=i/(i+n));const w=r+(s-r)*a,m=function(e,t){return(0,h.OS)(e+t,te)}(o,l*a);t.date=this._setTime(y,w,m)}))}static createFrom(e,t){return(new this).updateFrom(e,t)}};(0,r._)([(0,v.MZ)({type:String,json:{write:{isRequired:!0}}})],Q.prototype,"id",void 0),(0,r._)([(0,v.MZ)({type:z,json:{default:()=>new z({text:""}),write:{isRequired:!0}}})],Q.prototype,"title",void 0),(0,r._)([(0,g.w)("title")],Q.prototype,"castTitle",null),(0,r._)([(0,v.MZ)({type:A,json:{write:{overridePolicy:e=>({enabled:!(!e||!e.text)})}}})],Q.prototype,"description",void 0),(0,r._)([(0,g.w)("description")],Q.prototype,"castDescription",null),(0,r._)([(0,v.MZ)({type:Boolean,nonNullable:!0,json:{write:!0,default:!1}})],Q.prototype,"hidden",void 0),(0,r._)([(0,v.MZ)({type:L.o,json:{default:()=>new L.o({url:""}),write:{isRequired:!0}}})],Q.prototype,"thumbnail",void 0),(0,r._)([(0,g.w)("thumbnail")],Q.prototype,"castThumbnail",null),(0,r._)([(0,v.MZ)({type:s.default,nonNullable:!0,json:{write:{isRequired:!0}}})],Q.prototype,"viewpoint",void 0),(0,r._)([(0,v.MZ)({type:o.default,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Q.prototype,"basemap",void 0),(0,r._)([(0,g.w)("basemap")],Q.prototype,"castBasemap",null),(0,r._)([(0,v.MZ)({type:W,json:{write:!0}})],Q.prototype,"ground",void 0),(0,r._)([(0,v.MZ)({type:["caption","cover","none"],json:{write:!0,default:"caption"},nonNullable:!0})],Q.prototype,"layout",void 0),(0,r._)([(0,v.MZ)({type:J,json:{write:{isRequired:!0}}})],Q.prototype,"visibleLayers",null),(0,r._)([(0,g.w)("visibleLayers")],Q.prototype,"castVisibleLayers",null),(0,r._)([(0,v.MZ)({type:V,json:{write:!0}})],Q.prototype,"environment",void 0),(0,r._)([(0,v.MZ)(E.E)],Q.prototype,"timeExtent",void 0),(0,r._)([(0,v.MZ)({type:I.default,json:{write:!0}})],Q.prototype,"elements",void 0),Q=(0,r._)([(0,b.$)("esri.webscene.Slide")],Q);const X=Q;function Y(e){if("building-scene"===e.type||"map-image"===e.type)return e.allSublayers.toArray()}function ee(e){const t=Y(e);if(t)return t.filter((e=>e.visible)).map((e=>e.id))}const te=86400,ie=43200},81835:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);let d=n=class extends o.A{constructor(e){super(e),this.type="cloudy",this.cloudCover=.5}clone(){return new n({cloudCover:this.cloudCover})}};(0,r._)([(0,a.e)({cloudy:"cloudy"}),(0,s.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"cloudCover",void 0),d=n=(0,r._)([(0,l.$)("esri.views.3d.environment.CloudyWeather")],d);const p=d},92521:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(6409)),l=i(85842);let d=n=class extends o.A{constructor(e){super(e),this.type="snowy",this.cloudCover=.5,this.precipitation=.5,this.snowCover="disabled"}clone(){return new n({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};(0,r._)([(0,a.e)({snowy:"snowy"}),(0,s.MZ)({json:{write:{isRequired:!0}}})],d.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"cloudCover",void 0),(0,r._)([(0,s.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],d.prototype,"precipitation",void 0),(0,r._)([(0,s.MZ)({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],d.prototype,"snowCover",void 0),d=n=(0,r._)([(0,l.$)("esri.views.3d.environment.SnowyWeather")],d);const p=d},98277:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(28379)),l=i(85842),d=i(17707);let p=n=class extends o.A{constructor(e){super(e),this.type="sun",this.date=null,this.directShadowsEnabled=!1,this.displayUTCOffset=null}readDate(e,t){return null!=t.datetime&&new Date(t.datetime)||null}writeDate(e,t,i){t[i]=e.getTime()}readDirectShadowsEnabled(e,t){return!!t.directShadows}writedirectShadowsEnabled(e,t,i){e&&(t[i]=e)}writeDisplayUTCOffset(e,t){null!=e&&(t.displayUTCOffset=e)}clone(){return new n(this.cloneConstructProperties())}cloneConstructProperties(){const e={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};return null!=this.date&&(e.date=new Date(this.date.getTime())),e}};(0,r._)([(0,s.MZ)({readOnly:!0,type:["sun"],json:{write:!0}})],p.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Date,json:{type:Number,write:{target:"datetime"}}})],p.prototype,"date",void 0),(0,r._)([(0,a.w)("date",["datetime"])],p.prototype,"readDate",null),(0,r._)([(0,d.K)("date")],p.prototype,"writeDate",null),(0,r._)([(0,s.MZ)({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],p.prototype,"directShadowsEnabled",void 0),(0,r._)([(0,a.w)("directShadowsEnabled",["directShadows"])],p.prototype,"readDirectShadowsEnabled",null),(0,r._)([(0,d.K)("directShadowsEnabled")],p.prototype,"writedirectShadowsEnabled",null),(0,r._)([(0,s.MZ)({type:Number,json:{write:!0}})],p.prototype,"displayUTCOffset",void 0),(0,r._)([(0,d.K)("displayUTCOffset")],p.prototype,"writeDisplayUTCOffset",null),p=n=(0,r._)([(0,l.$)("esri.webscene.SunLighting")],p);const u=p},99372:(e,t,i)=>{i.r(t),i.d(t,{default:()=>d});var n,r=i(35143),o=i(42553),s=i(46053),a=(i(81806),i(76460),i(47249),i(85842));let l=n=class extends o.A{constructor(e){super(e),this.type="virtual",this.directShadowsEnabled=!1}clone(){return new n(this.cloneConstructProperties())}cloneConstructProperties(){return{directShadowsEnabled:this.directShadowsEnabled}}};(0,r._)([(0,s.MZ)({readOnly:!0,type:["virtual"],json:{write:{isRequired:!0}}})],l.prototype,"type",void 0),(0,r._)([(0,s.MZ)({type:Boolean,json:{default:!1,name:"directShadows",write:!0}})],l.prototype,"directShadowsEnabled",void 0),l=n=(0,r._)([(0,a.$)("esri.webscene.VirtualLighting")],l);const d=l}}]);
//# sourceMappingURL=77679.f1448269.chunk.js.map