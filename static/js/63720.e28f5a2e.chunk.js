"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[63720],{63720:(e,n,r)=>{r.r(n),r.d(n,{getTemplates:()=>W});var t=r(50076),i=r(73204),a=r(63860),o=r(97336);async function s(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("class-breaks"!==i?.type)throw new t.default("class-breaks-popup:invalid-parameters","renderer.type must be 'class-breaks'");return{layer:n,renderer:i}}async function l(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"divide";const{fieldInfos:t,expressionInfos:a}=await(0,o.Xj)({renderer:e,layer:n,normFieldExpressionTemplate:r});return new i.default({content:await(0,o.Lb)(n,{fieldInfos:t,expressionInfos:a}),fieldInfos:t,expressionInfos:a})}var d=r(81779),f=r(40585),p=r(76106);async function u(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("dot-density"!==i?.type)throw new t.default("dot-density-popup:invalid-parameters","renderer.type must be 'dot-density'");return{layer:n,renderer:i}}async function m(e,n){const{fieldInfos:r,expressionInfos:t}=await(0,o.Xj)({renderer:e,layer:n});return new i.default({content:await(0,o.Lb)(n,{fieldInfos:r,expressionInfos:t}),expressionInfos:t,fieldInfos:r})}async function c(e,n,r){const{fieldInfos:t,expressionInfos:a}=await(0,o.Xj)({renderer:e,layer:n}),s=t.filter((e=>!e.fieldName?.includes(o.bF))),l={fieldInfo:new f.default({fieldName:"expression/dot-density-categories-list"}),expressionInfo:new d.default({name:"dot-density-categories-list",title:r.listOfCategories,expression:(0,p.getArcadeForOrderedFields)(s,a)})},u=new i.default({expressionInfos:[l.expressionInfo],fieldInfos:[l.fieldInfo],title:r.competingFields,content:`{${l.fieldInfo.fieldName}}`});return{name:"dot-density-categories-list",title:r.orderedListOfValues,value:u}}async function I(e,n,r){const{fieldInfos:t,expressionInfos:a}=await(0,o.Xj)({renderer:e,layer:n}),s=t.filter((e=>!e.fieldName?.includes(o.bF))),l={fieldInfo:new f.default({fieldName:"expression/dot-density-category"}),expressionInfo:new d.default({name:"dot-density-category",title:r.predominantCategory,expression:(0,p.getArcadeForPredominantCategoryAlias)(s,a)})},u=new i.default({expressionInfos:[l.expressionInfo,...a],fieldInfos:[l.fieldInfo,...t],content:[{type:"text",text:`<div><b><font size="3">{${l.fieldInfo.fieldName}}</font></b></div>`},{type:"media",mediaInfos:{type:"pie-chart",title:r.competingFields,value:{fields:t.map((e=>e.fieldName))}}}]});return{name:"dot-density-category-chart",title:r.predominantCategoryWithChart,value:u}}async function y(e){const[{renderer:n,layer:r},t]=await Promise.all([u(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]);return{primaryTemplate:{name:"dot-density",title:t.dotDensity,value:await m(n,r)},secondaryTemplates:[await c(n,r,t),await I(n,r,t)]}}async function g(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("heatmap"!==i?.type)throw new t.default("heatmap-popup:invalid-parameters","renderer.type must be 'heatmap'");return{layer:n,renderer:i}}var x=r(39348),w=r(17542);function v(e,n){return e.legendOptions?.title??n.competingFields}function h(e,n){return{fieldInfo:new f.default({fieldName:"expression/predominant-category"}),expressionInfo:new d.default({name:"predominant-category",title:n.predominantCategory,expression:(0,p.getArcadeForPredominantCategoryAlias)(e)})}}function b(e,n){const r=(0,p.fieldNamesFromFieldInfos)(e);return{fieldInfo:new f.default({fieldName:"expression/predominant-value",format:new w.default({digitSeparator:!0,places:1})}),expressionInfo:new d.default({name:"predominant-value",title:n.predominantCategoryValue,expression:(0,p.getArcadeForPredominantCategoryValue)(r),returnType:"number"})}}function N(e,n){const r=(0,p.fieldNamesFromFieldInfos)(e);return{fieldInfo:new f.default({fieldName:"expression/predominant-strength",format:new w.default({digitSeparator:!0,places:0})}),expressionInfo:new d.default({name:"predominant-strength",title:n.strengthOfPredominance,expression:(0,p.getArcadeForStrengthOfPredominance)(r),returnType:"number"})}}function F(e,n){const r=h(e.fieldInfos,n),t=new i.default({expressionInfos:[r.expressionInfo],fieldInfos:[r.fieldInfo],content:(0,x.V)(n.predominantCategoryContent,{expression:`<b>{${r.fieldInfo.fieldName}}</b>`})});return{name:"predominant-category",title:n.predominantCategory,value:t}}function C(e,n){const{fieldInfos:r}=e,t=h(r,n),a=b(r,n),o=new i.default({expressionInfos:[a.expressionInfo,t.expressionInfo],fieldInfos:[a.fieldInfo,t.fieldInfo],content:(0,x.V)(n.predominantCategoryValueContent,{expression1:`<b>{${t.fieldInfo.fieldName}}</b>`,expression2:`<b>{${a.fieldInfo.fieldName}}</b>`})});return{name:"predominant-category-value",title:n.predominantCategoryValue,value:o}}function T(e,n){const{fieldInfos:r}=e,t=h(r,n),a=b(r,n),o=function(e,n){const r=(0,p.fieldNamesFromFieldInfos)(e);return{fieldInfo:new f.default({fieldName:"expression/predominant-margin",format:new w.default({digitSeparator:!0,places:0})}),expressionInfo:new d.default({name:"predominant-margin",title:n.marginOfVictory,expression:(0,p.getArcadeForPredominanceMargin)(r),returnType:"number"})}}(r,n),s=new i.default({expressionInfos:[a.expressionInfo,t.expressionInfo,o.expressionInfo],fieldInfos:[a.fieldInfo,t.fieldInfo,o.fieldInfo],title:(0,x.V)(n.mostCommon,{expression:"{expression/predominant-category}"}),content:(0,x.V)(n.predominantCategoryValueMarginContent,{expression1:`<b>{${t.fieldInfo.fieldName}}</b>`,expression2:`<b>{${a.fieldInfo.fieldName}}</b>`,expression3:`<b>{${o.fieldInfo.fieldName}}</b>`})});return{name:"predominant-category-value-margin",title:n.marginOfVictory,value:s}}function $(e,n){const{fieldInfos:r}=e,t=h(r,n),a=b(r,n),o=N(r,n),s=new i.default({expressionInfos:[a.expressionInfo,t.expressionInfo,o.expressionInfo],fieldInfos:[a.fieldInfo,t.fieldInfo,o.fieldInfo],content:(0,x.V)(n.predominantCategoryStrengthContent,{expression1:`{${a.fieldInfo.fieldName}}`,expression2:`<b>{${t.fieldInfo.fieldName}}</b>`,expression3:`<b>{${o.fieldInfo.fieldName}}%</b>`})});return{name:"predominant-category-strength",title:n.strengthOfPredominance,value:s}}function P(e,n){const{renderer:r,fieldInfos:t}=e,a=h(t,n),o=b(t,n),s=N(t,n),l=function(e,n){return{fieldInfo:new f.default({fieldName:"expression/predominant-categories-list"}),expressionInfo:new d.default({name:"predominant-categories-list",title:n.listOfCategories,expression:(0,p.getArcadeForOrderedFields)(e)})}}(t,n),u=new i.default({expressionInfos:[a.expressionInfo,o.expressionInfo,s.expressionInfo,l.expressionInfo],fieldInfos:[a.fieldInfo,o.fieldInfo,s.fieldInfo,l.fieldInfo],title:v(r,n),content:[{type:"text",text:(0,x.V)(n.predominantCategoryStrengthContent,{expression1:`{${o.fieldInfo.fieldName}}`,expression2:`<b>{${a.fieldInfo.fieldName}}</b>`,expression3:`<b>{${s.fieldInfo.fieldName}}%</b>`})},{type:"text",text:`{${l.fieldInfo.fieldName}}`}]});return{name:"predominant-categories-list",title:n.orderedListOfValues,value:u}}function V(e,n){const{fieldInfos:r}=e,t=h(r,n),a=b(r,n),o=N(r,n),s=function(e,n){const r=(0,p.fieldNamesFromFieldInfos)(e);return{fieldInfo:new f.default({fieldName:"expression/predominant-total",format:new w.default({digitSeparator:!0,places:0})}),expressionInfo:new d.default({name:"predominant-total",title:n.sumOfCategories,expression:(0,p.getArcadeForSumOfFields)(r),returnType:"number"})}}(r,n),l=new i.default({expressionInfos:[a.expressionInfo,t.expressionInfo,s.expressionInfo,o.expressionInfo],fieldInfos:[a.fieldInfo,t.fieldInfo,s.fieldInfo,o.fieldInfo],content:(0,x.V)(n.predominantCategoryTotalStrengthContent,{expression1:`{${a.fieldInfo.fieldName}}`,expression2:`<b>{${t.fieldInfo.fieldName}}</b>`,expression3:`<b>{${o.fieldInfo.fieldName}}%</b>`,expression4:`{${s.fieldInfo.fieldName}}`})});return{name:"predominant-category-total-strength",title:n.predominantCategoryWithTotalAndStrength,value:l}}function M(e,n){const{renderer:r,fieldInfos:t}=e,a=h(t,n),o=b(t,n),s=N(t,n),l=new i.default({expressionInfos:[o.expressionInfo,a.expressionInfo,s.expressionInfo],fieldInfos:[o.fieldInfo,a.fieldInfo,s.fieldInfo],title:v(r,n),content:[{type:"text",text:(0,x.V)(n.predominantCategoryStrengthContent,{expression1:`{${o.fieldInfo.fieldName}}`,expression2:`<b>{${a.fieldInfo.fieldName}}</b>`,expression3:`<b>{${s.fieldInfo.fieldName}}%</b>`})},{type:"media",mediaInfos:{type:"pie-chart",value:{fields:t.map((e=>e.fieldName))}}}]});return{name:"predominant-category-chart",title:n.predominantCategoryWithChart,value:l}}function A(e,n){const r=e.authoringInfo,i="predominance"===r?.type?r.fields:[];if(!i?.length)throw new t.default("predominance-popup:insufficient-info","unable to find input fields in authoringInfo");return i.map((e=>(0,o.lm)(n,e)))}async function O(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("unique-value"!==i?.type)throw new t.default("predominance-popup:invalid-parameters","renderer.type must be 'unique-value'");return{renderer:i,fieldInfos:A(i,n)}}async function S(e){const[n,r]=await Promise.all([O(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]),t=P(n,r),i=await async function(e){const[n,r]=await Promise.all([O(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]);return[F(n,r),C(n,r),T(n,r),V(n,r),P(n,r),$(n,r),M(n,r)]}(e);return{primaryTemplate:t,secondaryTemplates:i.filter((e=>e.name!==t.name))}}async function k(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("unique-value"!==i?.type)throw new t.default("relationship-popup:invalid-parameters","renderer.type must be 'unique-value'");const a=i.authoringInfo;if(!a||"relationship"!==a.type)throw new t.default("relationship-popup:invalid-parameters","renderer.authoringInfo.type must be 'relationship'");if(!a.field1?.field||!a.field2?.field)throw new t.default("relationship-popup:invalid-parameters","'field1' and/or 'field2' properties are missing in renderer.authoringInfo");return{layer:n,renderer:i}}async function q(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"divide";const{fieldInfos:t,expressionInfos:a}=await(0,o.Xj)({renderer:e,layer:n,normFieldExpressionTemplate:r});return new i.default({content:await(0,o.Lb)(n,{fieldInfos:t,expressionInfos:a}),fieldInfos:t,expressionInfos:a})}var j=r(30973);async function L(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("simple"!==i?.type)throw new t.default("simple-popup:invalid-parameters","renderer.type must be 'simple'");return{layer:n,renderer:i}}async function X(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"divide";const{fieldInfos:t,expressionInfos:a}=await(0,o.Xj)({renderer:e,layer:n,normFieldExpressionTemplate:r});return new i.default({content:await(0,o.Lb)(n,{fieldInfos:t,expressionInfos:a}),expressionInfos:a,fieldInfos:t})}async function E(e){const{layer:n,renderer:r}=e;await n.load();const i=r??("renderer"in n?n.renderer:void 0);if("unique-value"!==i?.type)throw new t.default("unique-values-popup:invalid-parameters","renderer.type must be 'unique-value'");return{layer:n,renderer:i}}async function z(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"divide";const{fieldInfos:t,expressionInfos:a}=await(0,o.Xj)({renderer:e,layer:n,normFieldExpressionTemplate:r});return new i.default({content:await(0,o.Lb)(n,{fieldInfos:t,expressionInfos:a}),fieldInfos:t,expressionInfos:a})}async function W(e){const{renderer:n,layer:r}=function(e){const{layer:n}=e,r=e.renderer??("renderer"in n?n.renderer:void 0);if(!r)throw new t.default("getTemplates:invalid-parameters","'renderer' or 'layer.renderer' must be provided");return{layer:n,renderer:r}}(e);if(!n)return null;if("simple"===n.type)return async function(e){const[{renderer:n,layer:r},t]=await Promise.all([L(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]),i=[];if(!(0,o.G2)(n).length){const e=(0,j.createPopupTemplate)(r);return e?{primaryTemplate:{name:"simple",title:t.simple,value:e},secondaryTemplates:i}:null}const s={name:"simple",title:t.simple,value:await X(n,r)};return(0,o.gS)(n)&&i.push({name:"simple-percent",title:t.simpleNormFieldAsPercent,value:await X(n,r,"percentage")}),{primaryTemplate:s,secondaryTemplates:i}}({renderer:n,layer:r});if("class-breaks"===n.type)return async function(e){const[{renderer:n,layer:r},t]=await Promise.all([s(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]),i={name:"class-breaks",title:t.classBreaks,value:await l(n,r)},d=[];return(0,o.gS)(n)&&d.push({name:"class-breaks-percent",title:t.classBreaksNormFieldAsPercent,value:await l(n,r,"percentage")}),{primaryTemplate:i,secondaryTemplates:d}}({renderer:n,layer:r});if("dot-density"===n.type)return y({renderer:n,layer:r});if("heatmap"===n.type)return async function(e){const[{renderer:n,layer:r},t]=await Promise.all([g(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]);if(!n.field)return null;const{fieldInfos:s}=await(0,o.Xj)({renderer:n,layer:r}),l=new i.default({content:await(0,o.Lb)(r,{fieldInfos:s}),fieldInfos:s});return{primaryTemplate:{name:"heatmap",title:t.heatmap,value:l},secondaryTemplates:[]}}({renderer:n,layer:r});if("unique-value"===n.type){const e=n.authoringInfo?.type;return"predominance"===e?S({renderer:n,layer:r}):"relationship"===e?async function(e){const[{renderer:n,layer:r},t]=await Promise.all([k(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]),i={name:"relationship",title:t.relationshipPopupTitle,value:await q(n,r)},o=[];return function(e){const n=e.authoringInfo;return!(!n?.field1?.normalizationField&&!n?.field2?.normalizationField)}(n)&&o.push({name:"relationship-percent",title:t.relationshipNormFieldAsPercent,value:await q(n,r,"percentage")}),{primaryTemplate:i,secondaryTemplates:o}}({renderer:n,layer:r}):async function(e){const[{renderer:n,layer:r},t]=await Promise.all([E(e),(0,a.ud)("esri/smartMapping/t9n/smartMapping")]),i={name:"unique-values",title:t.uniqueValues,value:await z(n,r)},s=[];return(0,o.gS)(n)&&s.push({name:"unique-values-percent",title:t.uniqueValuesNormFieldAsPercent,value:await z(n,r,"percentage")}),{primaryTemplate:i,secondaryTemplates:s}}({renderer:n,layer:r})}return null}}}]);
//# sourceMappingURL=63720.e28f5a2e.chunk.js.map