{"version":3,"file":"static/js/8429.cdfa5ea3.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/smartMapping/raster/renderers/shadedRelief.js","../node_modules/@arcgis/core/smartMapping/raster/support/adapters/RasterLayerAdapter.js","../node_modules/@arcgis/core/smartMapping/raster/support/adapters/ImageryLayerAdapter.js","../node_modules/@arcgis/core/smartMapping/raster/support/adapters/ImageryTileLayerAdapter.js","../node_modules/@arcgis/core/smartMapping/raster/support/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{createShadedReliefRenderer as r}from\"../../../renderers/support/rasterRendererHelper.js\";import{processRasterRendererParameters as t}from\"../support/utils.js\";async function o(r){const o=(r=await t(r)).layer.supportsMultidirectionalHillshade();if(\"multi-directional\"===r.hillshadeType&&!o)throw new e(\"raster-shaded-relief-renderer:not-supported\",\"multi-directional hillshade type is only supported on 10.8.1+ servers\");return o&&null!=r.hillshadeType||(r.hillshadeType=\"traditional\"),r}async function l(t){t=await o(t);const l=r(t.layer.serviceRasterInfo,t.hillshadeType);if(null==l)throw new e(\"raster-shaded-relief-renderer:not-supported\",\"Only elevation raster data is supported\");return s(l,t),{renderer:l}}function s(e,r){const{scalingType:t,colorRamp:o}=r;null!=t&&(e.scalingType=t),void 0!==o&&(e.colorRamp=o)}export{l as createRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import s from\"../../../../core/Loadable.js\";import{LRUCache as r}from\"../../../../core/LRUCache.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";let a=class extends s{constructor(){super(...arguments),this.type=\"raster-layer-adapter\",this._statsCache=new r(20)}get serviceRasterInfo(){return this.rasterInfo}async updateRasterInfo(t){this.rasterInfo=await this.generateRasterInfo(t),this.rasterFunction=t?.rasterFunction}async updateRasterInfoWithEstimatedStats(t,s){const r=await this.estimateStatisticsHistograms(s);r?.statistics&&(t.statistics=r.statistics),r?.histograms&&(t.histograms=r.histograms)}};t([o()],a.prototype,\"layer\",void 0),t([o()],a.prototype,\"serviceRasterInfo\",null),t([o()],a.prototype,\"rasterInfo\",void 0),t([o()],a.prototype,\"rasterFunction\",void 0),t([o({readOnly:!0})],a.prototype,\"type\",void 0),t([o()],a.prototype,\"version\",void 0),a=t([e(\"esri.smartMapping.raster.support.adapters.RasterLayerAdapter\")],a);const i=a;export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import r from\"../../../../geometry/Point.js\";import{estimateStatisticsFromHistograms as a}from\"../../../../layers/support/rasterFunctions/stretchUtils.js\";import o from\"../../../../rest/support/ImageHistogramParameters.js\";import i from\"./RasterLayerAdapter.js\";let n=class extends i{generateRasterInfo(t){const e=t?.rasterFunction;try{return this.layer.generateRasterInfo(e,{signal:t?.signal})}catch{return Promise.resolve(this.layer.serviceRasterInfo)}}async estimateStatisticsHistograms(t){const{layer:e}=this,s=e.mosaicRule?.multidimensionalDefinition?.[0]?.variableName??\"\",i=`${t?.rasterFunction?.functionName??\"default\"}${s}`,n=this._statsCache.get(i);if(n)return n;let{width:c,height:m,pixelSize:l}=e.rasterInfo,p=1;for(;c>2e3||m>2e3;)c/=2,m/=2,p*=2;const u=t?.rasterFunction??e.rasterFunction,{fullExtent:h,mosaicRule:g}=e;l=new r(l.x*p,l.y*p,h.spatialReference);const f=new o({geometry:h,pixelSize:l,renderingRule:u,mosaicRule:g});let d;if(e.capabilities.operations.supportsComputeStatisticsHistograms)d=await e.computeStatisticsHistograms(f,t);else{const{histograms:s}=await e.computeHistograms(f,t);d={statistics:a(s),histograms:s}}return d&&this._statsCache.put(i,d),d}supportsMultidirectionalHillshade(){return this.layer.version>=10.81}load(t){return this.addResolvingPromise(this.layer.load(t).then((()=>{this.generateRasterInfo({rasterFunction:this.rasterFunction,signal:t?.signal}).then((t=>this.rasterInfo=t))}))),Promise.resolve(this)}};t([e()],n.prototype,\"layer\",void 0),n=t([s(\"esri.smartMapping.raster.support.adapters.ImageryLayerAdapter\")],n);const c=n;export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Error.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../../geometry/Extent.js\";import{estimateStatisticsHistograms as o}from\"../../../../layers/support/rasterFunctions/stretchUtils.js\";import i from\"./RasterLayerAdapter.js\";let n=class extends i{async generateRasterInfo(t){const{layer:r}=this,e=t?.rasterFunction;if(\"imagery-tile\"===r.type&&e)try{return await r.generateRasterInfo(e,{signal:t?.signal})}catch{return r.serviceRasterInfo}return this.rasterInfo}async estimateStatisticsHistograms(t){const{layer:e}=this,a=e.multidimensionalDefinition?.[0]?.variableName??\"\",s=`${e.rasterFunction?.functionName??\"default\"}${a}`,i=this._statsCache.get(s);if(i)return i;const{raster:n}=e,{extent:l,width:h,height:c}=m(n.rasterInfo),{pixelBlock:p}=await e.fetchPixels(l,h,c,t);if(null==p)throw new r(\"raster-layer-adapter\",\"Unable to estimate histograms\");const f=o(p);return f&&this._statsCache.put(s,f),f}supportsMultidirectionalHillshade(){return!0}load(t){return this.addResolvingPromise(this.layer.load(t).then((()=>this.rasterInfo=this.layer.raster.rasterInfo))),Promise.resolve(this)}};function m(t,r=1e3){const{pyramidScalingFactor:e,maximumPyramidLevel:a}=t.storageInfo;let{extent:o,width:i,height:n,pixelSize:m}=t,l=Math.max(0,Math.ceil(Math.log(Math.max(i,n)/r)/Math.log(e))-1),h=0,c=0;if(l<=a){const t=e**l;i=Math.floor(i/t),n=Math.floor(n/t)}else l=0,i=Math.min(i,r),n=Math.min(n,r),h=Math.max(Math.floor(i/2-500),0),c=Math.max(Math.floor(n/2-500),0),o=new s({xmin:o.xmin+h*m.x,xmax:Math.min(o.xmax,o.xmin+h*m.x*r),ymin:o.ymin+c*m.y,ymax:Math.min(o.ymax,o.ymin+c*m.y*r)});return{extent:o,width:i,height:n,origin:{x:h,y:c}}}t([e()],n.prototype,\"layer\",void 0),n=t([a(\"esri.smartMapping.raster.support.adapters.ImageryTileLayerAdapter\")],n);const l=n;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../../core/Error.js\";import{getSupportedRendererTypes as r,getFunctionColorRamp as a,matchPresetRenderer as t,createDefaultRenderer as s,getDefaultBandCombination as n}from\"../../../renderers/support/rasterRendererHelper.js\";import i from\"./adapters/ImageryLayerAdapter.js\";import o from\"./adapters/ImageryTileLayerAdapter.js\";const l={imagery:{adapter:i,label:\"ImageryLayer\"},\"imagery-tile\":{adapter:o,label:\"ImageryTileLayer\"},wcs:{adapter:o,label:\"WCSLayer\"}},c={\"raster-stretch\":\"raster-stretch\",\"unique-value\":\"raster-unique-value\",\"raster-rgb\":\"raster-rgb\",\"class-breaks\":\"raster-class-breaks\",\"raster-colormap\":\"raster-colormap\",\"raster-shaded-relief\":\"raster-shaded-relief\",\"vector-field\":\"raster-vector-field\",flow:\"raster-flow\"},d=Object.keys(l).map((e=>l[e].label));function p(e){if(\"raster-layer-adapter\"===e.type)return e;const r=l[e.type]?.adapter;return null==r?null:new r({layer:e})}async function u(e){const n=p((e=await y(e)).layer),i=await n.generateRasterInfo(e),o=r(i,!0).map((e=>c[e])),l=n.layer,d=\"imagery-tile\"===l.type?a(l.raster):void 0,u=\"wcs\"!==l.type?l.presetRenderers:void 0,m=t({variableName:e.variableName,rasterFunctionName:e.rasterFunction?.functionName,presetRenderers:u}),f=m?.renderer??s(i,{rasterFunctionColorRamp:d,variableName:e.variableName}),{bandCount:b}=i;return b>1&&o.push(\"raster-rgb\"),!o.includes(\"raster-class-breaks\")&&1===b&&+n.layer?.version>=10.3&&o.push(\"raster-class-breaks\"),{supportedTypes:o,defaultRenderer:f}}async function m(e){const r=p((e=await y(e)).layer),a=await r.generateRasterInfo(e),{layer:s}=r;if(\"wcs\"!==s.type&&s.presetRenderers?.length){const r=t({variableName:e.variableName,rasterFunctionName:e.rasterFunction?.functionName,presetRenderers:s.presetRenderers});if(r?.bandIds?.length)return r.bandIds}return n(a)}async function y(r){const{layer:a}=r;if(!a)throw new e(\"raster-renderer-creator:missing-parameters\",\"'layer' parameter is required\");const t=p(a);if(null==t)throw new e(\"raster-renderer-creator:invalid-parameters\",\"'layer' must be one of these types: \"+d.join(\", \"));await t.load();const s=r.rasterFunction??r.renderingRule??a.rasterFunction;return await t.updateRasterInfo({rasterFunction:s,signal:r.signal}),{...r,layer:t,rasterFunction:s}}export{p as createRasterLayerAdapter,m as getDefaultBandCombination,u as getSupportedRendererInfo,y as processRasterRendererParameters};\n"],"names":["async","l","t","r","o","layer","supportsMultidirectionalHillshade","hillshadeType","e","serviceRasterInfo","scalingType","colorRamp","s","renderer","a","constructor","super","arguments","this","type","_statsCache","rasterInfo","updateRasterInfo","generateRasterInfo","rasterFunction","updateRasterInfoWithEstimatedStats","estimateStatisticsHistograms","statistics","histograms","prototype","readOnly","i","n","signal","Promise","resolve","mosaicRule","multidimensionalDefinition","variableName","functionName","get","width","c","height","m","pixelSize","p","u","fullExtent","h","g","x","y","spatialReference","f","geometry","renderingRule","d","capabilities","operations","supportsComputeStatisticsHistograms","computeStatisticsHistograms","computeHistograms","put","version","load","addResolvingPromise","then","raster","extent","length","undefined","pyramidScalingFactor","maximumPyramidLevel","storageInfo","Math","max","ceil","log","floor","min","xmin","xmax","ymin","ymax","origin","pixelBlock","fetchPixels","imagery","adapter","label","wcs","flow","Object","keys","map","presetRenderers","rasterFunctionName","rasterFunctionColorRamp","bandCount","b","push","includes","supportedTypes","defaultRenderer","bandIds","join"],"sourceRoot":""}