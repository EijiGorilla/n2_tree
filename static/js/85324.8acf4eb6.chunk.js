"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[85324,91720],{4955:(t,e,n)=>{function o(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function l(t,e){return"number"==typeof t?t:t?.stops?.length?function(t){let e=0,n=0;for(let o=0;o<t.length;o++){const l=t[o].size;"number"==typeof l&&(e+=l,n++)}return e/n}(t.stops):e}function i(t,e){if(!e)return t;const n=e.filter((t=>"size"===t.type)).map((e=>{const{maxSize:n,minSize:o}=e;return(l(n,t)+l(o,t))/2}));let o=0;const i=n.length;if(0===i)return t;for(let l=0;l<i;l++)o+=n[l];const s=Math.floor(o/i);return Math.max(s,t)}function s(t){const e=t?.renderer,n=t?.pointerType,l="touch"===n?9:6;if(!e)return l;const s="visualVariables"in e?i(l,e.visualVariables):l;if("simple"===e.type)return o(s,e.symbol);if("unique-value"===e.type){let t=s;return e.uniqueValueInfos?.forEach((e=>{t=o(t,e.symbol)})),t}if("class-breaks"===e.type){let t=s;return e.classBreakInfos.forEach((e=>{t=o(t,e.symbol)})),t}return"dot-density"===e.type||e.type,s}n.d(e,{o:()=>s})},22579:(t,e,n)=>{n.d(e,{T:()=>l});var o=n(76931);function l(t){let e=0,n=0,l=0;return t?("cim"===t.type&&t.data.symbol&&"symbolLayers"in t.data.symbol&&t.data.symbol.symbolLayers&&t.data.symbol.symbolLayers.map((t=>{"CIMVectorMarker"===t.type&&t.anchorPoint&&(Math.abs(t.anchorPoint.x)>e&&(e=t.anchorPoint.x),Math.abs(t.anchorPoint.y)>n&&(n=t.anchorPoint.y),null!=t.size&&t.size>l&&(l=t.size))})),e=(0,o.Lz)(e),n=(0,o.Lz)(n),l=(0,o.Lz)(l),{offsetX:e,offsetY:n,size:l}):{offsetX:e,offsetY:n,size:l}}},32186:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var o,l=n(35143),i=n(42553),s=n(46053),a=(n(81806),n(76460),n(47249),n(85842)),r=n(34761),c=n(13191),u=n(60008),h=n(4336),p=n(9392),y=n(52896);let f=o=class extends i.A{constructor(t){super(t),this.translation=(0,p.vt)(),this.rotationAxis=(0,p.ci)(y.up),this.rotationAngle=0,this.scale=(0,p.fA)(1,1,1)}get rotation(){return(0,y.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,p.o8)((0,y.yo)(t)),this.rotationAngle=(0,y.g7)(t)}get localMatrix(){const t=(0,c.vt)();return(0,u.x8)(d,(0,y.yo)(this.rotation),(0,y.$I)(this.rotation)),(0,r.o1)(t,d,this.translation,this.scale),t}get localMatrixInverse(){return(0,r.B8)((0,c.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,r.t2)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,p.o8)(this.translation),rotationAxis:(0,p.o8)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,p.o8)(this.scale)};return new o(t)}};(0,l._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"translation",void 0),(0,l._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAxis",void 0),(0,l._)([(0,s.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],f.prototype,"rotationAngle",void 0),(0,l._)([(0,s.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],f.prototype,"scale",void 0),(0,l._)([(0,s.MZ)()],f.prototype,"rotation",null),(0,l._)([(0,s.MZ)()],f.prototype,"localMatrix",null),(0,l._)([(0,s.MZ)()],f.prototype,"localMatrixInverse",null),f=o=(0,l._)([(0,a.$)("esri.geometry.support.MeshTransform")],f);const d=(0,h.vt)(),g=f},37159:(t,e,n)=>{n.d(e,{w:()=>a});var o=n(35143),l=n(91967),i=n(46053),s=(n(81806),n(76460),n(47249),n(85842));let a=class extends l.default{constructor(t){super(t),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter((t=>t.visible&&!t.readOnly))}clearInputValues(){this.allFields.forEach((t=>t.clearInputValue()))}};(0,o._)([(0,i.MZ)()],a.prototype,"sketchOptions",void 0),(0,o._)([(0,i.MZ)()],a.prototype,"visibleElements",null),(0,o._)([(0,i.MZ)()],a.prototype,"helpMessage",void 0),(0,o._)([(0,i.MZ)()],a.prototype,"viewType",void 0),(0,o._)([(0,i.MZ)()],a.prototype,"allFields",null),(0,o._)([(0,i.MZ)()],a.prototype,"editableFields",null),a=(0,o._)([(0,s.$)("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],a)},55754:(t,e,n)=>{n.d(e,{V:()=>s,t:()=>a});var o=n(31633),l=n(76797),i=n(4955);function s(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new l.default,s=0;if("2d"===n.type)s=e*(n.resolution??0);else if("3d"===n.type){const l=n.overlayPixelSizeInMapUnits(t),i=n.basemapSpatialReference;s=null==i||i.equals(n.spatialReference)?e*l:(0,o.GA)(i)/(0,o.GA)(n.spatialReference)}const a=t.x-s,r=t.y-s,c=t.x+s,u=t.y+s,{spatialReference:h}=n;return i.xmin=Math.min(a,c),i.ymin=Math.min(r,u),i.xmax=Math.max(a,c),i.ymax=Math.max(r,u),i.spatialReference=h,i}function a(t,e,n){const o=n.toMap(t);return null!=o&&s(o,(0,i.o)(),n,r).intersects(e)}const r=new l.default},68655:(t,e,n)=>{n.d(e,{Do:()=>r,Kt:()=>a,ob:()=>s});var o=n(9392),l=n(29772),i=n(23739);function s(t){return(0,i.mh)(t)??(0,l.Xg)(t)}function a(t,e){return(0,i.Og)(t,e)??(0,l.ll)(t,e)}function r(t,e,n){return c[0]=t[0],c[1]=t[1],c[2]=3===t.length?t[2]:0,u[0]=e[0],u[1]=e[1],u[2]=3===e.length?e[2]:0,(0,i.n3)(c,u,n)??(0,l.sT)(c,u,n)}const c=(0,o.vt)(),u=(0,o.vt)()},91720:(t,e,n)=>{n.d(e,{l:()=>_});var o=n(35143),l=n(91967),i=n(54099),s=n(68134),a=n(76931),r=n(46053),c=(n(81806),n(76460),n(47249),n(85842)),u=n(19555),h=n(20664),p=n(9392),y=n(9624),f=n(64232),d=n(12482),g=n(84202),b=n(731),m=n(22579),v=n(55754);let _=class extends l.default{set graphic(t){this._circleCollisionCache=null,this._originalSymbol=t.symbol,this._set("graphic",t),this.attachSymbolChanged()}get elevationInfo(){const{layer:t}=this.graphic,e=t&&"elevationInfo"in t?t.elevationInfo:null,n=(0,d.ky)(this.graphic),o=e?e.offset:0;return new b.A({mode:n,offset:o})}set focusedSymbol(t){t!==this._get("focusedSymbol")&&(this._set("focusedSymbol",t),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(t){t!==this._get("grabbing")&&(this._set("grabbing",t),this._updateGraphicSymbol())}set hovering(t){t!==this._get("hovering")&&(this._set("hovering",t),this._updateGraphicSymbol())}set selected(t){t!==this._get("selected")&&(this._set("selected",t),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:t?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}constructor(t){super(t),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.consumesClicks=!0,this.events=new i.A.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(t){const e=this.graphic;if(!1===e.visible)return null;const n=e.geometry;if(null==n)return null;const o=this._get("focusedSymbol"),l=null!=o?o:e.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,t,n,l):this._intersectDistance3D(this.view,t,e)}attach(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,s.watch)((()=>this.graphic?.symbol),(t=>{null!=t&&t!==this.focusedSymbol&&t!==this._originalSymbol&&(this._originalSymbol=t,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))}),s.sync)}detachSymbolChanged(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(t,e,n,o){if(null==(o=o||(0,g.SF)(n)))return null;let l=this._circleCollisionCache;if("point"===n.type&&"cim"===o.type&&"CIMPointSymbol"===o.data.symbol?.type&&o.data.symbol.symbolLayers){const{offsetX:l,offsetY:i,size:s}=(0,m.T)(o),r=(0,a.WA)(e,S),c=s/2,h=t.toScreen(n),p=h.x+l,y=h.y+i;return(0,u.hG)(r,[p,y])<c*c?1:null}if("point"!==n.type||"simple-marker"!==o.type)return(0,v.t)(e,n,t)?1:null;if(null==l||!l.originalPoint.equals(n)){const e=n,i=t.spatialReference;if((0,y.canProjectWithoutEngine)(e.spatialReference,i)){const t=(0,y.project)(e,i);l={originalPoint:e.clone(),mapPoint:t,radiusPx:(0,a.Lz)(o.size)},this._circleCollisionCache=l}}if(null!=l){const n=(0,a.WA)(e,S),i=t.toScreen?.(l.mapPoint);if(!i)return null;const s=l.radiusPx,r=i.x+(0,a.Lz)(o.xoffset),c=i.y-(0,a.Lz)(o.yoffset);return(0,u.hG)(n,[r,c])<s*s?1:null}return null}_intersectDistance3D(t,e,n){const o=t.toMap(e,{include:[n]});return o&&(0,f.g)(o,M,t.renderSpatialReference)?(0,h.j)(M,t.state.camera.eye):null}};(0,o._)([(0,r.MZ)({constructOnly:!0,nonNullable:!0})],_.prototype,"graphic",null),(0,o._)([(0,r.MZ)()],_.prototype,"elevationInfo",null),(0,o._)([(0,r.MZ)({constructOnly:!0,nonNullable:!0})],_.prototype,"view",void 0),(0,o._)([(0,r.MZ)({value:null})],_.prototype,"focusedSymbol",null),(0,o._)([(0,r.MZ)({constructOnly:!0})],_.prototype,"layer",void 0),(0,o._)([(0,r.MZ)()],_.prototype,"interactive",void 0),(0,o._)([(0,r.MZ)()],_.prototype,"selectable",void 0),(0,o._)([(0,r.MZ)()],_.prototype,"grabbable",void 0),(0,o._)([(0,r.MZ)({value:!1})],_.prototype,"grabbing",null),(0,o._)([(0,r.MZ)()],_.prototype,"dragging",void 0),(0,o._)([(0,r.MZ)()],_.prototype,"hovering",null),(0,o._)([(0,r.MZ)({value:!1})],_.prototype,"selected",null),(0,o._)([(0,r.MZ)()],_.prototype,"cursor",void 0),_=(0,o._)([(0,c.$)("esri.views.interactive.GraphicManipulator")],_);const M=(0,p.vt)(),S=(0,a.gs)()},95735:(t,e,n)=>{n.d(e,{A:()=>_,HA:()=>P,IA:()=>S,Ue:()=>M,mu:()=>x,sZ:()=>z,wG:()=>I});var o=n(98773),l=n(54901),i=n(15941),s=n(24648),a=n(68134),r=n(31633),c=n(20664),u=n(9392),h=n(58905),p=n(32186),y=n(99773),f=n(80963),d=n(45417),g=n(82307),b=n(51742),m=n(69077),v=n(89646);function _(t){const e=new b.default(t());return e.addHandles((0,a.watch)((()=>t()),(t=>{let{view:n,options:o,info:l}=t;e.view=n,void 0!==o&&(e.options=o),void 0!==l&&(e.info=l)}))),e}function M(t,e){const n=(0,y.Hq)(e.vertexSpace),{scale:o,orientation:l}=t,{transform:i}=e,a=function(t){if(!t)return 0;const e=C(t.rotationAxis);return null!=e?e*t.rotationAngle:null}(i);n&&null!=a?(l.actual=(0,s.Wq)(a,"degrees","arithmetic"),l.visible=!0):(l.actual=null,l.visible=!1),n?(o.actual=(0,s.LF)(Z(i)),o.visible=!0):(o.actual=null,o.visible=!1)}function S(t,e,n){if(!e||!(0,y.Hq)(e.vertexSpace))return;const o=e.transform??=new p.default;(function(t,e,n){const o=(0,v.Ef)(t.orientation.actual),l=C(e.rotationAxis);if(null==o||null==l)return;const i=e.rotationAngle,s=o*l,a=(o-i)*l;i!==s&&(n?.onRotateStart(0),e.rotationAngle=s,n?.onRotate(a),n?.onRotateStop(a))})(t,o,n),function(t,e,n){const o=t.scale.actual?.value,l=Z(e);if(null==o||o===l)return;const{scale:i}=e;let s;if(0===l)s=(0,u.o8)(u.Un);else{const t=o/l;s=(0,c.h)((0,u.vt)(),i,t)}n?.onScaleStart(i[0],i[1],i[2]),e.scale=s,n?.onScale(s[0],s[1],s[2]),n?.onScaleStop(s[0],s[1],s[2])}(t,o,n)}function x(t,e){const{x:n,y:o,z:l}=e,{x:a,y:c,z:u}=function(t,e){let n,o;t.geographic?(n=(0,v.hF)(t.longitude.actual),o=(0,v.hF)(t.latitude.actual),(0,f.K8)(e)&&(null!=n&&null!=o?[n,o]=(0,d.lngLatToXY)(n,o,w):null!=n?n=(0,d.lngLatToXY)(n,0,w)[0]:null!=o&&(o=(0,d.lngLatToXY)(0,o,w)[1]))):(n=t.x.actual?.value,o=t.y.actual?.value);const l=t.elevation.actual,i=(0,r.mq)(e);return{x:n,y:o,z:null!=i&&null!=l?(0,s.l3)(l,i):void 0}}(t,e.spatialReference);return{dx:null==a||(0,i.Io)(a,n)?0:a-n,dy:null==c||(0,i.Io)(c,o)?0:c-o,dz:null==u||null==l||(0,i.Io)(u,l)?0:u-l}}const w=[0,0];function C(t){return(0,c.I)(t,u.Cb)?1:(0,c.I)(t,A)?-1:null}const A=(0,c.v)((0,u.vt)(),u.Cb);function Z(t){return t?Math.max(...t.scale):1}function I(t,e){return!("key-down"!==t.type||t.key!==g.ac.enterInputMode||!e||!function(t){const e=t?.sketchOptions;if(!e)return!1;const{inputEnabled:n,visibleElements:o}=e.tooltips;return n&&!0===t.editableFields.some((t=>{let{name:e}=t;return"x"===e||"y"===e?o.coordinates:o[e]}))}(e.info))&&(e.enterInputMode(),t.preventDefault(),t.stopPropagation(),!0)}function z(t,e){let n=null;return(0,l.vE)([t.on("paste",(async l=>{n?.abort(),n=(0,o.UT)((async()=>{(0,h.isLoaded)()||await(0,h.load)(),P(l,t.info,e)}))})),(0,o.UT)((()=>(0,h.load)())),(0,l.hA)((()=>n?.abort()))])}function P(t,e,n){if(!e||!("geographic"in e))return;const o=t.clipboardData?.getData("text");if(!o)return;const l=e=>{t.stopPropagation(),t.preventDefault(),n?.onBeforePaste(),e(),n?.onAfterPaste()};if(e.geographic){const t=(0,m.X3)(o);t&&l((()=>{e.longitude.applyValue(t.longitude),e.latitude.applyValue(t.latitude)}))}else{const t=(0,m.Nr)(o);t&&l((()=>{e.x.applyValue(t.x),e.y.applyValue(t.y)}))}}}}]);
//# sourceMappingURL=85324.8acf4eb6.chunk.js.map