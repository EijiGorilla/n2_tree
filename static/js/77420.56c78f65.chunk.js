"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[19583,58296,77420,97173],{8794:(e,t,i)=>{i.d(t,{q:()=>a});var s=i(18690),n=i(54099),r=i(81447);class a extends n.A{constructor(){super(...arguments),this._transitionables=null,this._clips=null,this._fadeTransition=null,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get computedOpacity(){return this._fadeTransition?.computedOpacity??this.opacity}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get fadeTransitionEnabled(){return null!==this._fadeTransition}set fadeTransitionEnabled(e){!this._fadeTransition&&e?(this._fadeTransition=new r.A({opacity:this.opacity,visible:this.visible}),this.addTransitionable(this._fadeTransition)):this._fadeTransition&&!e&&(this.removeTransitionable(this._fadeTransition),this._fadeTransition=null)}get inFadeTransition(){return this._fadeTransition?.transitioning??!1}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this._fadeTransition&&(this._fadeTransition.opacity=this._opacity),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t?.trashDisplayObject(this)}get transforms(){return null==this._transforms&&(this._transforms=this._createTransforms()),this._transforms}get transitioning(){return this.isTransitioning()}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this._fadeTransition&&(this._fadeTransition.visible=this._visible),this.requestRender())}get hasLabels(){return!1}get hasHighlight(){return!1}get hasBlending(){return!1}addTransitionable(e){this._transitionables??=[],this._transitionables.push(e),this.requestRender()}removeTransitionable(e){e.endTransition(),this._transitionables&&(0,s.TF)(this._transitionables,e),this.requestRender()}fadeIn(){this.fadeTransitionEnabled=!0;const e=this._fadeTransition.fadeIn();return this.opacity=1,this.requestRender(),e}fadeOut(){this.fadeTransitionEnabled=!0;const e=this._fadeTransition.fadeOut();return this.opacity=0,this.requestRender(),e}endTransitions(){if(this._transitionables){for(const e of this._transitionables)e.endTransition();this.requestRender()}}beforeRender(e){this.transitionStep(e.deltaTime,e.state.scale),this.setTransform(e.state)}afterRender(e){this.transitioning&&this.requestRender()}remove(){this.parent?.removeChild(this)}setTransform(e){}processRender(e){this.stage&&(this._fadeTransition?.computedVisible??this.visible)&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.endTransitions(),this.onDetach(),this.emit("detach")}isTransitioning(){return this._transitionables?.some((e=>e.transitioning))??!1}transitionStep(e,t){if(this._transitionables)for(const i of this._transitionables)i.transitionStep(e,t)}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}},19583:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(35143),n=i(91967),r=i(68134),a=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),l=i(75635);function d(e,t){const i={};for(const s of t){const t=e.get(s);t&&(i[t.name]=t.value)}return i}let c=class extends n.default{constructor(e){super(e),this.followingMode="follow-both",this.layer=null,this.seekLength=10,this.view=null}initialize(){this.addHandles([(0,r.watch)((()=>this.layer),(e=>{e&&e.load().then((()=>this._followTelemetry())).catch((()=>{}))}),r.initial),(0,r.watch)((()=>[this.followingMode]),(()=>this._followTelemetry()),r.initial)])}get _layerView(){return this.layer&&this.view?this.view.allLayerViews.find((e=>e.layer===this.layer))??null:null}get buffered(){return this.layer?.buffered||0}get currentTime(){return this.layer?.currentTime||0}get duration(){return this.layer?.duration||0}get ended(){return this.layer?.ended??!0}get metadata(){const e=this.layer?.metadata;return e?{missionInfo:d(e,[l.a1.MissionId,l.a1.PrecisionTimeStamp]),platformInfo:d(e,[l.a1.PlatformTailNumber,l.a1.PlatformTrueAirspeed,l.a1.PlatformCallSign,l.a1.PlatformDesignation,l.a1.PlatformGroundRange]),frameInfo:d(e,[l.a1.FrameCenterElevation,l.a1.FrameCenterLatitude,l.a1.FrameCenterLongitude])}:null}get playing(){return this.layer?.playing??!1}get state(){return this.layer?.loadError?"error":this.layer?.state}play(){this.layer?.play()}pause(){this.layer?.pause()}seekBackward(){if(this.layer){const e=this.layer.currentTime-this.seekLength;e<=0?this.layer.reset():this.layer.setCurrentTime(e)}}seekForward(){if(this.layer){const e=this.layer.currentTime+this.seekLength;e>=this.layer.duration?this.layer.reset():this.layer.setCurrentTime(e)}}seekToBeginning(){this.layer?.setCurrentTime(0)}seekToEnding(){this.layer?.setCurrentTime(this.layer.duration)}seekTo(e){this.layer?.setCurrentTime(e)}toggleSensorDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.sensorLocation=!this._layerView.visibleTelemetryElements.sensorLocation)}toggleSensorSightLineDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.lineOfSight=!this._layerView.visibleTelemetryElements.lineOfSight)}toggleFrameDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frame=!this._layerView.visibleTelemetryElements.frame)}toggleSensorTrailDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.sensorTrail=!this._layerView.visibleTelemetryElements.sensorTrail)}toggleFrameCenterDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frameCenter=!this._layerView.visibleTelemetryElements.frameCenter)}toggleFrameOutlineDisplay(){this._layerView?.visibleTelemetryElements&&(this._layerView.visibleTelemetryElements.frameOutline=!this._layerView.visibleTelemetryElements.frameOutline)}changePlaybackSpeed(e){this.layer&&(this.layer.playbackRate=e)}changeGraphicsColor(e){this._layerView&&(this._layerView.symbolColor=e)}_followTelemetry(){this.removeHandles("follow"),this.view&&this.layer&&this.addHandles((0,r.watch)((()=>this.layer?.telemetry),(()=>{const e=[],t="follow-sensor"===this.followingMode||"follow-both"===this.followingMode,i="follow-frame"===this.followingMode||"follow-both"===this.followingMode;t&&this.layer?.telemetry.sensorLocation&&e.push(this.layer.telemetry.sensorLocation),i&&this.layer?.telemetry.frameCenter&&e.push(this.layer.telemetry.frameCenter),e.length&&this.view?.goTo(e).catch((()=>{}))}),r.initial),"follow")}};(0,s._)([(0,a.MZ)()],c.prototype,"_layerView",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"buffered",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"currentTime",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"duration",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"ended",null),(0,s._)([(0,a.MZ)()],c.prototype,"followingMode",void 0),(0,s._)([(0,a.MZ)()],c.prototype,"layer",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"metadata",null),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"playing",null),(0,s._)([(0,a.MZ)()],c.prototype,"seekLength",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],c.prototype,"state",null),(0,s._)([(0,a.MZ)()],c.prototype,"view",void 0),c=(0,s._)([(0,o.$)("esri.widgets.VideoPlayer.VideoPlayerViewModel")],c);const h=c},21904:(e,t,i)=>{i.d(t,{m:()=>l});var s=i(99486),n=i(99702),r=i(85827),a=i(17400),o=i(8794);class l extends o.q{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this._children=[],this._childrenObservable=new n.I,this._effectView=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get children(){return(0,s.gc)(this._childrenObservable),this._children}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new a.$B,this.addTransitionable(this._effectView)),this._effectView.effect=e,this.requestRender())}get highlightGradient(){return this._highlightGradient}set highlightGradient(e){this._highlightGradient=e,this.requestRender()}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some((e=>e.hasHighlight))}get hasLabels(){return this.children.some((e=>e.hasLabels))}get requiresDedicatedFBO(){return this.children.some((e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode))}get isReady(){return this.children.every((e=>e.isReady))}get sortFunction(){return this._sortFunction}set sortFunction(e){this._sortFunction=e,e&&(this._needsSort=!0)}doRender(e){const t=this.createRenderParams(e),{painter:i}=t;i.beforeRenderLayer(t,this._clips?.length?255:0,this.computedOpacity),this.renderChildren(t),i.afterRenderLayer(t,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length;if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),this._childrenObservable.notify(),e}contains(e){return(0,s.gc)(this._childrenObservable),this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0,this._childrenObservable.notify()}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,this._childrenObservable.notify(),t}beforeRender(e){super.beforeRender(e),this.sortFunction&&this._needsSort&&(this.children.sort(this.sortFunction),this._needsSort=!1,this._childrenObservable.notify());for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{displayViewScreenMat3:(0,r.vt)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}isTransitioning(){return super.isTransitioning()||this.children.some((e=>e.transitioning))}}},30599:(e,t,i)=>{i.r(t),i.d(t,{default:()=>de});var s=i(35143),n=i(53084),r=i(68134),a=i(46053),o=(i(81806),i(76460),i(85842)),l=i(65256),d=i(69539),c=i(48053),h=i(91967),u=i(54099),p=i(30726),f=i(91291),g=i(21403),y=(i(47249),i(40565)),m=i(76797),v=i(19247),_=i(13312),b=i(94454),w=i(23290),C=i(88235),M=i(54154),T=i(3717),P=i(37551),O=i(46242),L=i(51034),S=(i(50076),i(52394),i(15434),i(59784),i(86560),i(13442),i(28808),i(14522),i(89189),i(66388),i(65215),i(23701),i(5095),i(62484),i(15941),i(61425),i(3789),i(5568),i(80963),i(62032),i(89425),i(15709),i(88764),i(9435),i(50724),i(94046),i(94168),i(73988),i(27847),i(33049),i(4754),i(31385),i(278),i(71687),i(6134),i(9190),i(5104),i(41704),i(16083),i(27150),i(19313),i(59422),i(71447),i(84202),i(48988),i(17400),i(81447),i(61551),i(28608),i(93345),i(61247),i(61678),i(89241),i(84662),i(35048),i(63584),i(99588),i(19457),i(83531),i(29492),i(76418),i(8254),i(47709),i(3825),i(90534),i(29234),i(56789),i(32743),i(98590),i(5096),i(72729),i(12331),i(16946),i(89179),i(28972),i(69543),i(90113),i(81320),i(13308),i(33346),i(13720),i(88075),i(38550),i(9410),i(57156),i(98112),i(42294),i(81615),i(29300),i(64346),i(26455),i(4480),i(46405),i(41406),i(34781),i(86955),i(33721),i(68009),i(69679),i(38983),i(83755),i(73548),i(14556),i(55171),i(13692),i(28606)),E=(i(98773),i(19451),i(57105),i(31633),i(34111),i(7724),i(482),i(86599),i(63885),i(5883)),V=i(46901),R=i(23717),k=i(88684),K=i(97055),x=i(28914);const Z=new d.default("#000");let A;const F=.01;let D=class extends h.default{};D=(0,s._)([(0,o.$)("esri.views.VideoView.Base")],D);let I=class extends((0,P.g)((0,T.u)(u.A.EventedMixin(f.A.EsriPromiseMixin(D))))){constructor(e){super(e),this._isValid=!1,this.stage=null,this.layer=null,this.navigation=new k.default,this.ready=!1,this.stateManager=new E.O({constraints:new L.A({view:this,minScale:1,maxScale:F})}),this.spatialReference=new _.default({wkid:0}),this.type="2d",this.ui=new x.A,this.addHandles([(0,r.watch)((()=>this.preconditionsReady),(e=>e?this._startup():this._teardown())),(0,r.watch)((()=>this.layer),(()=>this.addResolvingPromise((0,r.whenOnce)((()=>this.ready)))),r.initial),(0,r.watch)((()=>[this.layer?.effect,this._overlayContainer,this.effect]),(()=>{this._overlayContainer&&(this._overlayContainer.effect=this.effect??this.layer?.effect??null)}),r.syncAndInitial),(0,r.watch)((()=>this.videoSize),(e=>{let[t,i]=e;this._extent&&t&&i&&(this._extent.xmax=t,this._extent.ymax=i)}))])}initialize(){this.addResolvingPromise(async function(){const[,{Stage:e}]=await Promise.all([i.e(44856).then(i.bind(i,22475)),Promise.all([i.e(8995),i.e(29088),i.e(17560),i.e(37356),i.e(20742)]).then(i.bind(i,37430))]);A=e}().then((()=>(this._isValid=!0,(0,r.whenOnce)((()=>this.ready))))))}destroy(){this._teardown()}get constraintsInfo(){return{lods:null,spatialReference:this.spatialReference}}get effect(){return this.layer?.effect}set effect(e){this._override("effect",e)}get preconditionsReady(){return!(!this._isValid||0===this.width||0===this.height||0===this.videoSize[0]||0===this.videoSize[1])}get rendering(){return this.stage?.renderRequested??!1}get videoSize(){if(!this.layer?.videoWidth||!this.layer?.videoHeight)return[0,0];const[e,t]=this.size,i=(this.layer?.videoWidth||0)/(this.layer?.videoHeight||0),s=t*i,n=e/i;return e/t>=1?i>=1?s<=e?[s,t]:[e,n]:n<=t?[e,n]:[s,t]:i>=1?n<=t?[e,n]:[s,t]:s<=e?[s,t]:[e,n]}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}_startup(){if(!this.layer)return;const e=this._getViewpoint();this.stateManager.startup(e,this.size,e.targetGeometry.spatialReference),this.stage=new A(this.surface,{renderingOptions:this.renderingOptions,backgroundColor:Z}),this._prepareStage(this.stage);const t=new O.A({view:this});this._set("animationManager",t);const i=new S.A({view:this,animationManager:t});this._set("mapViewNavigation",i),this._updateConstraints(),this.frameTask.start(),this._set("ready",!0)}_teardown(){this.stage.destroy(),this.stage=null,this._videoElementView=null,this._overlayContainer.removeAllChildren(),this._overlayContainer=null,this.removeAllHandles(),this._set("ready",!1),this.stateManager.teardown(),this.frameTask.stop(),this.stationaryManager.clear(),this.frameTask=(0,p.pR)(this.frameTask),this.goToManager.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}_getViewpoint(){return new c.default({targetGeometry:new v.default({x:this.videoSize[0]/2,y:this.videoSize[1]/2,spatialReference:this.spatialReference}),scale:1})}_prepareStage(e){this.addHandles([(0,r.watch)((()=>this.stationary),(t=>e.stationary=t),r.syncAndInitial),(0,r.watch)((()=>this.state.id),(()=>e.state=this.state),r.syncAndInitial),(0,r.watch)((()=>this.renderingOptions),(t=>e.renderingOptions=t),r.syncAndInitial)],"video-view"),this._extent=new m.default({xmin:0,ymin:0,xmax:this.videoSize[0],ymax:this.videoSize[1],spatialReference:{wkid:0}}),this._videoElementView=new w._({element:new M.default({video:this.layer?.videoElement,georeference:new b.default({extent:this._extent}),autoplay:!1}),spatialReference:this.spatialReference});const t=new V.A(this._videoElementView);this._overlayContainer=new R.A,this._overlayContainer.addChild(t),this.stage.addChild(this._overlayContainer)}_updateConstraints(){this._updateZoomConstraints(),this._updatePanConstraints()}_updateZoomConstraints(){const e=this.videoSize,t=Math.max(e[0]/this.size[0],e[1]/this.size[1]),i=[];for(let n=t;n>F;n/=2)i.push(n);i.push(F);const{lods:s}=C.default.create({scales:i});this.constraints.set({lods:s,minScale:t})}_updatePanConstraints(){const e=e=>{if(!e.targetGeometry)return e;const[t,i]=this.videoSize,s=t*e.scale/2,n=i*e.scale/2,r=e.targetGeometry.clone();return r.x=Math.max(s,Math.min(t-s,r.x)),r.y=Math.max(n,Math.min(i-n,r.y)),e.targetGeometry=r,e};this.constraints.customConstraints.add({constrain:e,applyPanConstraint:e})}};(0,s._)([(0,a.MZ)()],I.prototype,"_overlayContainer",void 0),(0,s._)([(0,a.MZ)()],I.prototype,"_isValid",void 0),(0,s._)([(0,a.MZ)()],I.prototype,"constraintsInfo",null),(0,s._)([(0,a.MZ)()],I.prototype,"effect",null),(0,s._)([(0,a.MZ)()],I.prototype,"layer",void 0),(0,s._)([(0,a.MZ)({type:k.default,nonNullable:!0})],I.prototype,"navigation",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],I.prototype,"preconditionsReady",null),(0,s._)([(0,a.MZ)({readOnly:!0})],I.prototype,"ready",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],I.prototype,"rendering",null),(0,s._)([(0,a.MZ)()],I.prototype,"stateManager",void 0),(0,s._)([(0,a.MZ)({readOnly:!0})],I.prototype,"videoSize",null),(0,s._)([(0,a.MZ)()],I.prototype,"scale",null),(0,s._)([(0,a.MZ)()],I.prototype,"spatialReference",void 0),(0,s._)([(0,a.MZ)()],I.prototype,"type",void 0),(0,s._)([(0,a.MZ)(),(0,g.w)((e=>e instanceof K.default?e:(0,y.PZ)(x.A,e)))],I.prototype,"ui",void 0),I=(0,s._)([(0,o.$)("esri.views.VideoView")],I);const z=I;var q=i(22785),$=i(25329),H=i(94126),G=i(98108),B=(i(76099),i(63582)),N=i(54761);const W="esri-video-player",U={base:W,color:`${W}__color-block`,colorActive:`${W}__color-block__active`,colorPicker:`${W}__color-picker`,playerActions:`${W}__actions`,playerControls:`${W}__controls`,playerTimecode:`${W}__timecode`,playerToolbar:`${W}__toolbar`,progress:`${W}__progress`,rangeSlider:`${W}__range-slider`,settings:`${W}__settings`,settingsFlow:`${W}__settings-flow`,slider:`${W}__slider`,sliderProgressContainer:`${W}__slider-progress-container`,videoView:`${W}__video-view`};var j=i(19583);const Q="esri-metadata-table",Y={table:Q,data:`${Q}__data`,emptyState:`${Q}__empty-state`};function J(e){let{viewModel:t,messages:i}=e;const{metadata:s}=t;return s?(0,N.K)("calcite-block",{heading:i.metadata,open:!0},(0,N.K)("calcite-accordion",{appearance:"solid",selectionMode:"single"},(0,N.K)("calcite-accordion-item",{heading:i.missionInfo},(0,N.K)("div",{class:Y.table},Object.keys(s.missionInfo).map((e=>[(0,N.K)("div",{class:Y.data},e),(0,N.K)("div",{class:Y.data},s.missionInfo[e])])))),(0,N.K)("calcite-accordion-item",{heading:i.platformInfo},(0,N.K)("div",{class:Y.table},Object.keys(s.platformInfo).map((e=>[(0,N.K)("div",{class:Y.data},e),(0,N.K)("div",{class:Y.data},s.platformInfo[e])])))),(0,N.K)("calcite-accordion-item",{heading:i.frameInfo},(0,N.K)("div",{class:Y.table},Object.keys(s.frameInfo).map((e=>[(0,N.K)("div",{class:Y.data},e),(0,N.K)("div",{class:Y.data},s.frameInfo[e])])))))):(0,N.K)("calcite-tile",{class:Y.emptyState,description:i.metadataDescription,heading:i.metadataNotLoaded})}function X(e){let{viewModel:t,messages:i}=e;const{state:s,playing:n}=t,r="not-ready"===s||"waiting"===s,a=n?i.pause:i.play,o=(0,N.K)("calcite-action",{active:n,alignment:"center",bind:t,disabled:r,icon:n?"pause-f":"play-f",key:"play",onclick:n?t.pause:t.play,scale:"s",text:a,title:a}),l=i.reverse,d=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"reverse-f",key:"reverse",onclick:t.seekBackward,scale:"s",text:l,title:l}),c=i.forward,h=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"forward-f",key:"forward",onclick:t.seekForward,scale:"s",text:c,title:c}),u=i.beginning,p=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"beginning-f",key:"beginning",onclick:t.seekToBeginning,scale:"s",text:u,title:u}),f=i.end,g=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"end-f",key:"end",onclick:t.seekToEnding,scale:"s",text:f,title:f});return(0,N.K)("calcite-action-bar",{class:U.playerActions,expandDisabled:!0,layout:"horizontal",scale:"s"},[p,d,o,h,g])}const ee={active:null,speed:"1x",quality:"Auto",color:null},te=new d.default([255,127,0]);let ie=null;function se(e){let{viewModel:t,settings:i,messages:s}=e;const{state:n}=t,r="not-ready"===n||"waiting"===n,a=(0,N.K)("calcite-flow-item",{heading:s.playbackSpeed,key:"playback-speed",selected:"speed"===i.active,onCalciteFlowItemBack:()=>{i.active=null}},(0,N.K)("calcite-list",{label:s.playbackSpeed,selectionMode:"single-persist"},[{label:"0.25x",value:.25},{label:"0.5x",value:.5},{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}].map((e=>{let{label:s,value:n}=e;return(0,N.K)("calcite-list-item",{key:s,label:s,onclick:()=>{i.speed=s,t.changePlaybackSpeed(n)},selected:s===i.speed})})))),o=(0,N.K)("calcite-flow-item",{heading:s.quality,key:`Quality (${i.quality})`,selected:"quality"===i.active,onCalciteFlowItemBack:()=>{i.active=null}},(0,N.K)("calcite-list",{label:s.quality,selectionMode:"single-persist"},["Auto"].map((e=>(0,N.K)("calcite-list-item",{key:e,label:e,onclick:()=>{i.quality=e},selected:e===i.quality}))))),l=(0,N.K)("calcite-flow-item",{heading:s.graphics,key:`Graphics (${i.color})`,selected:"color"===i.active,onCalciteFlowItemBack:()=>{i.active=null,i.color=ie?new d.default(ie):null,i.color&&t.changeGraphicsColor(i.color)}},(0,N.K)("calcite-block",{heading:s.color,open:!0},(0,N.K)("calcite-color-picker",{channelsDisabled:!0,format:"hex",savedDisabled:!0,scale:"s",value:i.color?.toHex()??te.toHex(),onCalciteColorPickerChange:e=>{ie=e.currentTarget.value?.toString()}})));return(0,N.K)("div",{class:U.settings},(0,N.K)("calcite-popover",{autoClose:!0,label:s.settings,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"settings-action",scale:"s"},(0,N.K)("calcite-flow",{class:U.settingsFlow,key:"root-flow"},(0,N.K)("calcite-flow-item",{closable:!1,heading:"Settings",key:"root-flow-item",selected:!i.active},(0,N.K)("calcite-list",{label:s.settings},(0,N.K)("calcite-list-item",{key:`Speed (${i.speed})`,label:s.speed,onclick:()=>{i.active="speed"}},(0,N.K)("div",{slot:"content-end"},(0,N.K)("calcite-chip",{label:i.speed,scale:"s"},i.speed)),(0,N.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),(0,N.K)("calcite-list-item",{key:`Quality (${i.quality})`,label:s.quality,onclick:()=>{i.active="quality"}},(0,N.K)("div",{slot:"content-end"},(0,N.K)("calcite-chip",{label:i.quality,scale:"s"},i.quality)),(0,N.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})),(0,N.K)("calcite-list-item",{key:`Graphics (${i.color})`,label:s.graphics,onclick:()=>{i.active="color"}},(0,N.K)("calcite-color-picker-swatch",{color:i.color?.toString()??te.toString(),scale:"s",slot:"content-end"}),(0,N.K)("calcite-icon",{icon:"chevron-right",scale:"s",slot:"content-end"})))),"speed"===i.active?a:null,"quality"===i.active?o:null,"color"===i.active?l:null)),(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:r,icon:"sliders",id:"settings-action",key:"settings",scale:"s",slot:"trigger",text:s.settings}))}function ne(e){return"none"===e.followingMode?"circle-disallowed":"follow-sensor"===e.followingMode?"zoom-to-object":"follow-frame"===e.followingMode?"follow":"video"}function re(e){let{viewModel:t,messages:i,settings:s,toggleMetadata:n}=e;const{state:r}=t,a="not-ready"===r||"waiting"===r,o=(0,N.K)("div",null,(0,N.K)("calcite-popover",{autoClose:!0,label:i.layers,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"layers-action",scale:"s"},(0,N.K)("calcite-panel",{heading:i.layers},(0,N.K)("calcite-list",{label:i.layers,selectionMode:"multiple"},(0,N.K)("calcite-list-item",{label:i.sensor,onclick:()=>{t.toggleSensorDisplay()},selected:!!t.layer?.telemetryDisplay?.sensorLocation}),(0,N.K)("calcite-list-item",{label:i.sightLine,onclick:()=>{t.toggleSensorSightLineDisplay()},selected:!!t.layer?.telemetryDisplay?.lineOfSight}),(0,N.K)("calcite-list-item",{label:i.sensorTrail,onclick:()=>{t.toggleSensorTrailDisplay()},selected:!!t.layer?.telemetryDisplay?.sensorTrail}),(0,N.K)("calcite-list-item",{label:i.frameCenter,onclick:()=>{t.toggleFrameCenterDisplay()},selected:!!t.layer?.telemetryDisplay?.frameCenter}),(0,N.K)("calcite-list-item",{label:i.frameOutline,onclick:()=>{t.toggleFrameOutlineDisplay()},selected:!!t.layer?.telemetryDisplay?.frameOutline}),(0,N.K)("calcite-list-item",{label:i.frame,onclick:()=>{t.toggleFrameDisplay()},selected:!!t.layer?.telemetryDisplay?.frame})))),(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:a,icon:"layers",id:"layers-action",key:"layers",scale:"s",slot:"trigger",text:i.layers})),l=(0,N.K)("div",null,(0,N.K)("calcite-popover",{autoClose:!0,label:i.follow,overlayPositioning:"fixed",placement:"top-end",pointerDisabled:!0,referenceElement:"follow-action",scale:"s"},(0,N.K)("calcite-panel",{heading:i.follow},(0,N.K)("calcite-list",{label:i.follow,selectionMode:"single-persist"},(0,N.K)("calcite-list-item",{label:i.none,onclick:()=>{t.followingMode="none"}},(0,N.K)("calcite-icon",{icon:"circle-disallowed",scale:"s",slot:"content-start"})),(0,N.K)("calcite-list-item",{label:i.sensor,onclick:()=>{t.followingMode="follow-sensor"}},(0,N.K)("calcite-icon",{icon:"zoom-to-object",scale:"s",slot:"content-start"})),(0,N.K)("calcite-list-item",{label:i.frame,onclick:()=>{t.followingMode="follow-frame"}},(0,N.K)("calcite-icon",{icon:"follow",scale:"s",slot:"content-start"})),(0,N.K)("calcite-list-item",{label:i.video,onclick:()=>{t.followingMode="follow-both"},selected:!0},(0,N.K)("calcite-icon",{icon:"video",scale:"s",slot:"content-start"}))))),(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:a,icon:ne(t),id:"follow-action",key:"follow",scale:"s",slot:"trigger",text:i.follow})),d=(0,N.K)(se,{messages:i,settings:s,viewModel:t}),c=(0,N.K)("calcite-action",{alignment:"center",bind:t,disabled:a,icon:"feature-details",key:"metadata",onclick:n,scale:"s",text:i.metadata});return(0,N.K)("calcite-action-bar",{class:U.playerControls,expandDisabled:!0,layout:"horizontal",scale:"s"},[o,l,d,c])}let ae=class extends $.default{constructor(e,t){super(e,t),this._settings=(0,n.clone)(ee),this._metadataVisible=!1,this._slider=new q.default({visibleElements:{labels:!1,rangeLabels:!1},min:0,max:100,values:[0],thumbsConstrained:!1}),this.videoView=new z({container:document.createElement("div"),constraints:{rotationEnabled:!1},ui:{components:["zoom"]}}),this.viewModel=new j.default}initialize(){this.addHandles([(0,r.watch)((()=>this.viewModel.layer),(()=>{this.videoView.layer=this.viewModel.layer}),r.initial),this._slider.on(["thumb-change","thumb-drag"],(e=>{let{value:t}=e;const i=t*this.viewModel.duration/100;this.viewModel.seekTo(i)}))])}loadDependencies(){return Promise.all([(0,H.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),"action-bar":()=>Promise.resolve().then(i.bind(i,143))}),Promise.all([(0,H.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),"action-bar":()=>Promise.resolve().then(i.bind(i,143)),panel:()=>Promise.resolve().then(i.bind(i,32647)),popover:()=>Promise.resolve().then(i.bind(i,51866)),list:()=>Promise.all([i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),icon:()=>Promise.resolve().then(i.bind(i,16702))}),(0,H.W)({action:()=>Promise.resolve().then(i.bind(i,85375)),flow:()=>i.e(87473).then(i.bind(i,87473)),"flow-item":()=>i.e(68445).then(i.bind(i,68445)),icon:()=>Promise.resolve().then(i.bind(i,16702)),list:()=>Promise.all([i.e(38841),i.e(65641),i.e(75802)]).then(i.bind(i,75802)),"list-item":()=>Promise.resolve().then(i.bind(i,70205)),popover:()=>Promise.resolve().then(i.bind(i,51866)),block:()=>i.e(75502).then(i.bind(i,75502)),"color-picker":()=>Promise.all([i.e(78347),i.e(73596),i.e(41763),i.e(46752)]).then(i.bind(i,46752)),chip:()=>Promise.resolve().then(i.bind(i,10239)),"color-picker-swatch":()=>i.e(73596).then(i.bind(i,73596))})]),(0,H.W)({accordion:()=>i.e(41439).then(i.bind(i,41439)),"accordion-item":()=>i.e(17095).then(i.bind(i,17095)),block:()=>i.e(75502).then(i.bind(i,75502)),tile:()=>i.e(9729).then(i.bind(i,9729))}),(0,H.W)({progress:()=>i.e(98144).then(i.bind(i,98144)),panel:()=>Promise.resolve().then(i.bind(i,32647)),scrim:()=>Promise.resolve().then(i.bind(i,32263))})])}get effect(){return this.videoView.effect}set effect(e){this.videoView.effect=e}get icon(){return"video-web"}set icon(e){this._overrideIfSome("icon",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get rotationEnabled(){return this.videoView.constraints.rotationEnabled}set rotationEnabled(e){this.videoView.constraints.rotationEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"compass"]:this.videoView.ui.components.filter((e=>"compass"!==e))}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get zoomEnabled(){return this.videoView.navigation.mouseWheelZoomEnabled}set zoomEnabled(e){this.videoView.navigation.mouseWheelZoomEnabled=e,this.videoView.ui.components=e?[...this.videoView.ui.components,"zoom"]:this.videoView.ui.components.filter((e=>"zoom"!==e))}render(){return(0,N.K)("div",{class:this.classes(U.base,G.D.widget)},(0,N.K)("calcite-panel",{heading:this.layer?.title||"Video Player"},this._renderLoadingScrim(),this._renderBuffering(),this._renderVideoSection(),this._renderActionBar(),this._renderMetadataSection()))}_renderLoadingScrim(){const{state:e}=this.viewModel;return this.videoView.ready?null:(0,N.K)("calcite-scrim",{loading:"error"!==e},"error"===e?this.messages.errorLoadingLayer:null)}_renderBuffering(){const{currentTime:e,buffered:t,duration:i}=this.viewModel,s=t/(i||1),n=e/(i||1);return this.viewModel.ended||s>n?null:(0,N.K)("calcite-progress",{type:"indeterminate"})}_renderVideoSection(){const{buffered:e,currentTime:t,duration:i}=this.viewModel,s=this.videoView.container;if(!s)return null;s.className=U.videoView;const n=e/(i||1),r=t/(i||1);return this._slider.values=[100*r],(0,N.K)("section",{afterCreate:le,bind:s},(0,N.K)("div",{class:U.sliderProgressContainer},(0,N.K)("progress",{class:U.progress,max:"1",value:`${n}`}),(0,N.K)("div",{class:U.slider},this._slider.render())))}_renderActionBar(){return(0,N.K)("div",{class:U.playerToolbar},(0,N.K)(X,{messages:this.messages,viewModel:this.viewModel}),(0,N.K)("div",{class:U.playerTimecode},oe(this.viewModel.currentTime)," / ",oe(this.viewModel.duration)),(0,N.K)(re,{messages:this.messages,settings:this._settings,toggleMetadata:()=>this._metadataVisible=!this._metadataVisible,viewModel:this.viewModel}))}_renderMetadataSection(){return this._metadataVisible?(0,N.K)(J,{messages:this.messages,viewModel:this.viewModel}):null}};function oe(e){return(0,l.Yq)(1e3*Math.round(e),{minute:"2-digit",second:"2-digit"})}function le(e){e.prepend(this)}(0,s._)([(0,a.MZ)()],ae.prototype,"_settings",void 0),(0,s._)([(0,a.MZ)()],ae.prototype,"effect",null),(0,s._)([(0,a.MZ)()],ae.prototype,"icon",null),(0,s._)([(0,a.MZ)()],ae.prototype,"layer",null),(0,s._)([(0,a.MZ)(),(0,B.G)("esri/widgets/VideoPlayer/t9n/VideoPlayer")],ae.prototype,"messages",void 0),(0,s._)([(0,a.MZ)()],ae.prototype,"rotationEnabled",null),(0,s._)([(0,a.MZ)()],ae.prototype,"videoView",void 0),(0,s._)([(0,a.MZ)({type:j.default})],ae.prototype,"viewModel",void 0),(0,s._)([(0,a.MZ)()],ae.prototype,"view",null),(0,s._)([(0,a.MZ)()],ae.prototype,"zoomEnabled",null),ae=(0,s._)([(0,o.$)("esri.widgets.VideoPlayer")],ae);const de=ae},54154:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var s,n=i(35143),r=i(3825),a=i(50076),o=i(79053),l=i(76460),d=i(15941),c=i(68134),h=i(90534),u=i(46053),p=(i(81806),i(47249),i(85842)),f=i(17707),g=i(83622),y=i(85086),m=i(6446),v=i(79453);let _=class extends g.A{constructor(e){super(e),this.autoplay=!0,this.content=null,this.controller=null,this.type="video",this[s]=!0}load(){const e=this.video;return"string"==typeof e?this.addResolvingPromise(Promise.all([this._preProcessVideoUrl(e),i.e(80782).then(i.bind(i,80782))]).then((async e=>{let[t,{default:i}]=e;this.controller=new i,this.controller.playerUrl=t,await(0,c.whenOnce)((()=>this.controller?.element)),this.controller.loop=!0,this.controller.muted=!0,this.controller.playsInline=!0,this.controller.crossOrigin="anonymous",await(0,c.whenOnce)((()=>"can-play"===this.controller?.state)),await this.controller.play(),this.autoplay||this.controller.pause(),this._set("content",this.controller.element)}))):e instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(e).then((()=>{this._set("content",e)}))):this.addResolvingPromise(Promise.reject(new a.default("video-element:invalid-video-type","Invalid video type",{video:e}))),Promise.resolve(this)}get contentWidth(){return this.content?.videoWidth??0}get contentHeight(){return this.content?.videoHeight??0}get currentTime(){return this.controller?.currentTime}set currentTime(e){if(!this.controller)return;const t=(0,d.qE)(e,0,this.controller.duration);this.controller?.setCurrentTime(t)}get duration(){return this.controller?.duration}set video(e){"not-loaded"===this.loadStatus?this._set("video",e):l.A.getLogger(this).error("#video","video cannot be changed after the element is loaded.")}writeVideo(e,t,i,s){if(!e)return void(s?.messages&&s.messages.push(new a.default("video-element:unsupported-video","video source is missing")));const n=function(e){return"string"==typeof e&&!(0,h.isDataProtocol)(e)&&!(0,h.isBlobProtocol)(e)}(e)?e:null;if(!n)return void(s?.messages&&s.messages.push(new a.default("video-element:unsupported-video","video source must be an absolute url")));!(0,h.isAbsolute)(n)&&s?.blockedRelativeUrls&&s.blockedRelativeUrls.push(n);const r=(0,h.makeAbsolute)(n);(0,v.i)(r)?s?.messages&&s.messages.push(new a.default("video-element:unsupported-video","video source cannot be an item resource")):t[i]=r}async _preProcessVideoUrl(e){if((0,h.getProxyRule)(e))return(0,h.addProxy)(e);try{return await(0,r.default)(e,{method:"head"}),e}catch{return(0,h.addProxy)(e,!0)}}_loadVideo(e){return new Promise(((t,i)=>{const s=(0,o.Oo)(e,"canplay",(()=>{this.removeHandles("canplay"),this.autoplay?e.play().then(t,i):t()}));this.addHandles(s,"canplay"),"anonymous"!==e.crossOrigin&&(e.crossOrigin="anonymous",(0,h.isBlobProtocol)(e.src)||(e.src=e.src))}))}};s=m.UR,(0,n._)([(0,u.MZ)()],_.prototype,"autoplay",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],_.prototype,"content",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],_.prototype,"contentWidth",null),(0,n._)([(0,u.MZ)({readOnly:!0})],_.prototype,"contentHeight",null),(0,n._)([(0,u.MZ)()],_.prototype,"controller",void 0),(0,n._)([(0,u.MZ)({type:Number})],_.prototype,"currentTime",null),(0,n._)([(0,u.MZ)({type:Number})],_.prototype,"duration",null),(0,n._)([(0,u.MZ)(y.x3)],_.prototype,"video",null),(0,n._)([(0,f.K)("video")],_.prototype,"writeVideo",null),(0,n._)([(0,u.MZ)(y.m$)],_.prototype,"type",void 0),_=(0,n._)([(0,p.$)("esri.layers.support.VideoElement")],_);const b=_},58296:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var s=i(35143),n=i(69098),r=i(42553),a=i(46053),o=(i(81806),i(76460),i(47249),i(85842)),l=i(19247),d=i(65215),c=i(23701);let h=class extends(n.A.ClonableMixin(r.A)){constructor(e){super(e),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,s._)([(0,a.MZ)({type:l.default})],h.prototype,"frameCenter",void 0),(0,s._)([(0,a.MZ)({type:d.default})],h.prototype,"frameOutline",void 0),(0,s._)([(0,a.MZ)({type:c.default})],h.prototype,"lineOfSight",void 0),(0,s._)([(0,a.MZ)({type:l.default})],h.prototype,"sensorLocation",void 0),(0,s._)([(0,a.MZ)({type:c.default})],h.prototype,"sensorTrail",void 0),h=(0,s._)([(0,o.$)("esri.layers.support.TelemetryData")],h);const u=h},75635:(e,t,i)=>{i.d(t,{A_:()=>m,I0:()=>g,SC:()=>y,YI:()=>f,Yv:()=>v,a1:()=>h,nX:()=>u,yQ:()=>p});var s=i(19247),n=i(65215),r=i(23701),a=i(58296),o=i(97173);const l="application/x-mpegURL",d="video/mp4",c="video/webm",h={UASDatalinkLocalSet:1e4,PrecisionTimeStamp:10002,MissionId:10003,PlatformTailNumber:10004,PlatformHeadingAngle:10005,PlatformPitchAngle:10006,PlatformRollAngle:10007,PlatformTrueAirspeed:10008,PlatformIndicatedAirspeed:10009,PlatformDesignation:10010,ImageSourceSensor:10011,ImageCoordinateSystem:10012,SensorLatitude:10013,SensorLongitude:10014,SensorTrueAltitude:10015,SensorHorizontalFOV:10016,SensorVerticalFOV:10017,SensorAzimuthAngle:10018,SensorElevationAngle:10019,SensorRollAngle:10020,PlatformSlantRange:10021,TargetWidth:10022,FrameCenterLatitude:10023,FrameCenterLongitude:10024,FrameCenterElevation:10025,OffsetCorner1Latitude:10026,OffsetCorner1Longitude:10027,OffsetCorner2Latitude:10028,OffsetCorner2Longitude:10029,OffsetCorner3Latitude:10030,OffsetCorner3Longitude:10031,OffsetCorner4Latitude:10032,OffsetCorner4Longitude:10033,TargetLocationLatitude:10040,TargetLocationLongitude:10041,TargetLocationElevation:10042,TargetTrackGateWidth:10043,TargetTrackGateHeight:10044,TargetErrorEstimateHorizontal:10045,TargetErrorEstimateLateral:10046,GenericFlagData:10047,PlatformGroundSpeed:10056,PlatformGroundRange:10057,PlatformRemainingFuel:10058,PlatformCallSign:10059,SensorFOVName:10063,PlatformMagneticHeading:10064,LDSVersionNumber:10065,AlternatePlatformName:10070,EventStartTimeUTC:10072,VMTIDataSet:10074,SensorEllipsoidHeight:10075,OperationalMode:10077,CornerLatitudePoint1:10082,CornerLongitudePoint1:10083,CornerLatitudePoint2:10084,CornerLongitudePoint2:10085,CornerLatitudePoint3:10086,CornerLongitudePoint3:10087,CornerLatitudePoint4:10088,CornerLongitudePoint4:10089,SARMotionImageryMetadata:10095,SecurityClassification:20001,SecurityClassifyingAuthority:20002,SecurityClassifyingCountry:20003,SecuritySCI:20004,SecurityCaveats:20005,SecurityReleaseInstructions:20006,SecurityLDSVersion:20022,EsriVideoWidth:90001,EsriVideoHeight:90002,EsriFrameCenterLatitude:90050,EsriFrameCenterLongitude:90051,EsriCornerLatitudePt1:90052,EsriCornerLongitudePt1:90053,EsriCornerLatitudePt2:90054,EsriCornerLongitudePt2:90055,EsriCornerLatitudePt3:90056,EsriCornerLongitudePt3:90057,EsriCornerLatitudePt4:90058,EsriCornerLongitudePt4:90059,EsriFrameOutline:90060,EsriSensorPosition:90061,EsriHorizonPixelPack:90063,EsriGroundControlPoints:90064};function u(e){const{duration:t,end:i,start:s,timezone:n="UTC"}=e||{};return"number"!=typeof t?null:new o.default({duration:t||null,end:"number"==typeof i?new Date(i):null,start:"number"==typeof s?new Date(s):null,timezone:n})}function p(e,t){const i=[...t],s=i.findIndex((t=>t.equals(e)));return s>-1&&i.splice(s),i.push(e),i}function f(e){if(!e?.size)return new a.default;const t=function(e){if(!e?.size)return null;if(e.has(h.EsriSensorPosition)){const t=e.get(h.EsriSensorPosition)?.value;if(t)return s.default.fromJSON(t.geometry)}return e.has(h.SensorLongitude)&&e.has(h.SensorLatitude)&&e.has(h.SensorTrueAltitude)?new s.default({x:e.get(h.SensorLongitude)?.value,y:e.get(h.SensorLatitude)?.value,z:e.get(h.SensorTrueAltitude)?.value}):null}(e),i=function(e){return function(e){return e&&e.has(h.EsriFrameCenterLatitude)&&e.has(h.EsriFrameCenterLongitude)?new s.default({x:e.get(h.EsriFrameCenterLongitude).value,y:e.get(h.EsriFrameCenterLatitude).value,z:e.get(h.FrameCenterElevation).value}):null}(e)??function(e){return e&&e.has(h.FrameCenterLatitude)&&e.has(h.FrameCenterLongitude)?new s.default({x:e.get(h.FrameCenterLongitude)?.value,y:e.get(h.FrameCenterLatitude)?.value,z:e.get(h.FrameCenterElevation)?.value}):null}(e)}(e),o=function(e){if(!e)return null;const t=e.get(h.EsriFrameOutline)?.value;return t?n.default.fromJSON(t.geometry):function(e){if(!(e.has(h.EsriCornerLatitudePt1)&&e.has(h.EsriCornerLongitudePt1)&&e.has(h.EsriCornerLatitudePt2)&&e.has(h.EsriCornerLongitudePt2)&&e.has(h.EsriCornerLatitudePt3)&&e.has(h.EsriCornerLongitudePt3)&&e.has(h.EsriCornerLatitudePt4)&&e.has(h.EsriCornerLongitudePt4)))return null;const t=[e.get(h.EsriCornerLongitudePt1)?.value,e.get(h.EsriCornerLatitudePt1)?.value],i=[e.get(h.EsriCornerLongitudePt2)?.value,e.get(h.EsriCornerLatitudePt2)?.value],s=[e.get(h.EsriCornerLongitudePt3)?.value,e.get(h.EsriCornerLatitudePt3)?.value],r=[e.get(h.EsriCornerLongitudePt4)?.value,e.get(h.EsriCornerLatitudePt4)?.value];return new n.default({rings:[[t,i,s,r]]})}(e)??function(e){if(!(e.has(h.OffsetCorner1Latitude)&&e.has(h.OffsetCorner1Longitude)&&e.has(h.OffsetCorner2Latitude)&&e.has(h.OffsetCorner2Longitude)&&e.has(h.OffsetCorner3Latitude)&&e.has(h.OffsetCorner3Longitude)&&e.has(h.OffsetCorner4Latitude)&&e.has(h.OffsetCorner4Longitude)&&e.has(h.FrameCenterLatitude)&&e.has(h.FrameCenterLongitude)))return null;const t=e.get(h.FrameCenterLatitude)?.value,i=e.get(h.FrameCenterLongitude)?.value,s=t+e.get(h.OffsetCorner1Latitude)?.value,r=i+e.get(h.OffsetCorner1Longitude)?.value,a=t+e.get(h.OffsetCorner2Latitude)?.value,o=i+e.get(h.OffsetCorner2Longitude)?.value,l=t+e.get(h.OffsetCorner3Latitude)?.value,d=i+e.get(h.OffsetCorner3Longitude)?.value,c=t+e.get(h.OffsetCorner4Latitude)?.value,u=i+e.get(h.OffsetCorner4Longitude)?.value;return new n.default({rings:[[[r,s],[o,a],[d,l],[u,c]]]})}(e)}(e),l=function(e,t){if(!e||!t)return null;const i=[e.x,e.y,e.z??0],s=[t.x,t.y,t.z??0];return new r.default({paths:[[i,s]]})}(t,i);return new a.default({frameCenter:i,frameOutline:o,lineOfSight:l,sensorLocation:t})}function g(e){return e?.size?e.get(h.EsriGroundControlPoints)?.value??null??null:null}function y(e){return e?.size?e.get(h.EsriHorizonPixelPack)?.value??null:null}function m(e){if(!e)return l;const t=e.match(/\.(\w{3,4})(?:$|\?)/i);if(!t)return l;switch(t[1].toLowerCase()){case"mp4":return d;case"webm":return c;default:return l}}function v(e){const t=e?.layers;return t?.length?t.map((e=>({layerId:e.id,posterUrl:e.poster,sourceType:e.serviceType,title:e.name,type:e.type||"Video Layer"}))):[]}},81447:(e,t,i)=>{i.d(t,{A:()=>d});var s=i(35143),n=i(91967),r=i(81806),a=i(50346),o=i(46053),l=(i(76460),i(47249),i(85842));let d=class extends n.default{constructor(e){super(e),this.computedOpacity=1,this.computedVisible=!0,this.opacity=1,this.visible=!0,this._fadeOutResolver=null,this._fadeInResolver=null}get transitioning(){return(this._fadeOutResolver||!this.visible?0:this.opacity)!==this.computedOpacity}endTransition(){this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeInResolver=this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0}fadeIn(){return this._fadeInResolver||(this.opacity=1,this.computedOpacity=0,this._fadeOutResolver?.(),this._fadeOutResolver=null,this._fadeInResolver=(0,a.createResolver)()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver=(0,a.createResolver)()),this._fadeOutResolver.promise}transitionStep(e,t){const i=(0,r.A)("mapview-transitions-duration"),s=i?1/i:0;if(0===s)this.computedOpacity=this.opacity,this.computedVisible=this.visible;else{const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const n=e*s;this.computedOpacity=i>t?Math.max(t,i-n):Math.min(t,i+n),this.computedVisible=this.computedOpacity>0}}this.transitioning||(this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeOutResolver=this._fadeInResolver=null)}};(0,s._)([(0,o.MZ)()],d.prototype,"computedOpacity",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"computedVisible",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"opacity",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"visible",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"transitioning",null),(0,s._)([(0,o.MZ)()],d.prototype,"_fadeOutResolver",void 0),(0,s._)([(0,o.MZ)()],d.prototype,"_fadeInResolver",void 0),d=(0,s._)([(0,l.$)("esri.views.2d.engine.transitions.FadeTransition")],d)},97173:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(35143),n=i(69098),r=i(42553),a=i(46053),o=(i(81806),i(76460),i(47249),i(28379)),l=i(85842),d=i(17707);let c=class extends(n.A.ClonableMixin(r.A)){constructor(e){super(e),this.duration=null,this.end=null,this.start=null,this.timezone="UTC"}readEnd(e,t){return null!=t.end?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}readStart(e,t){return null!=t.start?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}};(0,s._)([(0,a.MZ)({type:Number,json:{write:{allowNull:!0}}})],c.prototype,"duration",void 0),(0,s._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"end",void 0),(0,s._)([(0,o.w)("end")],c.prototype,"readEnd",null),(0,s._)([(0,d.K)("end")],c.prototype,"writeEnd",null),(0,s._)([(0,a.MZ)({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0),(0,s._)([(0,o.w)("start")],c.prototype,"readStart",null),(0,s._)([(0,d.K)("start")],c.prototype,"writeStart",null),(0,s._)([(0,a.MZ)({type:String})],c.prototype,"timezone",void 0),c=(0,s._)([(0,l.$)("esri.layers.support.VideoTimeExtent")],c);const h=c}}]);
//# sourceMappingURL=77420.56c78f65.chunk.js.map