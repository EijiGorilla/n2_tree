"use strict";(self.webpackChunkn2_tree=self.webpackChunkn2_tree||[]).push([[2267,24648,35617,54787,57505,60517,63391,79886,97265],{5109:(e,t,n)=>{n.d(t,{k:()=>a});var r=n(35143),i=n(68134),s=(n(76460),n(81806),n(47249),n(50076),n(85842)),o=n(56829);let a=class extends o.g{constructor(e){super(e)}initialize(){this.addHandles((0,i.watch)((()=>this.analysisViewData.visible),(e=>this.visible=e),i.syncAndInitial))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};a=(0,r._)([(0,s.$)("esri.views.interactive.AnalysisToolBase")],a)},12482:(e,t,n)=>{n.d(t,{$7:()=>E,B:()=>O,Fo:()=>x,M7:()=>T,NN:()=>d,Q5:()=>b,Tq:()=>M,Up:()=>A,XF:()=>S,Ze:()=>y,bK:()=>a,bh:()=>f,id:()=>m,ky:()=>u,qt:()=>N,tW:()=>R,v9:()=>h,w7:()=>l,wF:()=>o,wS:()=>w,wz:()=>g,x:()=>p,xS:()=>_,ze:()=>c});var r=n(31633),i=n(59097);function s(e){return e?N:M}function o(e,t){return t?.mode?t.mode:s(e).mode}function a(e,t){return null!=t?t:s(e)}function l(e,t){return o(null==e||(e.hasZ??!1),t)}function c(e,t){return a(null==e||(e.hasZ??!1),t)}function u(e){const t=v(e);return l(e.geometry,t)}function f(e){const t=v(e),n=l(e.geometry,t),r=null!=t&&"on-the-ground"!==n?T(t):0,i=t?.featureExpressionInfo;return{mode:n,offset:r,featureExpressionInfo:i}}function d(e){return g(f(e))}function h(e){return g(e)||p(e)}function p(e){return"0"===e?.featureExpressionInfo?.expression}function g(e){if(!e)return!1;if("on-the-ground"===e.mode)return!1;const t=e?.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!t||"0"===t)}function v(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function y(e,t){if(!e?.offset)return 0;const{offset:n,unit:i}=e;if("decimal-degrees"===i)return 0;const s="unknown"!==i&&i?i:"meters",o=(0,r.mq)(t);return o?(0,r.oU)(n,s,o):0}function m(e,t,n){if(!n?.mode)return;const r=e.hasZ?e.z:0,i=y(n,e.spatialReference);switch(n.mode){case"absolute-height":return r-i;case"on-the-ground":return 0;case"relative-to-ground":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"ground")??0)+i);case"relative-to-scene":return r-((t.elevationProvider.getElevation(e.x,e.y,r,e.spatialReference,"scene")??0)+i)}}function w(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return x(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,n,r)}function _(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return x(e,t[0],t[1],t.length>2?t[2]:0,n,r,i)}function x(e,t,n,r,i,s){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(null==s)return;const a=null!=o?o.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:l}=b(t,n,r,i,e,s);return function(e,t,n,r,i,s,o,a){const l=y(o,i);switch(a){case"absolute-height":return e-l;case"relative-to-ground":return e-((s.elevationProvider.getElevation(t,n,r,i,"ground")??0)+l);case"relative-to-scene":return e-((s.elevationProvider.getElevation(t,n,r,i,"scene")??0)+l)}}(l,t,n,r,i,e,o,a)}function b(e,t,n,r,i,s){const o=y(s,r);switch(s.mode){case"absolute-height":return{absoluteZ:n+o,elevation:0};case"on-the-ground":{const n=i.elevationProvider.getElevation(e,t,0,r,"ground")??0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{const s=i.elevationProvider.getElevation(e,t,n,r,"ground")??0;return{absoluteZ:n+s+o,elevation:s}}case"relative-to-scene":{const s=i.elevationProvider.getElevation(e,t,n,r,"scene")??0;return{absoluteZ:n+s+o,elevation:s}}}}function A(e,t){if(null==t)return!1;const{mode:n}=t;return null!=n&&("scene"===e&&"relative-to-scene"===n||"ground"===e&&"absolute-height"!==n)}function O(e,t,n){return n&&n.mode!==t?`${e} only support ${t} elevation mode`:null}function E(e,t,n){return n?.mode===t?`${e} do not support ${t} elevation mode`:null}function R(e,t){return null!=t?.featureExpressionInfo&&"0"!==t.featureExpressionInfo.expression?`${e} do not support featureExpressionInfo`:null}function S(e,t){t&&e.warn(".elevationInfo=",t)}function T(e){return(e?.offset??0)*(0,i.Ao)(e?.unit)}const N={mode:"absolute-height",offset:0},M={mode:"on-the-ground",offset:null}},14239:(e,t,n)=>{n.d(t,{N:()=>c});var r=n(4212),i=n(16506),s=n(59246),o=n(80517),a=n(84093),l=n(34781);class c extends s.w{constructor(e,t){super(e,t,new i.$(o.a,(()=>n.e(71043).then(n.bind(n,71043)))))}initializePipeline(e){switch(e.blitMode){case a.d.None:case a.d.Depth:return(0,l.Ey)({colorWrite:l.kn});case a.d.Alpha:return(0,l.Ey)({blending:l.Ky,colorWrite:l.kn});default:(0,r.Xb)(e.blitMode);case a.d.PremultipliedAlpha:case a.d.COUNT:return(0,l.Ey)({blending:l.Os,colorWrite:l.kn})}}}},14487:(e,t,n)=>{n.d(t,{F:()=>s});n(9624);var r=n(13312),i=n(64232);function s(e,t,n,r,s){return!(null==t||null==r||e.length<2)&&(o.x=e[0],o.y=e[1],o.z=e[2],o.spatialReference=t,(0,i.g)(o,n,r,s))}const o=(0,n(18117).T)(0,0,0,r.default.WGS84)},18117:(e,t,n)=>{function r(e,t,n,r){return{x:e,y:t,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}function i(e,t,n,r,i){e.x=t,e.y=n,e.z=r,e.hasZ=null!=r,e.spatialReference=i}n.d(t,{J:()=>i,T:()=>r})},20578:(e,t,n)=>{n.d(t,{r:()=>o});n(81806),n(76460);var r=n(20664),i=n(99791),s=n(64753);class o extends s.m{constructor(e,t,n){super(n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.n.ALL),this.lineStart=e,this.lineEnd=t}equals(e){return e instanceof o&&(0,r.p)(this.lineStart,e.lineStart)&&(0,r.p)(this.lineEnd,e.lineEnd)}}},21812:(e,t,n)=>{n.d(t,{_:()=>r});class r{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=e,this.count=t,this.type=n,this.offset=r,this.stride=i,this.normalized=s,this.divisor=o}}},23543:(e,t,n)=>{n.d(t,{c:()=>o});n(81806),n(76460);var r=n(20664),i=n(99791),s=n(64753);class o extends s.m{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.n.ALL,o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];super(r,s),this.type=e,this.lineStart=t,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof o&&this.type===e.type&&(0,r.p)(this.lineStart,e.lineStart)&&(0,r.p)(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return(0,r.j)(this.lineStart,this.lineEnd)}}},24648:(e,t,n)=>{n.d(t,{IV:()=>g,LF:()=>i,T9:()=>u,Wq:()=>a,d_:()=>s,g2:()=>d,gT:()=>o,hs:()=>f,iT:()=>p,kM:()=>l,l3:()=>c,n0:()=>v,r7:()=>h});var r=n(31633);function i(e){return{value:e}}function s(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}function o(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,r.t$)(t),value:e,unit:t,rotationType:n}}function l(e,t){const n=c(e,t);return"angle"===e.type?a(n,t,e.rotationType):function(e,t){return{type:(0,r.t$)(t),value:e,unit:t}}(n,t)}function c(e,t){return(0,r.oU)(e.value,e.unit,t)}function u(e,t){return null==e?t:null==t||e.value>(0,r.oU)(t.value,t.unit,e.unit)?e:t}function f(e,t){return null==e?null:{...e,value:e.value*t}}function d(e,t,n){if(t===n)return e;switch(n){case"arithmetic":case"geographic":return 90-e}}const h=s(0,"meters"),p=o(0,"square-meters"),g=(a(0,"radians"),a(0,"degrees")),v=a(0,"degrees","geographic")},25530:(e,t,n)=>{n.d(t,{G:()=>c,V:()=>f});var r=n(43047),i=n(55855),s=n(69817),o=n(3799),a=n(58350),l=n(86955);function c(e,t){const n=e.vertex;t.hasVerticalOffset?(f(n),t.hasScreenSizePerspective&&(e.include(s.Y6),(0,s.OH)(n),(0,o.yu)(e.vertex,t)),n.code.add(l.H`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${t.spherical?l.H`vec3 worldNormal = normalize(worldPos + localOrigin);`:l.H`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${t.hasScreenSizePerspective?l.H`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:l.H`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):n.code.add(l.H`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const u=(0,i.vt)();function f(e){e.uniforms.add(new a.E("verticalOffset",((e,t)=>{const{minWorldLength:n,maxWorldLength:i,screenLength:s}=e.verticalOffset,o=Math.tan(.5*t.camera.fovY)/(.5*t.camera.fullViewport[3]),a=t.camera.pixelRatio||1;return(0,r.s)(u,s*a,o,n,i)})))}},27963:(e,t,n)=>{n.d(t,{Ir:()=>u});var r=n(19555),i=n(72745),s=n(43047),o=n(55855),a=n(28450),l=n(51596),c=n(86955);function u(e){e.fragment.uniforms.add(new l.I("projInfo",(e=>function(e){const t=e.projectionMatrix;return 0===t[11]?(0,s.s)(f,2/(e.fullWidth*t[0]),2/(e.fullHeight*t[5]),(1+t[12])/t[0],(1+t[13])/t[5]):(0,s.s)(f,-2/(e.fullWidth*t[0]),-2/(e.fullHeight*t[5]),(1-t[8])/t[0],(1-t[9])/t[5])}(e.camera)))),e.fragment.uniforms.add(new a.E("zScale",(e=>0===e.camera.projectionMatrix[11]?(0,r.hZ)(d,0,1):(0,r.hZ)(d,1,0)))),e.fragment.code.add(c.H`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}const f=(0,o.vt)();const d=(0,i.vt)()},30484:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(20664),i=n(99791),s=n(64753);class o extends s.m{constructor(e,t){super(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.n.ALL),this.intersectionPoint=e}equals(e){return e instanceof o&&(0,r.p)(this.intersectionPoint,e.intersectionPoint)}}},35202:(e,t,n)=>{n.d(t,{G:()=>a});var r=n(80517),i=n(14239),s=n(84093),o=n(93345);class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.d.None;this._techniques=e,this._parameters=new r.C,this._configuration=new s.N,this._configuration.blitMode=t,e.precompile(i.N,this._configuration)}blit(e,t,n,r){e.bindFramebuffer(n.fbo),e.setClearColor(0,0,0,1),e.clear(o.NV.COLOR),this._parameters.texture=t.getTexture();const s=this._techniques.get(i.N,this._configuration);e.bindTechnique(s,r,this._parameters),e.screen.draw()}blend(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._configuration.hasOpacityFactor=s<1;const o=this._techniques.get(i.N,this._configuration);return!!o.compiled&&(e.bindFramebuffer(n.fbo),this._parameters.texture=t.getTexture(),this._parameters.opacity=s,e.bindTechnique(o,r,this._parameters),e.screen.draw(),!0)}}},35617:(e,t,n)=>{n.r(t),n.d(t,{hydratedAdapter:()=>l});var r=n(76797),i=n(66388),s=n(19247),o=n(65215),a=n(23701);const l={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),o=new s.default({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return r&&(o.z=e.getPointZ(t)),i&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,n){const r=new o.default({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){const r=new a.default({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){const r=new i.default({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){const i=e.hasZ(t),s=e.hasM(t),o=new r.default({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(i){const n=e.getZExtent(t);o.zmin=n.vmin,o.zmax=n.vmax}if(s){const n=e.getMExtent(t);o.mmin=n.vmin,o.mmax=n.vmax}return o.cache._geVersion=t,o}}},36911:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(76460),i=n(30726),s=n(97255),o=n(93345),a=n(27207);const l=()=>r.A.getLogger("esri.views.webgl.VertexArrayObject");let c=class{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._context=e,this._locations=t,this._layout=n,this._buffers=r,this._indexBuffer=i,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),null!=this._indexBuffer?this._indexBuffer.usedMemory:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(this._buffers.size+(this._indexBuffer?1:0))*s.i5}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,i.WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&l().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(o.vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(o.vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:n}=this;e||l().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,n)=>{const r=t.get(n);r?(0,a.yu)(this._context,this._locations,e,r):l().error("Vertex element descriptor is empty!")})),null!=n&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,n.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}}},37431:(e,t,n)=>{n.d(t,{Gc:()=>l,RI:()=>u,Z4:()=>c,dk:()=>d,vr:()=>f});var r=n(76931),i=n(19555),s=n(20664),o=n(95925),a=n(75762);function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.vt)();return c(e,(0,r.WA)(t),n),(0,s.n)(n.direction,n.direction),n}function c(e,t,n){return u(e,e.screenToRender(t,(0,r.sc)(a.rq.get())),n)}function u(e,t,n){const o=(0,r.sc)((0,i.C)(a.rq.get(),t));if(o[2]=0,!e.unprojectFromRenderScreen(o,n.origin))return null;const l=(0,r.sc)((0,i.C)(a.rq.get(),t));l[2]=1;const c=e.unprojectFromRenderScreen(l,a.rq.get());return null==c?null:((0,s.d)(n.direction,c,n.origin),n)}function f(e,t,n){return d(e,e.screenToRender(t,(0,r.sc)(a.rq.get())),n)}function d(e,t,n){(0,s.c)(n.origin,e.eye);const r=(0,s.i)(a.rq.get(),t[0],t[1],1),i=e.unprojectFromRenderScreen(r,a.rq.get());return null==i?null:((0,s.d)(n.direction,i,n.origin),n)}},38224:(e,t,n)=>{n.d(t,{d:()=>p});var r,i,s=n(35143),o=n(98773),a=(n(81806),n(76460)),l=n(30726),c=n(50346),u=n(68134),f=n(46053),d=(n(47249),n(85842)),h=n(69124);(i=r||(r={}))[i.PENDING=0]="PENDING",i[i.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",i[i.RUNNING=2]="RUNNING";let p=class extends h.j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.analysisView=null,this._reconnectViewTask=null,this._parentChangeFromReconnect=!1,this._startUserOperation=null;const t=e?.analysis;null!=t?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0))}normalizeCtorArgs(e){const{analysis:t,...n}=e;return n}initialize(){this.addHandles([(0,u.watch)((()=>this.analysis?.parent),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),u.sync),(0,u.watch)((()=>({view:this.view,ready:null!=this.view&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:n}=e;const r=t?.view;n!==r&&(this._startUserOperation=(0,l.DC)(this._startUserOperation),this._disconnectFromView(r)),this._scheduleViewReconnect()}),u.syncAndInitial),(0,u.watch)((()=>this.analysis.isEditable),((e,t)=>{null!=this.analysisView&&(e&&!t&&null==this.tool?this.createTool():e||!t||null==this.tool||this.tool.active||this.removeTool())}))])}destroy(){this._reconnectViewTask=(0,l.DC)(this._reconnectViewTask),this._startUserOperation=(0,l.DC)(this._startUserOperation),null!=this.analysisView&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),null!=this.analysis&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,l.DC)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return null!=this.analysisView&&!this.connectingToView}get connectingToView(){return null!=this._reconnectViewTask}get isAnalysisOwner(){return this._get("isAnalysisOwner")}set visible(e){this._set("visible",e),null!=this.analysisView&&(this.analysisView.visible=e)}async start(){if(!this.visible)return void a.A.getLogger(this).warn("Cannot start analysis when not visible");this.clear();const e={task:null,abort:null,state:r.PENDING},t=(0,o.UT)((async t=>{e.state=r.WAIT_FOR_VIEW_READY,await(0,u.whenOnce)((()=>this.ready),t),e.state=r.RUNNING,this.createTool({interactive:!0})}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}clear(){this._startUserOperation=(0,l.DC)(this._startUserOperation),this.removeTool(),this.analysis.clear()}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,l.DC)(this._reconnectViewTask);const e=(0,o.UT)((async t=>{try{await this._reconnectView(t)}catch(n){if((0,c.throwIfAborted)(t),!(0,c.isAbortError)(n))return void a.A.getLogger(this).warn("Failed to use analysis in view model",n);throw n}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,n=null!=t&&t.ready&&this.supported,r=this.analysis;if(this._startUserOperation=g(this._startUserOperation),this._disconnectFromView(t),n&&null!=t&&null!=r){if(this.isAnalysisOwner){if(null!=r.parent)return void this.logError("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(r)}this.analysisView=await t.whenAnalysisView(r),(0,c.isAborted)(e)?this._startUserOperation=g(this._startUserOperation):(this.analysisView.visible=this.visible,this.onConnectToAnalysisView(this.analysisView),this.createTool())}}_disconnectFromView(e){this.removeTool(),null!=e&&this.isAnalysisOwner&&(this._parentChangeFromReconnect=!0,e.analyses.remove(this.analysis),this.analysis.clear()),this.analysisView=null,this.onDisconnectFromAnalysisView()}_setExternalAnalysis(e){null==this.analysisView||this.isAnalysisOwner||(this.analysisView.visible=!0),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1}get testInfo(){}};function g(e){return null!=e&&e.state>=r.RUNNING?(e.abort(),null):e}(0,s._)([(0,f.MZ)({nonNullable:!0})],p.prototype,"analysis",null),(0,s._)([(0,f.MZ)()],p.prototype,"analysisView",void 0),(0,s._)([(0,f.MZ)()],p.prototype,"ready",null),(0,s._)([(0,f.MZ)()],p.prototype,"connectingToView",null),(0,s._)([(0,f.MZ)({readOnly:!0})],p.prototype,"isAnalysisOwner",null),(0,s._)([(0,f.MZ)({type:Boolean,value:!0})],p.prototype,"visible",null),(0,s._)([(0,f.MZ)()],p.prototype,"_reconnectViewTask",void 0),p=(0,s._)([(0,d.$)("esri.widgets.support.InteractiveAnalysisViewModel")],p)},40318:(e,t,n)=>{n.d(t,{Q:()=>d,R:()=>f});var r=n(25530),i=n(69817),s=n(3799),o=n(51596),a=n(23148),l=n(21390),c=n(86955),u=n(66470);const f=.5;function d(e,t){e.include(i.Y6),e.attributes.add(u.r.POSITION,"vec3"),e.attributes.add(u.r.NORMAL,"vec3"),e.attributes.add(u.r.CENTEROFFSETANDDISTANCE,"vec4");const n=e.vertex;(0,s.NB)(n,t),(0,s.yu)(n,t),n.uniforms.add(new o.I("viewport",(e=>e.camera.fullViewport)),new l.m("polygonOffset",(e=>e.shaderPolygonOffset)),new a.U("cameraGroundRelative",(e=>e.camera.aboveGround?1:-1))),t.hasVerticalOffset&&(0,r.V)(n),n.constants.add("smallOffsetAngle","float",.984807753012208),n.code.add(c.H`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),n.code.add(c.H`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${t.terrainDepthTest?c.H.float(0):c.H`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),t.draped&&!t.hasVerticalOffset||(0,s.S7)(n),t.draped||(n.uniforms.add(new a.U("perDistancePixelRatio",(e=>Math.tan(e.camera.fovY/2)/(e.camera.fullViewport[2]/2)))),n.code.add(c.H`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${c.H.float(f)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `)),t.screenCenterOffsetUnitsEnabled&&(0,s.Nz)(n),t.hasScreenSizePerspective&&(0,i.OH)(n),n.code.add(c.H`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      vec3 centerOffset = centerOffsetAndDistance.xyz;
      float pointGroundDistance = centerOffsetAndDistance.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${t.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${t.hasScreenSizePerspective&&(t.hasVerticalOffset||t.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${t.hasVerticalOffset?t.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${t.hasVerticalOffset?c.H`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${t.screenCenterOffsetUnitsEnabled?"":c.H`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${t.screenCenterOffsetUnitsEnabled?t.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${t.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)}},41595:(e,t,n)=>{n.d(t,{KF:()=>g,MF:()=>p,VG:()=>f,g7:()=>h,gf:()=>d,hI:()=>c,o8:()=>l,q6:()=>u});var r=n(76460),i=n(50346),s=n(32535),o=n(98976);const a=()=>r.A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function l(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function c(e){const t=e?.expression;if("string"==typeof t){const e=y(t);if(null!=e)return{cachedResult:e}}return null}async function u(e,t,n,r){const s=e?.expression;if("string"!=typeof s)return null;const a=y(s);if(null!=a)return{cachedResult:a};const l=await(0,o.lw)();(0,i.throwIfAborted)(n);const c=l.arcadeUtils,u=c.createSyntaxTree(s);return c.dependsOnView(u)?(null!=r&&r.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:c.createFunction(u),context:c.createExecContext(null,{sr:t}),modules:l}}}function f(e,t,n){return e.arcadeUtils.createFeature(t.attributes,t.geometry,n)}function d(e,t){if(null!=e&&!v(e)){if(!t||!e.arcade)return void a().errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,s.wZ)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function h(e){if(null!=e){if(v(e))return e.cachedResult;const t=e.arcade;let n=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof n&&(e.cachedResult=0,n=0),n}return 0}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?.featureExpressionInfo;const r=n?.expression;return t||"0"===r||(n=null),n??null}const g={cachedResult:0};function v(e){return null!=e.cachedResult}function y(e){return"0"===e?0:null}},44680:(e,t,n)=>{function r(){return[1,0,0,0,1,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]}function s(e,t,n,r,i,s,o,a,l){return[e,t,n,r,i,s,o,a,l]}n.d(t,{fA:()=>s,o8:()=>i,vt:()=>r,zK:()=>o});const o=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:i,create:r,createView:function(e,t){return new Float64Array(e,t,9)},fromValues:s},Symbol.toStringTag,{value:"Module"}))},49296:(e,t,n)=>{n.d(t,{F:()=>s});var r=n(59097),i=n(41595);class s{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,r.Ao)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(e){this._meterUnitOffset=e,this._renderUnitOffset=0}set offsetElevationInfoUnits(e){this._meterUnitOffset=e*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(e){this._renderUnitOffset+=e}geometryZWithOffset(e,t){const n=this.calculateOffsetRenderUnits(t);return null!=this.featureExpressionInfoContext?n:e+n}calculateOffsetRenderUnits(e){let t=this._meterUnitOffset;const n=this.featureExpressionInfoContext;return null!=n&&(t+=(0,i.g7)(n)*this._metersPerElevationInfoUnit),t/e.unitInMeters+this._renderUnitOffset}setFromElevationInfo(e){this.mode=e.mode,this.unit=(0,r.Tg)(e.unit)?e.unit:"meters",this.offsetElevationInfoUnits=e.offset??0}updateFeatureExpressionInfoContext(e,t,n){if(null==e)return void(this._featureExpressionInfoContext=null);const r=e?.arcade;r&&null!=t&&null!=n?(this._featureExpressionInfoContext=(0,i.o8)(e),(0,i.gf)(this._featureExpressionInfoContext,(0,i.VG)(r.modules,t,n))):this._featureExpressionInfoContext=e}static fromElevationInfo(e){const t=new s;return null!=e&&t.setFromElevationInfo(e),t}}},54787:(e,t,n)=>{n.d(t,{c:()=>r,g:()=>i});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},56572:(e,t,n)=>{n.d(t,{l:()=>o});n(81806),n(76460);var r=n(20664),i=n(99791),s=n(64753);class o extends s.m{constructor(e,t,n,r){super(r,arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.n.ALL),this.previousVertex=e,this.centerVertex=t,this.nextVertex=n}equals(e){return e instanceof o&&(0,r.p)(this.previousVertex,e.previousVertex)&&(0,r.p)(this.centerVertex,e.centerVertex)&&(0,r.p)(this.nextVertex,e.nextVertex)}}},57662:(e,t,n)=>{var r,i,s;n.d(t,{O7:()=>i,Om:()=>r,sv:()=>s}),function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(r||(r={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(i||(i={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(s||(s={}))},62374:(e,t,n)=>{n.d(t,{y:()=>c});var r=n(98720),i=n(98521),s=n(51596),o=n(23148),a=n(86955),l=n(4653);function c(e){e.vertex.uniforms.add(new o.U("renderTransparentlyOccludedHUD",(e=>e.hudRenderStyle===i.D.Occluded?1:e.hudRenderStyle===i.D.NotOccluded?0:.75)),new s.I("viewport",(e=>e.camera.fullViewport)),new l.x("hudVisibilityTexture",(e=>e.hudVisibility?.getTexture()))),e.vertex.include(r.K),e.vertex.code.add(a.H`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}},63078:(e,t,n)=>{n.d(t,{N:()=>u});var r=n(35143),i=n(69539),s=n(42553),o=n(46053),a=n(85842);let l=class extends s.A{constructor(){super(...arguments),this.enabled=!0}};(0,r._)([(0,o.MZ)({type:Boolean})],l.prototype,"enabled",void 0),l=(0,r._)([(0,a.$)("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],l);let c=class extends s.A{constructor(e){super(e),this.lineSnapper=new l,this.parallelLineSnapper=new l,this.rightAngleSnapper=new l,this.rightAngleTriangleSnapper=new l,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThresholdMeters=.3,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new i.default([255,127,0]),this.orangeTransparent=new i.default([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"lineSnapper",void 0),(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"parallelLineSnapper",void 0),(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleSnapper",void 0),(0,r._)([(0,o.MZ)({type:l,constructOnly:!0,nonNullable:!0,json:{write:!0}})],c.prototype,"rightAngleTriangleSnapper",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"shortLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],c.prototype,"distance",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"intersectionParallelLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"parallelLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"verticalLineThresholdMeters",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"touchSensitivityMultiplier",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],c.prototype,"pointOnLineThreshold",void 0),(0,r._)([(0,o.MZ)({type:i.default,nonNullable:!0})],c.prototype,"orange",void 0),(0,r._)([(0,o.MZ)({type:i.default,nonNullable:!0})],c.prototype,"orangeTransparent",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthReference",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"lineHintWidthTarget",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],c.prototype,"lineHintFadedExtensions",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],c.prototype,"parallelLineHintWidth",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],c.prototype,"parallelLineHintLength",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"parallelLineHintOffset",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],c.prototype,"rightAngleHintSize",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],c.prototype,"rightAngleHintOutlineSize",void 0),(0,r._)([(0,o.MZ)({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],c.prototype,"satisfiesConstraintScreenThreshold",void 0),c=(0,r._)([(0,a.$)("esri.views.interactive.snapping.Settings.Defaults")],c);const u=new c},63391:(e,t,n)=>{n.r(t),n.d(t,{buffer:()=>M,changeDefaultSpatialReferenceTolerance:()=>k,clearDefaultSpatialReferenceTolerance:()=>$,clip:()=>u,contains:()=>d,convexHull:()=>O,crosses:()=>h,cut:()=>f,densify:()=>G,difference:()=>E,disjoint:()=>w,distance:()=>p,equals:()=>g,extendedSpatialReferenceInfo:()=>c,flipHorizontal:()=>I,flipVertical:()=>D,generalize:()=>Z,geodesicArea:()=>B,geodesicBuffer:()=>V,geodesicDensify:()=>j,geodesicLength:()=>W,intersect:()=>S,intersectLinesToPoints:()=>q,intersects:()=>v,isSimple:()=>b,nearestCoordinate:()=>z,nearestVertex:()=>C,nearestVertices:()=>P,offset:()=>N,overlaps:()=>_,planarArea:()=>H,planarLength:()=>L,relate:()=>x,rotate:()=>U,simplify:()=>A,symmetricDifference:()=>R,touches:()=>y,union:()=>T,within:()=>m});var r=n(40565),i=n(38590),s=n(52612),o=n(13312),a=n(35617);function l(e){const t=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return t?(0,r.PZ)(o.default,t):o.default.WGS84}function c(e){return s.G.extendedSpatialReferenceInfo(e)}function u(e,t){return(0,i.f)(e),s.G.clip(a.hydratedAdapter,l(e),e,t)}function f(e,t){return(0,i.f)(e),s.G.cut(a.hydratedAdapter,l(e),e,t)}function d(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.contains(a.hydratedAdapter,l(e),e,t)}function h(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.crosses(a.hydratedAdapter,l(e),e,t)}function p(e,t,n){return(0,i.f)(e),(0,i.f)(t),s.G.distance(a.hydratedAdapter,l(e),e,t,n)}function g(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.equals(a.hydratedAdapter,l(e),e,t)}function v(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.intersects(a.hydratedAdapter,l(e),e,t)}function y(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.touches(a.hydratedAdapter,l(e),e,t)}function m(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.within(a.hydratedAdapter,l(e),e,t)}function w(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.disjoint(a.hydratedAdapter,l(e),e,t)}function _(e,t){return(0,i.f)(e),(0,i.f)(t),s.G.overlaps(a.hydratedAdapter,l(e),e,t)}function x(e,t,n){return(0,i.f)(e),(0,i.f)(t),s.G.relate(a.hydratedAdapter,l(e),e,t,n)}function b(e){return(0,i.f)(e),s.G.isSimple(a.hydratedAdapter,l(e),e)}function A(e){return(0,i.f)(e),s.G.simplify(a.hydratedAdapter,l(e),e)}function O(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.G.convexHull(a.hydratedAdapter,l(e),e,t)}function E(e,t){return(0,i.f)(t),s.G.difference(a.hydratedAdapter,l(e),e,t)}function R(e,t){return(0,i.f)(t),s.G.symmetricDifference(a.hydratedAdapter,l(e),e,t)}function S(e,t){return(0,i.f)(t),s.G.intersect(a.hydratedAdapter,l(e),e,t)}function T(e){return s.G.union(a.hydratedAdapter,l(e),e)}function N(e,t,n,r,i,o){return s.G.offset(a.hydratedAdapter,l(e),e,t,n,r,i,o)}function M(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return s.G.buffer(a.hydratedAdapter,l(e),e,t,n,r)}function V(e,t,n,r,i,o){return s.G.geodesicBuffer(a.hydratedAdapter,l(e),e,t,n,r,i,o)}function z(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(0,i.f)(e),s.G.nearestCoordinate(a.hydratedAdapter,l(e),e,t,n)}function C(e,t){return(0,i.f)(e),s.G.nearestVertex(a.hydratedAdapter,l(e),e,t)}function P(e,t,n,r){return(0,i.f)(e),s.G.nearestVertices(a.hydratedAdapter,l(e),e,t,n,r)}function F(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function U(e,t,n){if(null==e)throw new Y;const r=e.spatialReference;if(null==(n=n??F(e)))throw new Y;const i=e.constructor.fromJSON(s.G.rotate(e,t,n));return i.spatialReference=r,i}function I(e,t){if(null==e)throw new Y;const n=e.spatialReference;if(null==(t=t??F(e)))throw new Y;const r=e.constructor.fromJSON(s.G.flipHorizontal(e,t));return r.spatialReference=n,r}function D(e,t){if(null==e)throw new Y;const n=e.spatialReference;if(null==(t=t??F(e)))throw new Y;const r=e.constructor.fromJSON(s.G.flipVertical(e,t));return r.spatialReference=n,r}function Z(e,t,n,r){return(0,i.f)(e),s.G.generalize(a.hydratedAdapter,l(e),e,t,n,r)}function G(e,t,n){return(0,i.f)(e),s.G.densify(a.hydratedAdapter,l(e),e,t,n)}function j(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return(0,i.f)(e),s.G.geodesicDensify(a.hydratedAdapter,l(e),e,t,n,r)}function H(e,t){return(0,i.f)(e),s.G.planarArea(a.hydratedAdapter,l(e),e,t)}function L(e,t){return(0,i.f)(e),s.G.planarLength(a.hydratedAdapter,l(e),e,t)}function B(e,t,n){return(0,i.f)(e),s.G.geodesicArea(a.hydratedAdapter,l(e),e,t,n)}function W(e,t,n){return(0,i.f)(e),s.G.geodesicLength(a.hydratedAdapter,l(e),e,t,n)}function q(e,t){return s.G.intersectLinesToPoints(a.hydratedAdapter,l(e),e,t)}function k(e,t){s.G.changeDefaultSpatialReferenceTolerance(e,t)}function $(e){s.G.clearDefaultSpatialReferenceTolerance(e)}class Y extends Error{constructor(){super("Illegal Argument Exception")}}},63928:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(45463),i=n(48168);class s extends r.im{intersect(e,t,n,r,s,o){return(0,i.Uy)(e,n,r,s,void 0,o)}}},64232:(e,t,n)=>{n.d(t,{W:()=>a,g:()=>o});var r=n(9392),i=n(9624),s=n(45308);function o(e,t,n,r){if((0,i.canProjectWithoutEngine)(e.spatialReference,n)){l[0]=e.x,l[1]=e.y;const i=e.z;return l[2]=i??r??0,(0,s.projectBuffer)(l,e.spatialReference,0,t,n,0)}const o=(0,i.tryProjectWithZConversion)(e,n);return!!o&&(t[0]=o?.x,t[1]=o?.y,t[2]=o?.z??r??0,!0)}async function a(e,t,n,r,s){return await(0,i.initializeProjection)(e.spatialReference,n,null,s),o(e,t,n,r)}const l=(0,r.vt)()},64753:(e,t,n)=>{n.d(t,{m:()=>r});class r{constructor(e,t){this.isDraped=e,this.domain=t}}},66678:(e,t,n)=>{n.d(t,{P:()=>a});var r=n(24648),i=n(63391),s=n(7137),o=n(90659);function a(e){const{spatialReference:t}=e;return(0,o.M0)(t,l,c,e)}function l(e){return(0,r.gT)(Math.abs((0,s.geodesicAreas)([e],"square-meters")[0]),"square-meters")}function c(e){try{return(0,r.gT)(Math.abs((0,i.geodesicArea)(e,"square-meters")),"square-meters")}catch(t){return null}}},67425:(e,t,n)=>{n.d(t,{I2:()=>g,Kf:()=>y,Uk:()=>_,ai:()=>w,au:()=>d,fe:()=>m,nG:()=>p,nu:()=>v,sE:()=>h,uw:()=>r});var r,i=n(34761),s=n(13191),o=n(9392),a=n(5809),l=n(45308),c=n(81284),u=n(80935),f=n(66470);function d(e,t,n,r,i,s,o,a,c,u,f){const d=x[f.mode];let h,p,g=0;if((0,l.projectBuffer)(e,t,n,r,c.spatialReference,i,a))return d?.requiresAlignment(f)?(g=d.applyElevationAlignmentBuffer(r,i,s,o,a,c,u,f),h=s,p=o):(h=r,p=i),(0,l.projectBuffer)(h,c.spatialReference,p,s,u.spatialReference,o,a)?g:void 0}function h(e,t,n,r,i){const s=((0,c.v)(e)?e.z:(0,u.cN)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,u.R1)(t,e,"ground")??0;return i.verticalDistanceToGround=0,i.sampledElevation=n,void(i.z=n)}case"relative-to-ground":{const o=(0,u.R1)(t,e,"ground")??0,a=n.geometryZWithOffset(s,r);return i.verticalDistanceToGround=a,i.sampledElevation=o,void(i.z=a+o)}case"relative-to-scene":{const o=(0,u.R1)(t,e,"scene")??0,a=n.geometryZWithOffset(s,r);return i.verticalDistanceToGround=a,i.sampledElevation=o,void(i.z=a+o)}case"absolute-height":{const o=n.geometryZWithOffset(s,r),a=(0,u.R1)(t,e,"ground")??0;return i.verticalDistanceToGround=o-a,i.sampledElevation=a,void(i.z=o)}default:return void(i.z=0)}}function p(e,t,n,r){return h(e,t,n,r,A),A.z}function g(e,t,n){return"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?null==t||null==n?e.definedChanged:r.UPDATE:e.onTheGroundChanged}function v(e){return"relative-to-ground"===e||"relative-to-scene"===e}function y(e){return"absolute-height"!==e}function m(e,t,n,r,s){h(t,n,s,r,A),w(e,A.verticalDistanceToGround);const o=A.sampledElevation,l=(0,i.C)(b,e.transformation);return O[0]=t.x,O[1]=t.y,O[2]=A.z,(0,a.l)(t.spatialReference,O,l,r.spatialReference)?e.transformation=l:console.warn("Could not locate symbol object properly, it might be misplaced"),o}function w(e,t){for(let n=0;n<e.geometries.length;++n){const r=e.geometries[n].getMutableAttribute(f.r.CENTEROFFSETANDDISTANCE);r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],f.r.CENTEROFFSETANDDISTANCE))}}class _{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(r||(r={}));const x={"absolute-height":{applyElevationAlignmentBuffer:function(e,t,n,r,i,s,o,a){const l=a.calculateOffsetRenderUnits(o),c=a.featureExpressionInfoContext;t*=3,r*=3;for(let u=0;u<i;++u){const i=e[t],s=e[t+1],o=e[t+2];n[r]=i,n[r+1]=s,n[r+2]=null==c?o+l:l,t+=3,r+=3}return 0},requiresAlignment:function(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}},"on-the-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,s){let o=0;const a=s.spatialReference;t*=3,r*=3;for(let l=0;l<i;++l){const i=e[t],l=e[t+1],c=e[t+2],u=s.getElevation(i,l,c,a,"ground")??0;o+=u,n[r]=i,n[r+1]=l,n[r+2]=u,t+=3,r+=3}return o/i},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(e,t,n,r,i,s,o,a){let l=0;const c=a.calculateOffsetRenderUnits(o),u=a.featureExpressionInfoContext,f=s.spatialReference;t*=3,r*=3;for(let d=0;d<i;++d){const i=e[t],o=e[t+1],a=e[t+2],d=s.getElevation(i,o,a,f,"ground")??0;l+=d,n[r]=i,n[r+1]=o,n[r+2]=null==u?a+d+c:d+c,t+=3,r+=3}return l/i},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(e,t,n,r,i,s,o,a){let l=0;const c=a.calculateOffsetRenderUnits(o),u=a.featureExpressionInfoContext,f=s.spatialReference;t*=3,r*=3;for(let d=0;d<i;++d){const i=e[t],o=e[t+1],a=e[t+2],d=s.getElevation(i,o,a,f,"scene")??0;l+=d,n[r]=i,n[r+1]=o,n[r+2]=null==u?a+d+c:d+c,t+=3,r+=3}return l/i},requiresAlignment:()=>!0}},b=(0,s.vt)(),A=new _,O=(0,o.vt)()},67737:(e,t,n)=>{n.d(t,{G:()=>r,Q:()=>i});const r={stableRendering:!1},i={rootOrigin:null}},69124:(e,t,n)=>{n.d(t,{j:()=>c});var r=n(35143),i=n(91967),s=n(76460),o=n(68134),a=n(46053),l=(n(81806),n(47249),n(85842));let c=class extends i.default{constructor(e){super(e),this.tool=null,this._loggedUnsupportedErrorOnce=!1,null!=e?.visible&&(this.visible=e.visible)}initialize(){this.addHandles((0,o.watch)((()=>({ready:null!=this.view&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:n}=e;!t||n||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),o.syncAndInitial))}destroy(){this.removeTool(),this.view=null}get active(){return null!=this.tool&&this.tool.active}get disabled(){return null==this.view||!this.view.ready||!this.supported}get supported(){return null==this.view||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this.removeHandles(t),null!=e&&this.addHandles(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),null!=this.tool&&(this.tool.visible=e)}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),null==this.view||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,o.when)((()=>t.created),(()=>{t.active&&null!=this.view&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if(null==e)return;const t=this.view?.tools;null!=t?t.remove(e):e.destroy(),this._set("tool",null)}logError(){s.A.getLogger(this).error(...arguments)}};(0,r._)([(0,a.MZ)({constructOnly:!0})],c.prototype,"tool",void 0),(0,r._)([(0,a.MZ)()],c.prototype,"active",null),(0,r._)([(0,a.MZ)()],c.prototype,"disabled",null),(0,r._)([(0,a.MZ)()],c.prototype,"supported",null),(0,r._)([(0,a.MZ)({value:null})],c.prototype,"view",null),(0,r._)([(0,a.MZ)({type:Boolean,value:!0})],c.prototype,"visible",null),c=(0,r._)([(0,l.$)("esri.widgets.support.InteractiveToolViewModel")],c)},69817:(e,t,n)=>{n.d(t,{OH:()=>c,Y6:()=>a,pM:()=>l});var r=n(20664),i=n(9392),s=n(5517),o=n(86955);function a(e){e.vertex.code.add(o.H`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`),e.vertex.code.add(o.H`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`),e.vertex.code.add(o.H`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add(o.H`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`),e.vertex.code.add(o.H`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add(o.H`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)}function l(e){e.uniforms.add(new s.t("screenSizePerspective",(e=>u(e.screenSizePerspective))))}function c(e){e.uniforms.add(new s.t("screenSizePerspectiveAlignment",(e=>u(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function u(e){return(0,r.i)(f,e.parameters.divisor,e.parameters.offset,e.minScaleFactor)}const f=(0,i.vt)()},74e3:(e,t,n)=>{n.d(t,{CI:()=>a,aI:()=>u,fk:()=>l});n(81806);var r=n(15941),i=n(80963);function s(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1}return!0}function o(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!s(e[n],t[n]))return!1;return!0}function a(e,t){return e===t||null!=e&&null!=t&&(0,i.aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function l(e,t,n){return e===t||null!=e&&null!=t&&(0,i.aI)(e.spatialReference,t.spatialReference)&&(0,r.Sp)(e.x,t.x,n)&&(0,r.Sp)(e.y,t.y,n)&&(0,r.Sp)(e.z??0,t.z??0,n)&&(0,r.Sp)(e.m??0,t.m??0,n)}function c(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.type!==t.type)return!1;switch(e.type){case"point":return a(e,t);case"extent":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax}(e,t);case"polyline":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&o(e.paths,t.paths)}(e,t);case"polygon":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&o(e.rings,t.rings)}(e,t);case"multipoint":return function(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&!!(0,i.aI)(e.spatialReference,t.spatialReference)&&s(e.points,t.points)}(e,t);case"mesh":return!1;default:return}}function u(e,t){return e===t||null!=e&&null!=t&&e.objectId===t.objectId&&!!c(e.geometry,t.geometry)&&!!function(e,t){if(e===t)return!0;if(!e||!t)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}(e.attributes,t.attributes)}},75507:(e,t,n)=>{n.d(t,{f:()=>s});var r=n(9392);class i{constructor(e,t){this.vec3=e,this.id=t}}function s(e,t,n,s){return new i((0,r.fA)(e,t,n),s)}},76718:(e,t,n)=>{n.d(t,{g:()=>c});var r=n(18690),i=(n(81806),n(76460)),s=n(78393),o=n(61678),a=n(93345);const l=()=>i.A.getLogger("esri.views.webgl.BufferObject");class c{static createIndex(e,t,n){return new c(e,a.NZ.ELEMENT_ARRAY_BUFFER,t,n)}static createVertex(e,t,n){return new c(e,a.NZ.ARRAY_BUFFER,t,n)}static createUniform(e,t,n){return new c(e,a.NZ.UNIFORM_BUFFER,t,n)}static createPixelPack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_READ,n=arguments.length>2?arguments[2]:void 0;const r=new c(e,a.NZ.PIXEL_PACK_BUFFER,t);return n&&r.setSize(n),r}static createPixelUnpack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STREAM_DRAW,n=arguments.length>2?arguments[2]:void 0;return new c(e,a.NZ.PIXEL_UNPACK_BUFFER,t,n)}static createTransformFeedback(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a._U.STATIC_DRAW,n=arguments.length>2?arguments[2]:void 0;const r=new c(e,a.NZ.TRANSFORM_FEEDBACK_BUFFER,t);return r.setSize(n),r}constructor(e,t,n,r){this._context=e,this.bufferType=t,this.usage=n,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(a.vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,o.Y2)(this._context.gl),r&&this.setData(r)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===a.pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===a.pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===a.NZ.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(a.vt.BufferObject,this),this._context=null):this._glName&&l().warn("Leaked WebGL buffer object")}setSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case a.pe.UNSIGNED_SHORT:e*=2;break;case a.pe.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===a.NZ.ELEMENT_ARRAY_BUFFER&&((0,s.mg)(e)?this._indexType=a.pe.UNSIGNED_BYTE:(0,s.jq)(e)?(t/=2,this._indexType=a.pe.UNSIGNED_SHORT):(0,s.XJ)(e)&&(t/=4,this._indexType=a.pe.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=e;const n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const r=this._context.gl;null!=t?r.bufferData(this.bufferType,t,this.usage):r.bufferData(this.bufferType,e,this.usage),(0,o.Y2)(r),this._isVAOAware&&this._context.bindVAO(n)}setSubData(e,t,n,r){if(!e)return;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:s}=this._context;s.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,n,r-n),(0,o.Y2)(s),this._isVAOAware&&this._context.bindVAO(i)}getSubData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n<0||i<0)return;const s=function(e){return(0,r.Xj)(e)}(e)?e.BYTES_PER_ELEMENT:1;if(s*((n??0)+(i??0))>e.byteLength)return;t+s*(i??0)>this.usedMemory&&l().warn("Potential problem getting subdata: requested data exceeds buffer size!");const o=this._context.gl;this.bufferType===a.NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,a.NZ.TRANSFORM_FEEDBACK_BUFFER),o.getBufferSubData(a.NZ.TRANSFORM_FEEDBACK_BUFFER,t,e,n,i),this._context.unbindBuffer(a.NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,a.NZ.COPY_READ_BUFFER),o.getBufferSubData(a.NZ.COPY_READ_BUFFER,t,e,n,i),this._context.unbindBuffer(a.NZ.COPY_READ_BUFFER))}async getSubDataAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;await this._context.clientWaitAsync(),this.getSubData(e,t,n,r)}}},77515:(e,t,n)=>{n.d(t,{CL:()=>u,Gc:()=>d,OK:()=>c,s7:()=>h,uc:()=>l,zS:()=>f});var r=n(20664),i=n(9392),s=n(78315),o=n(94966),a=n(66678);function l(e,t){const n=(0,s.a)(t);(0,r.i)(n,0,0,0);for(let s=0;s<e.length;++s)(0,r.g)(n,n,e[s]);(0,r.h)(n,n,1/e.length);let i=0;for(let s=0;s<e.length;++s)i=Math.max(i,(0,r.s)(n,e[s]));t[3]=Math.sqrt(i)}function c(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");(0,o.e9)(e[0],e[1],e[2],t)}function u(e,t){return(0,r.f)(e,t)+e[3]}function f(e,t,n,i){const s=p;return(0,r.c)(s.rings[0][0],e),(0,r.c)(s.rings[0][1],t),(0,r.c)(s.rings[0][2],n),(0,r.c)(s.rings[0][3],e),s.spatialReference=i,(0,a.P)(s)}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=(e,t)=>{if(0===t[0]&&0===t[1]&&0===t[2])return!1;for(let n=0;n<e.length;++n)if((0,r.f)(t,e[n])<-1e-6)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return t&&(0,r.c)(t,e[0]),!0;(0,r.i)(g,0,0,0);for(let s=0;s<e.length;++s)(0,r.g)(g,g,e[s]);if((0,r.n)(g,g),i(e,g))return t&&(0,r.c)(t,g),!0;if(!n)return!1;for(let s=0;s<e.length;++s)for(let n=0;n<e.length;++n)if(s!==n&&((0,r.e)(g,e[s],e[n]),(0,r.n)(g,g),i(e,g)))return t&&(0,r.c)(t,g),!0;return!1}function h(e){return"mouse"!==e.pointerType||0===e.button}const p={hasM:!1,hasZ:!0,rings:[[(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()]],spatialReference:null,type:"polygon"},g=(0,i.vt)()},80517:(e,t,n)=>{n.d(t,{C:()=>h,a:()=>g,b:()=>p});var r=n(73398),i=n(65058),s=n(81449),o=n(28450),a=n(21390),l=n(86955),c=n(70367),u=n(84093),f=n(31432),d=n(2687);class h extends f.Y{constructor(){super(...arguments),this.opacity=1}}function p(e){const t=new d.N5;t.include(r.c),t.fragment.uniforms.add(new c.N("tex",(e=>e.texture))),e.hasOpacityFactor&&t.fragment.uniforms.add(new a.m("opacity",(e=>e.opacity)));const n=e.blitMode===u.d.Depth;return n&&(t.fragment.uniforms.add(new o.E("nearFar",(e=>e.camera.nearFar))),t.fragment.include(i.E),t.fragment.include(s.W)),t.fragment.main.add(l.H`
    ${n?l.H`
          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);
          fragColor = float2rgba(normalizedLinearDepth);`:l.H`
          fragColor = texture(tex, uv) ${e.hasOpacityFactor?"* opacity":""};`}`),t}const g=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:h,build:p},Symbol.toStringTag,{value:"Module"}))},80935:(e,t,n)=>{n.d(t,{R1:()=>o,aY:()=>i,cN:()=>s});var r=n(81284);class i{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.array=e,this.spatialReference=t,this.offset=n}}function s(e){return"array"in e}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ground";if((0,r.v)(t))return e.getElevation(t.x,t.y,t.z||0,t.spatialReference,n);if(s(t)){let r=t.offset;return e.getElevation(t.array[r++],t.array[r++],t.array[r]||0,t.spatialReference??e.spatialReference,n)}return e.getElevation(t[0],t[1],t[2]||0,e.spatialReference,n)}},82887:(e,t,n)=>{n.d(t,{X:()=>d});var r=n(54901),i=n(77944),s=n(19276),o=n(68134),a=n(3589),l=n(63078),c=n(83973);var u=n(64344);const f=new Map;function d(e){if(!f.has(e)){const t=function(e,t){const n=new c.default({enabled:!0,selfEnabled:!1,featureEnabled:!0,distance:t?.distance??l.N.distance,touchSensitivityMultiplier:t?.touchSensitivityMultiplier??l.N.touchSensitivityMultiplier});return{...(0,o.watch)((()=>e.map?.allLayers?.toArray()??[]),(e=>{n.featureSources=new s.default(e).map((e=>new a.default({layer:e})))}),o.syncAndInitial),options:n}}(e,{distance:10}),n=function(e,t){return new u.g({view:e,options:t})}(e,t.options);f.set(e,{referenceCount:0,snappingManager:n,remove:()=>{t.remove(),n.destroy()}})}const t=f.get(e);t.referenceCount++;const n=(0,r.hA)((()=>function(e,t){t.referenceCount--,t.referenceCount>0||(0,i.d)((()=>{0===t.referenceCount&&(t.remove(),f.delete(e))}))}(e,t)));return{snappingManager:t.snappingManager,...n}}},84093:(e,t,n)=>{n.d(t,{N:()=>o,d:()=>r});var r,i=n(35143),s=n(6485);!function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.PremultipliedAlpha=2]="PremultipliedAlpha",e[e.Depth=3]="Depth",e[e.COUNT=4]="COUNT"}(r||(r={}));class o extends s.K{constructor(){super(...arguments),this.blitMode=r.None,this.hasOpacityFactor=!1}}(0,i._)([(0,s.W)({count:r.COUNT})],o.prototype,"blitMode",void 0),(0,i._)([(0,s.W)()],o.prototype,"hasOpacityFactor",void 0)},90659:(e,t,n)=>{n.d(t,{M0:()=>o,U7:()=>a,yF:()=>s});var r=n(7137),i=n(80963);function s(e){return(0,r.isSupported)(e)||(0,i.K8)(e)}function o(e,t,n){for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return(0,r.isSupported)(e)?t.apply(void 0,o):(0,i.K8)(e)?n.apply(void 0,o):null}const a=1e5},95085:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(35143),i=n(91967),s=n(18690),o=n(69098),a=n(5632),l=n(42553),c=n(46053),u=(n(81806),n(76460),n(85842));let f=0,d=class extends(l.A.JSONSupportMixin(o.A.ClonableMixin(a.A.IdentifiableMixin(i.default)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${f++}`,this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if(null!=t)switch(t.type){case"line-of-sight":case"dimension":case"viewshed":t.releaseAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(s.Ru)}};(0,r._)([(0,c.MZ)({type:String,constructOnly:!0,clonable:!1})],d.prototype,"id",void 0),(0,r._)([(0,c.MZ)({type:String})],d.prototype,"title",void 0),(0,r._)([(0,c.MZ)({clonable:!1,value:null})],d.prototype,"parent",null),(0,r._)([(0,c.MZ)({readOnly:!0})],d.prototype,"isEditable",null),d=(0,r._)([(0,u.$)("esri.analysis.Analysis")],d);const h=d},95756:(e,t,n)=>{n.d(t,{G:()=>s});var r=n(69728),i=n(87003);class s extends i.n{constructor(e,t){super(e,"vec2",r.c.Pass,((n,r,i)=>n.setUniform2fv(e,t(r,i))))}}},97255:(e,t,n)=>{n.d(t,{$B:()=>i,Qf:()=>c,Qh:()=>a,RS:()=>s,ez:()=>d,i5:()=>h,lM:()=>o,qK:()=>f,rq:()=>u});var r=n(78393);function i(e){return 32+e.length}const s=16;function o(e){if(!e)return 0;let t=f;for(const n in e)e.hasOwnProperty(n)&&(t+=l(e[n],!1));return t}function a(e){if(!e)return 0;if("number"==typeof e[0])return c(e);if(Array.isArray(e))return function(e){const t=e.length;if(0===t||"number"==typeof e[0])return u(e,8);let n=d;for(let r=0;r<t;r++)n+=l(e[r]);return n}(e);let t=f;for(const n in e)e.hasOwnProperty(n)&&(t+=l(e[n]));return t}function l(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(typeof e){case"object":return t?a(e):f;case"string":return i(e);case"number":return s;case"boolean":return 4;default:return 8}}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>e+(t?(0,r.iu)(t)?t.byteLength+h:Array.isArray(t)?u(t,s):0:0)),0)}function u(e,t){return d+e.length*t}const f=32,d=16,h=145},97583:(e,t,n)=>{n.d(t,{g:()=>y});n(81806);var r=n(90632),i=n(20664),s=n(9392),o=n(55855),a=n(45308),l=n(50468),c=n(87634),u=n(17345),f=n(75507),d=n(37046),h=n(67737),p=n(66470),g=n(8918),v=n(425);class y{constructor(e){this._originSR=e,this._rootOriginId="root/"+(0,r.c)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(e){const t=this._origins.get(this._rootOriginId);if(null==t){const t=h.Q.rootOrigin;if(null!=t)return this._origins.set(this._rootOriginId,(0,f.f)(t[0],t[1],t[2],this._rootOriginId)),this.getOrigin(e);const n=(0,f.f)(e[0]+Math.random()-.5,e[1]+Math.random()-.5,e[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,n),n}const n=this._gridSize,r=Math.round(e[0]/n),s=Math.round(e[1]/n),o=Math.round(e[2]/n),a=`${r}/${s}/${o}`;let l=this._origins.get(a);const c=.5*n;if((0,i.d)(m,e,t.vec3),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),m[0]<c&&m[1]<c&&m[2]<c){if(l){const t=Math.max(...m);if((0,i.d)(m,e,l.vec3),m[0]=Math.abs(m[0]),m[1]=Math.abs(m[1]),m[2]=Math.abs(m[2]),Math.max(...m)<t)return l}return t}return l||(l=(0,f.f)(r*n,s*n,o*n,a),this._origins.set(a,l)),l}_drawOriginBox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.fA)(1,1,0,1);const n=window.view,r=n._stage,i=t.toString();if(!this._objects.has(i)){this._material=new v.W({width:2,color:t}),r.add(this._material);const e=new g.x(r,{pickable:!1}),n=new d.B({castShadow:!1});r.add(n),e.add(n),this._objects.set(i,n)}const s=this._objects.get(i),f=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],h=f.length,y=new Array(3*h),m=new Array,w=.5*this._gridSize;for(let o=0;o<h;o++)y[3*o]=e[0]+(1&f[o]?w:-w),y[3*o+1]=e[1]+(2&f[o]?w:-w),y[3*o+2]=e[2]+(4&f[o]?w:-w),o>0&&m.push(o-1,o);(0,a.projectBuffer)(y,this._originSR,0,y,n.renderSpatialReference,0,h);const _=new u.V(this._material,[[p.r.POSITION,new l.n(y,m,3,!0)]],null,c.X.Line);r.add(_),s.addGeometry(_)}get test(){}}const m=(0,s.vt)()},98521:(e,t,n)=>{var r;n.d(t,{D:()=>r}),function(e){e[e.Occluded=0]="Occluded",e[e.NotOccluded=1]="NotOccluded",e[e.Both=2]="Both",e[e.COUNT=3]="COUNT"}(r||(r={}))},98720:(e,t,n)=>{n.d(t,{K:()=>s});var r=n(67582),i=n(86955);function s(e){e.uniforms.add(new r.o("alignPixelEnabled",(e=>e.alignPixelEnabled))),e.code.add(i.H`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),e.code.add(i.H`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}},99791:(e,t,n)=>{var r;n.d(t,{n:()=>r}),function(e){e[e.FEATURE=1]="FEATURE",e[e.SELF=2]="SELF",e[e.ALL=3]="ALL"}(r||(r={}))}}]);
//# sourceMappingURL=60517.3df24f53.chunk.js.map